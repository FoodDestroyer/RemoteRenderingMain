{"ast":null,"code":"import { c as createInlineWorkerFactory } from '../../../../rollup-plugin-web-worker-loader__helper__browser__createInlineWorkerFactory.js';\nvar WorkerFactory = createInlineWorkerFactory( /* rollup-plugin-web-worker-loader */function () {\n  (function () {\n    '__worker_loader_strict__';\n\n    function _arrayLikeToArray(arr, len) {\n      if (len == null || len > arr.length) len = arr.length;\n      for (var i = 0, arr2 = new Array(len); i < len; i++) {\n        arr2[i] = arr[i];\n      }\n      return arr2;\n    }\n    function _arrayWithoutHoles(arr) {\n      if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n    }\n    function _iterableToArray(iter) {\n      if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n    }\n    function _unsupportedIterableToArray(o, minLen) {\n      if (!o) return;\n      if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n      var n = Object.prototype.toString.call(o).slice(8, -1);\n      if (n === \"Object\" && o.constructor) n = o.constructor.name;\n      if (n === \"Map\" || n === \"Set\") return Array.from(o);\n      if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n    }\n    function _nonIterableSpread() {\n      throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n    function _toConsumableArray$1(arr) {\n      return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n    }\n    function _arrayWithHoles(arr) {\n      if (Array.isArray(arr)) return arr;\n    }\n    function _iterableToArrayLimit(arr, i) {\n      var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n      if (_i == null) return;\n      var _arr = [];\n      var _n = true;\n      var _d = false;\n      var _s, _e;\n      try {\n        for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n          _arr.push(_s.value);\n          if (i && _arr.length === i) break;\n        }\n      } catch (err) {\n        _d = true;\n        _e = err;\n      } finally {\n        try {\n          if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n      return _arr;\n    }\n    function _nonIterableRest() {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n    }\n    function _slicedToArray(arr, i) {\n      return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n    }\n    var register = {\n      exports: {}\n    };\n    var _createClass$1 = function () {\n      function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n      return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) defineProperties(Constructor, staticProps);\n        return Constructor;\n      };\n    }();\n    function _classCallCheck$1(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    var TinyEmitter$1 = function () {\n      function TinyEmitter() {\n        _classCallCheck$1(this, TinyEmitter);\n        Object.defineProperty(this, '__listeners', {\n          value: {},\n          enumerable: false,\n          writable: false\n        });\n      }\n      _createClass$1(TinyEmitter, [{\n        key: 'emit',\n        value: function emit(eventName) {\n          if (!this.__listeners[eventName]) return this;\n          for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n          try {\n            for (var _iterator = this.__listeners[eventName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var handler = _step.value;\n              handler.apply(undefined, args);\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n          return this;\n        }\n      }, {\n        key: 'once',\n        value: function once(eventName, handler) {\n          var _this = this;\n          var once = function once() {\n            _this.off(eventName, once);\n            handler.apply(undefined, arguments);\n          };\n          return this.on(eventName, once);\n        }\n      }, {\n        key: 'on',\n        value: function on(eventName, handler) {\n          if (!this.__listeners[eventName]) this.__listeners[eventName] = [];\n          this.__listeners[eventName].push(handler);\n          return this;\n        }\n      }, {\n        key: 'off',\n        value: function off(eventName, handler) {\n          if (handler) this.__listeners[eventName] = this.__listeners[eventName].filter(function (h) {\n            return h !== handler;\n          });else this.__listeners[eventName] = [];\n          return this;\n        }\n      }]);\n      return TinyEmitter;\n    }();\n    var tinyEmitter = TinyEmitter$1;\n    var _createClass = function () {\n      function defineProperties(target, props) {\n        for (var i = 0; i < props.length; i++) {\n          var descriptor = props[i];\n          descriptor.enumerable = descriptor.enumerable || false;\n          descriptor.configurable = true;\n          if (\"value\" in descriptor) descriptor.writable = true;\n          Object.defineProperty(target, descriptor.key, descriptor);\n        }\n      }\n      return function (Constructor, protoProps, staticProps) {\n        if (protoProps) defineProperties(Constructor.prototype, protoProps);\n        if (staticProps) defineProperties(Constructor, staticProps);\n        return Constructor;\n      };\n    }();\n    var _get = function get(object, property, receiver) {\n      if (object === null) object = Function.prototype;\n      var desc = Object.getOwnPropertyDescriptor(object, property);\n      if (desc === undefined) {\n        var parent = Object.getPrototypeOf(object);\n        if (parent === null) {\n          return undefined;\n        } else {\n          return get(parent, property, receiver);\n        }\n      } else if (\"value\" in desc) {\n        return desc.value;\n      } else {\n        var getter = desc.get;\n        if (getter === undefined) {\n          return undefined;\n        }\n        return getter.call(receiver);\n      }\n    };\n    var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n      return typeof obj;\n    } : function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n    function _toConsumableArray(arr) {\n      if (Array.isArray(arr)) {\n        for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n          arr2[i] = arr[i];\n        }\n        return arr2;\n      } else {\n        return Array.from(arr);\n      }\n    }\n    function _classCallCheck(instance, Constructor) {\n      if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n      }\n    }\n    function _possibleConstructorReturn(self, call) {\n      if (!self) {\n        throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      }\n      return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n    }\n    function _inherits(subClass, superClass) {\n      if (typeof superClass !== \"function\" && superClass !== null) {\n        throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n      }\n      subClass.prototype = Object.create(superClass && superClass.prototype, {\n        constructor: {\n          value: subClass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n      if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n    }\n    function _defineProperty(obj, key, value) {\n      if (key in obj) {\n        Object.defineProperty(obj, key, {\n          value: value,\n          enumerable: true,\n          configurable: true,\n          writable: true\n        });\n      } else {\n        obj[key] = value;\n      }\n      return obj;\n    }\n    var TinyEmitter = tinyEmitter;\n    var MESSAGE_RESULT = 0;\n    var MESSAGE_EVENT = 1;\n    var RESULT_ERROR = 0;\n    var RESULT_SUCCESS = 1;\n    var DEFAULT_HANDLER = 'main';\n    var isPromise = function isPromise(o) {\n      return (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && o !== null && typeof o.then === 'function' && typeof o.catch === 'function';\n    };\n    function RegisterPromise(fn) {\n      var handlers = _defineProperty({}, DEFAULT_HANDLER, fn);\n      var sendPostMessage = self.postMessage.bind(self);\n      var server = new (function (_TinyEmitter) {\n        _inherits(WorkerRegister, _TinyEmitter);\n        function WorkerRegister() {\n          _classCallCheck(this, WorkerRegister);\n          return _possibleConstructorReturn(this, (WorkerRegister.__proto__ || Object.getPrototypeOf(WorkerRegister)).apply(this, arguments));\n        }\n        _createClass(WorkerRegister, [{\n          key: 'emit',\n          value: function emit(eventName) {\n            for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              args[_key - 1] = arguments[_key];\n            }\n            if (args.length == 1 && args[0] instanceof TransferableResponse) {\n              sendPostMessage({\n                eventName: eventName,\n                args: args\n              }, args[0].transferable);\n            } else {\n              sendPostMessage({\n                eventName: eventName,\n                args: args\n              });\n            }\n            return this;\n          }\n        }, {\n          key: 'emitLocally',\n          value: function emitLocally(eventName) {\n            var _get2;\n            for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              args[_key2 - 1] = arguments[_key2];\n            }\n            (_get2 = _get(WorkerRegister.prototype.__proto__ || Object.getPrototypeOf(WorkerRegister.prototype), 'emit', this)).call.apply(_get2, [this, eventName].concat(args));\n          }\n        }, {\n          key: 'operation',\n          value: function operation(name, handler) {\n            handlers[name] = handler;\n            return this;\n          }\n        }]);\n        return WorkerRegister;\n      }(TinyEmitter))();\n      var run = function run(messageId, payload, handlerName) {\n        var onSuccess = function onSuccess(result) {\n          if (result && result instanceof TransferableResponse) {\n            sendResult(messageId, RESULT_SUCCESS, result.payload, result.transferable);\n          } else {\n            sendResult(messageId, RESULT_SUCCESS, result);\n          }\n        };\n        var onError = function onError(e) {\n          sendResult(messageId, RESULT_ERROR, {\n            message: e.message,\n            stack: e.stack\n          });\n        };\n        try {\n          var result = runFn(messageId, payload, handlerName);\n          if (isPromise(result)) {\n            result.then(onSuccess).catch(onError);\n          } else {\n            onSuccess(result);\n          }\n        } catch (e) {\n          onError(e);\n        }\n      };\n      var runFn = function runFn(messageId, payload, handlerName) {\n        var handler = handlers[handlerName || DEFAULT_HANDLER];\n        if (!handler) throw new Error('Not found handler for this request');\n        return handler(payload, sendEvent.bind(null, messageId));\n      };\n      var sendResult = function sendResult(messageId, success, payload) {\n        var transferable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n        sendPostMessage([MESSAGE_RESULT, messageId, success, payload], transferable);\n      };\n      var sendEvent = function sendEvent(messageId, eventName, payload) {\n        if (!eventName) throw new Error('eventName is required');\n        if (typeof eventName !== 'string') throw new Error('eventName should be string');\n        sendPostMessage([MESSAGE_EVENT, messageId, eventName, payload]);\n      };\n      self.addEventListener('message', function (_ref) {\n        var data = _ref.data;\n        if (Array.isArray(data)) {\n          run.apply(undefined, _toConsumableArray(data));\n        } else if (data && data.eventName) {\n          server.emitLocally.apply(server, [data.eventName].concat(_toConsumableArray(data.args)));\n        }\n      });\n      return server;\n    }\n    var TransferableResponse = function TransferableResponse(payload, transferable) {\n      _classCallCheck(this, TransferableResponse);\n      this.payload = payload;\n      this.transferable = transferable;\n    };\n    register.exports = RegisterPromise;\n    register.exports.TransferableResponse = TransferableResponse;\n    var registerWebworker = register.exports;\n    var SlicingMode = {\n      NONE: -1,\n      I: 0,\n      J: 1,\n      K: 2,\n      X: 3,\n      Y: 4,\n      Z: 5\n    };\n\n    /**\n     * Common utilities\n     * @module glMatrix\n     */\n    var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\n    if (!Math.hypot) Math.hypot = function () {\n      var y = 0,\n        i = arguments.length;\n      while (i--) {\n        y += arguments[i] * arguments[i];\n      }\n      return Math.sqrt(y);\n    };\n\n    /**\n     * 3 Dimensional Vector\n     * @module vec3\n     */\n\n    /**\n     * Creates a new, empty vec3\n     *\n     * @returns {vec3} a new 3D vector\n     */\n\n    function create() {\n      var out = new ARRAY_TYPE(3);\n      if (ARRAY_TYPE != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n      }\n      return out;\n    }\n    /**\n     * Subtracts vector b from vector a\n     *\n     * @param {vec3} out the receiving vector\n     * @param {ReadonlyVec3} a the first operand\n     * @param {ReadonlyVec3} b the second operand\n     * @returns {vec3} out\n     */\n\n    function subtract(out, a, b) {\n      out[0] = a[0] - b[0];\n      out[1] = a[1] - b[1];\n      out[2] = a[2] - b[2];\n      return out;\n    }\n    /**\n     * Scales a vec3 by a scalar number\n     *\n     * @param {vec3} out the receiving vector\n     * @param {ReadonlyVec3} a the vector to scale\n     * @param {Number} b amount to scale the vector by\n     * @returns {vec3} out\n     */\n\n    function scale(out, a, b) {\n      out[0] = a[0] * b;\n      out[1] = a[1] * b;\n      out[2] = a[2] * b;\n      return out;\n    }\n    /**\n     * Adds two vec3's after scaling the second operand by a scalar value\n     *\n     * @param {vec3} out the receiving vector\n     * @param {ReadonlyVec3} a the first operand\n     * @param {ReadonlyVec3} b the second operand\n     * @param {Number} scale the amount to scale b by before adding\n     * @returns {vec3} out\n     */\n\n    function scaleAndAdd(out, a, b, scale) {\n      out[0] = a[0] + b[0] * scale;\n      out[1] = a[1] + b[1] * scale;\n      out[2] = a[2] + b[2] * scale;\n      return out;\n    }\n    /**\n     * Perform some operation over an array of vec3s.\n     *\n     * @param {Array} a the array of vectors to iterate over\n     * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n     * @param {Number} offset Number of elements to skip at the beginning of the array\n     * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n     * @param {Function} fn Function to call for each vector in the array\n     * @param {Object} [arg] additional argument to pass to fn\n     * @returns {Array} a\n     * @function\n     */\n\n    (function () {\n      var vec = create();\n      return function (a, stride, offset, count, fn, arg) {\n        var i, l;\n        if (!stride) {\n          stride = 3;\n        }\n        if (!offset) {\n          offset = 0;\n        }\n        if (count) {\n          l = Math.min(count * stride + offset, a.length);\n        } else {\n          l = a.length;\n        }\n        for (i = offset; i < l; i += stride) {\n          vec[0] = a[i];\n          vec[1] = a[i + 1];\n          vec[2] = a[i + 2];\n          fn(vec, vec, arg);\n          a[i] = vec[0];\n          a[i + 1] = vec[1];\n          a[i + 2] = vec[2];\n        }\n        return a;\n      };\n    })();\n    var globals = {\n      // single-component labelmap\n      buffer: null,\n      dimensions: [0, 0, 0],\n      prevPoint: null,\n      slicingMode: null // 2D or 3D painting\n    }; // --------------------------------------------------------------------------\n\n    function handlePaintRectangle(_ref) {\n      var point1 = _ref.point1,\n        point2 = _ref.point2;\n      var _point = _slicedToArray(point1, 3),\n        x1 = _point[0],\n        y1 = _point[1],\n        z1 = _point[2];\n      var _point2 = _slicedToArray(point2, 3),\n        x2 = _point2[0],\n        y2 = _point2[1],\n        z2 = _point2[2];\n      var xstart = Math.max(Math.min(x1, x2), 0);\n      var xend = Math.min(Math.max(x1, x2), globals.dimensions[0] - 1);\n      if (xstart <= xend) {\n        var ystart = Math.max(Math.min(y1, y2), 0);\n        var yend = Math.min(Math.max(y1, y2), globals.dimensions[1] - 1);\n        var zstart = Math.max(Math.min(z1, z2), 0);\n        var zend = Math.min(Math.max(z1, z2), globals.dimensions[2] - 1);\n        var jStride = globals.dimensions[0];\n        var kStride = globals.dimensions[0] * globals.dimensions[1];\n        for (var k = zstart; k <= zend; k++) {\n          for (var j = ystart; j <= yend; j++) {\n            var index = j * jStride + k * kStride;\n            globals.buffer.fill(1, index + xstart, index + xend + 1);\n          }\n        }\n      }\n    } // --------------------------------------------------------------------------\n    // center and scale3 are in IJK coordinates\n\n    function handlePaintEllipse(_ref2) {\n      var center = _ref2.center,\n        scale3 = _ref2.scale3;\n      var radius3 = _toConsumableArray$1(scale3);\n      var indexCenter = center.map(function (val) {\n        return Math.round(val);\n      });\n      var sliceAxis = -1;\n      if (globals.slicingMode != null && globals.slicingMode !== SlicingMode.NONE) {\n        sliceAxis = globals.slicingMode % 3;\n      }\n      var yStride = globals.dimensions[0];\n      var zStride = globals.dimensions[0] * globals.dimensions[1];\n      var _indexCenter = _slicedToArray(indexCenter, 3),\n        xmin = _indexCenter[0],\n        ymin = _indexCenter[1],\n        zmin = _indexCenter[2];\n      var _indexCenter2 = _slicedToArray(indexCenter, 3),\n        xmax = _indexCenter2[0],\n        ymax = _indexCenter2[1],\n        zmax = _indexCenter2[2];\n      if (sliceAxis !== 2) {\n        zmin = Math.round(Math.max(indexCenter[2] - radius3[2], 0));\n        zmax = Math.round(Math.min(indexCenter[2] + radius3[2], globals.dimensions[2] - 1));\n      }\n      for (var z = zmin; z <= zmax; z++) {\n        var dz = 0;\n        if (sliceAxis !== 2) {\n          dz = (indexCenter[2] - z) / radius3[2];\n        }\n        var dzSquared = dz * dz;\n        if (dzSquared <= 1) {\n          var ay = radius3[1] * Math.sqrt(1 - dzSquared);\n          if (sliceAxis !== 1) {\n            ymin = Math.round(Math.max(indexCenter[1] - ay, 0));\n            ymax = Math.round(Math.min(indexCenter[1] + ay, globals.dimensions[1] - 1));\n          }\n          for (var y = ymin; y <= ymax; y++) {\n            var dy = 0;\n            if (sliceAxis !== 1) {\n              dy = (indexCenter[1] - y) / radius3[1];\n            }\n            var dySquared = dy * dy;\n            if (dySquared + dzSquared <= 1) {\n              if (sliceAxis !== 0) {\n                var ax = radius3[0] * Math.sqrt(1 - dySquared - dzSquared);\n                xmin = Math.round(Math.max(indexCenter[0] - ax, 0));\n                xmax = Math.round(Math.min(indexCenter[0] + ax, globals.dimensions[0] - 1));\n              }\n              if (xmin <= xmax) {\n                var index = y * yStride + z * zStride;\n                globals.buffer.fill(1, index + xmin, index + xmax + 1);\n              }\n            }\n          }\n        }\n      }\n    } // --------------------------------------------------------------------------\n\n    function handlePaint(_ref3) {\n      var point = _ref3.point,\n        radius = _ref3.radius;\n      if (!globals.prevPoint) {\n        globals.prevPoint = point;\n      } // DDA params\n\n      var delta = [point[0] - globals.prevPoint[0], point[1] - globals.prevPoint[1], point[2] - globals.prevPoint[2]];\n      var inc = [1, 1, 1];\n      for (var i = 0; i < 3; i++) {\n        if (delta[i] < 0) {\n          delta[i] = -delta[i];\n          inc[i] = -1;\n        }\n      }\n      var step = Math.max.apply(Math, delta); // DDA\n\n      var thresh = [step, step, step];\n      var pt = _toConsumableArray$1(globals.prevPoint);\n      for (var s = 0; s <= step; s++) {\n        handlePaintEllipse({\n          center: pt,\n          scale3: radius\n        });\n        for (var ii = 0; ii < 3; ii++) {\n          thresh[ii] -= delta[ii];\n          if (thresh[ii] <= 0) {\n            thresh[ii] += step;\n            pt[ii] += inc[ii];\n          }\n        }\n      }\n      globals.prevPoint = point;\n    } // --------------------------------------------------------------------------\n\n    function handlePaintTriangles(_ref4) {\n      var triangleList = _ref4.triangleList;\n      // debugger;\n      var triangleCount = Math.floor(triangleList.length / 9);\n      for (var i = 0; i < triangleCount; i++) {\n        var point0 = triangleList.subarray(9 * i + 0, 9 * i + 3);\n        var point1 = triangleList.subarray(9 * i + 3, 9 * i + 6);\n        var point2 = triangleList.subarray(9 * i + 6, 9 * i + 9);\n        var v1 = [0, 0, 0];\n        var v2 = [0, 0, 0];\n        subtract(v1, point1, point0);\n        subtract(v2, point2, point0);\n        var step1 = [0, 0, 0];\n        var numStep1 = 2 * Math.max(Math.abs(v1[0]), Math.abs(v1[1]), Math.abs(v1[2]));\n        scale(step1, v1, 1 / numStep1);\n        var step2 = [0, 0, 0];\n        var numStep2 = 2 * Math.max(Math.abs(v2[0]), Math.abs(v2[1]), Math.abs(v2[2]));\n        scale(step2, v2, 1 / numStep2);\n        var jStride = globals.dimensions[0];\n        var kStride = globals.dimensions[0] * globals.dimensions[1];\n        for (var u = 0; u <= numStep1 + 1; u++) {\n          var maxV = numStep2 - u * (numStep2 / numStep1);\n          for (var v = 0; v <= maxV + 1; v++) {\n            var point = _toConsumableArray$1(point0);\n            scaleAndAdd(point, point, step1, u);\n            scaleAndAdd(point, point, step2, v);\n            point[0] = Math.round(point[0]);\n            point[1] = Math.round(point[1]);\n            point[2] = Math.round(point[2]);\n            if (point[0] >= 0 && point[0] < globals.dimensions[0] && point[1] >= 0 && point[1] < globals.dimensions[1] && point[2] >= 0 && point[2] < globals.dimensions[2]) {\n              globals.buffer[point[0] + jStride * point[1] + kStride * point[2]] = 1;\n            }\n          }\n        }\n      }\n    } // --------------------------------------------------------------------------\n\n    registerWebworker().operation('start', function (_ref5) {\n      var bufferType = _ref5.bufferType,\n        dimensions = _ref5.dimensions,\n        slicingMode = _ref5.slicingMode;\n      if (!globals.buffer) {\n        var bufferSize = dimensions[0] * dimensions[1] * dimensions[2];\n        /* eslint-disable-next-line */\n\n        globals.buffer = new self[bufferType](bufferSize);\n        globals.dimensions = dimensions;\n        globals.prevPoint = null;\n        globals.slicingMode = slicingMode;\n      }\n    }).operation('paint', handlePaint).operation('paintRectangle', handlePaintRectangle).operation('paintEllipse', handlePaintEllipse).operation('paintTriangles', handlePaintTriangles).operation('end', function () {\n      var response = new registerWebworker.TransferableResponse(globals.buffer.buffer, [globals.buffer.buffer]);\n      globals.buffer = null;\n      return response;\n    });\n  })();\n}, null);\n/* eslint-enable */\n\nexport { WorkerFactory as W };","map":{"version":3,"names":["c","createInlineWorkerFactory","WorkerFactory","_arrayLikeToArray","arr","len","length","i","arr2","Array","_arrayWithoutHoles","isArray","_iterableToArray","iter","Symbol","iterator","from","_unsupportedIterableToArray","o","minLen","n","Object","prototype","toString","call","slice","constructor","name","test","_nonIterableSpread","TypeError","_toConsumableArray$1","_arrayWithHoles","_iterableToArrayLimit","_i","_arr","_n","_d","_s","_e","next","done","push","value","err","_nonIterableRest","_slicedToArray","register","exports","_createClass$1","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","Constructor","protoProps","staticProps","_classCallCheck$1","instance","TinyEmitter$1","TinyEmitter","emit","eventName","__listeners","_len","arguments","args","_key","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_iterator","_step","handler","apply","return","once","_this","off","on","filter","h","tinyEmitter","_createClass","_get","get","object","property","receiver","Function","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","_typeof","obj","_toConsumableArray","_classCallCheck","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_defineProperty","MESSAGE_RESULT","MESSAGE_EVENT","RESULT_ERROR","RESULT_SUCCESS","DEFAULT_HANDLER","isPromise","then","catch","RegisterPromise","fn","handlers","sendPostMessage","postMessage","bind","server","_TinyEmitter","WorkerRegister","TransferableResponse","transferable","emitLocally","_get2","_len2","_key2","concat","operation","run","messageId","payload","handlerName","onSuccess","result","sendResult","onError","e","message","stack","runFn","Error","sendEvent","success","addEventListener","_ref","data","registerWebworker","SlicingMode","NONE","I","J","K","X","Y","Z","ARRAY_TYPE","Float32Array","Math","hypot","y","sqrt","out","subtract","a","b","scale","scaleAndAdd","vec","stride","offset","count","arg","l","min","globals","buffer","dimensions","prevPoint","slicingMode","handlePaintRectangle","point1","point2","_point","x1","y1","z1","_point2","x2","y2","z2","xstart","max","xend","ystart","yend","zstart","zend","jStride","kStride","k","j","index","fill","handlePaintEllipse","_ref2","center","scale3","radius3","indexCenter","map","val","round","sliceAxis","yStride","zStride","_indexCenter","xmin","ymin","zmin","_indexCenter2","xmax","ymax","zmax","z","dz","dzSquared","ay","dy","dySquared","ax","handlePaint","_ref3","point","radius","delta","inc","step","thresh","pt","s","ii","handlePaintTriangles","_ref4","triangleList","triangleCount","floor","point0","subarray","v1","v2","step1","numStep1","abs","step2","numStep2","u","maxV","v","_ref5","bufferType","bufferSize","response","W"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/_virtual/rollup-plugin-worker-loader__module_Sources/Filters/General/PaintFilter/PaintFilter.worker.js"],"sourcesContent":["import { c as createInlineWorkerFactory } from '../../../../rollup-plugin-web-worker-loader__helper__browser__createInlineWorkerFactory.js';\n\nvar WorkerFactory = createInlineWorkerFactory(/* rollup-plugin-web-worker-loader */function () {\n(function () {\n  '__worker_loader_strict__';\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _toConsumableArray$1(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n    if (_i == null) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n\n    var _s, _e;\n\n    try {\n      for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n  }\n\n  var register = {exports: {}};\n\n  var _createClass$1 = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n  function _classCallCheck$1(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  var TinyEmitter$1 = function () {\n    function TinyEmitter() {\n      _classCallCheck$1(this, TinyEmitter);\n\n      Object.defineProperty(this, '__listeners', {\n        value: {},\n        enumerable: false,\n        writable: false\n      });\n    }\n\n    _createClass$1(TinyEmitter, [{\n      key: 'emit',\n      value: function emit(eventName) {\n        if (!this.__listeners[eventName]) return this;\n\n        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n          args[_key - 1] = arguments[_key];\n        }\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = this.__listeners[eventName][Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var handler = _step.value;\n\n            handler.apply(undefined, args);\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return this;\n      }\n    }, {\n      key: 'once',\n      value: function once(eventName, handler) {\n        var _this = this;\n\n        var once = function once() {\n          _this.off(eventName, once);\n          handler.apply(undefined, arguments);\n        };\n\n        return this.on(eventName, once);\n      }\n    }, {\n      key: 'on',\n      value: function on(eventName, handler) {\n        if (!this.__listeners[eventName]) this.__listeners[eventName] = [];\n\n        this.__listeners[eventName].push(handler);\n\n        return this;\n      }\n    }, {\n      key: 'off',\n      value: function off(eventName, handler) {\n        if (handler) this.__listeners[eventName] = this.__listeners[eventName].filter(function (h) {\n          return h !== handler;\n        });else this.__listeners[eventName] = [];\n\n        return this;\n      }\n    }]);\n\n    return TinyEmitter;\n  }();\n\n  var tinyEmitter = TinyEmitter$1;\n\n  var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\n  var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if (\"value\" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };\n\n  var _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n  function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n  function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n  var TinyEmitter = tinyEmitter;\n\n  var MESSAGE_RESULT = 0;\n  var MESSAGE_EVENT = 1;\n\n  var RESULT_ERROR = 0;\n  var RESULT_SUCCESS = 1;\n\n  var DEFAULT_HANDLER = 'main';\n\n  var isPromise = function isPromise(o) {\n    return (typeof o === 'undefined' ? 'undefined' : _typeof(o)) === 'object' && o !== null && typeof o.then === 'function' && typeof o.catch === 'function';\n  };\n\n  function RegisterPromise(fn) {\n    var handlers = _defineProperty({}, DEFAULT_HANDLER, fn);\n    var sendPostMessage = self.postMessage.bind(self);\n\n    var server = new (function (_TinyEmitter) {\n      _inherits(WorkerRegister, _TinyEmitter);\n\n      function WorkerRegister() {\n        _classCallCheck(this, WorkerRegister);\n\n        return _possibleConstructorReturn(this, (WorkerRegister.__proto__ || Object.getPrototypeOf(WorkerRegister)).apply(this, arguments));\n      }\n\n      _createClass(WorkerRegister, [{\n        key: 'emit',\n        value: function emit(eventName) {\n          for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n            args[_key - 1] = arguments[_key];\n          }\n\n          if (args.length == 1 && args[0] instanceof TransferableResponse) {\n            sendPostMessage({ eventName: eventName, args: args }, args[0].transferable);\n          } else {\n            sendPostMessage({ eventName: eventName, args: args });\n          }\n          return this;\n        }\n      }, {\n        key: 'emitLocally',\n        value: function emitLocally(eventName) {\n          var _get2;\n\n          for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            args[_key2 - 1] = arguments[_key2];\n          }\n\n          (_get2 = _get(WorkerRegister.prototype.__proto__ || Object.getPrototypeOf(WorkerRegister.prototype), 'emit', this)).call.apply(_get2, [this, eventName].concat(args));\n        }\n      }, {\n        key: 'operation',\n        value: function operation(name, handler) {\n          handlers[name] = handler;\n          return this;\n        }\n      }]);\n\n      return WorkerRegister;\n    }(TinyEmitter))();\n\n    var run = function run(messageId, payload, handlerName) {\n\n      var onSuccess = function onSuccess(result) {\n        if (result && result instanceof TransferableResponse) {\n          sendResult(messageId, RESULT_SUCCESS, result.payload, result.transferable);\n        } else {\n          sendResult(messageId, RESULT_SUCCESS, result);\n        }\n      };\n\n      var onError = function onError(e) {\n        sendResult(messageId, RESULT_ERROR, {\n          message: e.message,\n          stack: e.stack\n        });\n      };\n\n      try {\n        var result = runFn(messageId, payload, handlerName);\n        if (isPromise(result)) {\n          result.then(onSuccess).catch(onError);\n        } else {\n          onSuccess(result);\n        }\n      } catch (e) {\n        onError(e);\n      }\n    };\n\n    var runFn = function runFn(messageId, payload, handlerName) {\n      var handler = handlers[handlerName || DEFAULT_HANDLER];\n      if (!handler) throw new Error('Not found handler for this request');\n\n      return handler(payload, sendEvent.bind(null, messageId));\n    };\n\n    var sendResult = function sendResult(messageId, success, payload) {\n      var transferable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n      sendPostMessage([MESSAGE_RESULT, messageId, success, payload], transferable);\n    };\n\n    var sendEvent = function sendEvent(messageId, eventName, payload) {\n      if (!eventName) throw new Error('eventName is required');\n\n      if (typeof eventName !== 'string') throw new Error('eventName should be string');\n\n      sendPostMessage([MESSAGE_EVENT, messageId, eventName, payload]);\n    };\n\n    self.addEventListener('message', function (_ref) {\n      var data = _ref.data;\n\n      if (Array.isArray(data)) {\n        run.apply(undefined, _toConsumableArray(data));\n      } else if (data && data.eventName) {\n        server.emitLocally.apply(server, [data.eventName].concat(_toConsumableArray(data.args)));\n      }\n    });\n\n    return server;\n  }\n\n  var TransferableResponse = function TransferableResponse(payload, transferable) {\n    _classCallCheck(this, TransferableResponse);\n\n    this.payload = payload;\n    this.transferable = transferable;\n  };\n\n  register.exports = RegisterPromise;\n  register.exports.TransferableResponse = TransferableResponse;\n\n  var registerWebworker = register.exports;\n\n  var SlicingMode = {\n    NONE: -1,\n    I: 0,\n    J: 1,\n    K: 2,\n    X: 3,\n    Y: 4,\n    Z: 5\n  };\n\n  /**\n   * Common utilities\n   * @module glMatrix\n   */\n  var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\n  if (!Math.hypot) Math.hypot = function () {\n    var y = 0,\n        i = arguments.length;\n\n    while (i--) {\n      y += arguments[i] * arguments[i];\n    }\n\n    return Math.sqrt(y);\n  };\n\n  /**\n   * 3 Dimensional Vector\n   * @module vec3\n   */\n\n  /**\n   * Creates a new, empty vec3\n   *\n   * @returns {vec3} a new 3D vector\n   */\n\n  function create() {\n    var out = new ARRAY_TYPE(3);\n\n    if (ARRAY_TYPE != Float32Array) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n    }\n\n    return out;\n  }\n  /**\n   * Subtracts vector b from vector a\n   *\n   * @param {vec3} out the receiving vector\n   * @param {ReadonlyVec3} a the first operand\n   * @param {ReadonlyVec3} b the second operand\n   * @returns {vec3} out\n   */\n\n  function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n  }\n  /**\n   * Scales a vec3 by a scalar number\n   *\n   * @param {vec3} out the receiving vector\n   * @param {ReadonlyVec3} a the vector to scale\n   * @param {Number} b amount to scale the vector by\n   * @returns {vec3} out\n   */\n\n  function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n  }\n  /**\n   * Adds two vec3's after scaling the second operand by a scalar value\n   *\n   * @param {vec3} out the receiving vector\n   * @param {ReadonlyVec3} a the first operand\n   * @param {ReadonlyVec3} b the second operand\n   * @param {Number} scale the amount to scale b by before adding\n   * @returns {vec3} out\n   */\n\n  function scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    return out;\n  }\n  /**\n   * Perform some operation over an array of vec3s.\n   *\n   * @param {Array} a the array of vectors to iterate over\n   * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n   * @param {Number} offset Number of elements to skip at the beginning of the array\n   * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n   * @param {Function} fn Function to call for each vector in the array\n   * @param {Object} [arg] additional argument to pass to fn\n   * @returns {Array} a\n   * @function\n   */\n\n  (function () {\n    var vec = create();\n    return function (a, stride, offset, count, fn, arg) {\n      var i, l;\n\n      if (!stride) {\n        stride = 3;\n      }\n\n      if (!offset) {\n        offset = 0;\n      }\n\n      if (count) {\n        l = Math.min(count * stride + offset, a.length);\n      } else {\n        l = a.length;\n      }\n\n      for (i = offset; i < l; i += stride) {\n        vec[0] = a[i];\n        vec[1] = a[i + 1];\n        vec[2] = a[i + 2];\n        fn(vec, vec, arg);\n        a[i] = vec[0];\n        a[i + 1] = vec[1];\n        a[i + 2] = vec[2];\n      }\n\n      return a;\n    };\n  })();\n\n  var globals = {\n    // single-component labelmap\n    buffer: null,\n    dimensions: [0, 0, 0],\n    prevPoint: null,\n    slicingMode: null // 2D or 3D painting\n\n  }; // --------------------------------------------------------------------------\n\n  function handlePaintRectangle(_ref) {\n    var point1 = _ref.point1,\n        point2 = _ref.point2;\n\n    var _point = _slicedToArray(point1, 3),\n        x1 = _point[0],\n        y1 = _point[1],\n        z1 = _point[2];\n\n    var _point2 = _slicedToArray(point2, 3),\n        x2 = _point2[0],\n        y2 = _point2[1],\n        z2 = _point2[2];\n\n    var xstart = Math.max(Math.min(x1, x2), 0);\n    var xend = Math.min(Math.max(x1, x2), globals.dimensions[0] - 1);\n\n    if (xstart <= xend) {\n      var ystart = Math.max(Math.min(y1, y2), 0);\n      var yend = Math.min(Math.max(y1, y2), globals.dimensions[1] - 1);\n      var zstart = Math.max(Math.min(z1, z2), 0);\n      var zend = Math.min(Math.max(z1, z2), globals.dimensions[2] - 1);\n      var jStride = globals.dimensions[0];\n      var kStride = globals.dimensions[0] * globals.dimensions[1];\n\n      for (var k = zstart; k <= zend; k++) {\n        for (var j = ystart; j <= yend; j++) {\n          var index = j * jStride + k * kStride;\n          globals.buffer.fill(1, index + xstart, index + xend + 1);\n        }\n      }\n    }\n  } // --------------------------------------------------------------------------\n  // center and scale3 are in IJK coordinates\n\n\n  function handlePaintEllipse(_ref2) {\n    var center = _ref2.center,\n        scale3 = _ref2.scale3;\n\n    var radius3 = _toConsumableArray$1(scale3);\n\n    var indexCenter = center.map(function (val) {\n      return Math.round(val);\n    });\n    var sliceAxis = -1;\n\n    if (globals.slicingMode != null && globals.slicingMode !== SlicingMode.NONE) {\n      sliceAxis = globals.slicingMode % 3;\n    }\n\n    var yStride = globals.dimensions[0];\n    var zStride = globals.dimensions[0] * globals.dimensions[1];\n\n    var _indexCenter = _slicedToArray(indexCenter, 3),\n        xmin = _indexCenter[0],\n        ymin = _indexCenter[1],\n        zmin = _indexCenter[2];\n\n    var _indexCenter2 = _slicedToArray(indexCenter, 3),\n        xmax = _indexCenter2[0],\n        ymax = _indexCenter2[1],\n        zmax = _indexCenter2[2];\n\n    if (sliceAxis !== 2) {\n      zmin = Math.round(Math.max(indexCenter[2] - radius3[2], 0));\n      zmax = Math.round(Math.min(indexCenter[2] + radius3[2], globals.dimensions[2] - 1));\n    }\n\n    for (var z = zmin; z <= zmax; z++) {\n      var dz = 0;\n\n      if (sliceAxis !== 2) {\n        dz = (indexCenter[2] - z) / radius3[2];\n      }\n\n      var dzSquared = dz * dz;\n\n      if (dzSquared <= 1) {\n        var ay = radius3[1] * Math.sqrt(1 - dzSquared);\n\n        if (sliceAxis !== 1) {\n          ymin = Math.round(Math.max(indexCenter[1] - ay, 0));\n          ymax = Math.round(Math.min(indexCenter[1] + ay, globals.dimensions[1] - 1));\n        }\n\n        for (var y = ymin; y <= ymax; y++) {\n          var dy = 0;\n\n          if (sliceAxis !== 1) {\n            dy = (indexCenter[1] - y) / radius3[1];\n          }\n\n          var dySquared = dy * dy;\n\n          if (dySquared + dzSquared <= 1) {\n            if (sliceAxis !== 0) {\n              var ax = radius3[0] * Math.sqrt(1 - dySquared - dzSquared);\n              xmin = Math.round(Math.max(indexCenter[0] - ax, 0));\n              xmax = Math.round(Math.min(indexCenter[0] + ax, globals.dimensions[0] - 1));\n            }\n\n            if (xmin <= xmax) {\n              var index = y * yStride + z * zStride;\n              globals.buffer.fill(1, index + xmin, index + xmax + 1);\n            }\n          }\n        }\n      }\n    }\n  } // --------------------------------------------------------------------------\n\n\n  function handlePaint(_ref3) {\n    var point = _ref3.point,\n        radius = _ref3.radius;\n\n    if (!globals.prevPoint) {\n      globals.prevPoint = point;\n    } // DDA params\n\n\n    var delta = [point[0] - globals.prevPoint[0], point[1] - globals.prevPoint[1], point[2] - globals.prevPoint[2]];\n    var inc = [1, 1, 1];\n\n    for (var i = 0; i < 3; i++) {\n      if (delta[i] < 0) {\n        delta[i] = -delta[i];\n        inc[i] = -1;\n      }\n    }\n\n    var step = Math.max.apply(Math, delta); // DDA\n\n    var thresh = [step, step, step];\n\n    var pt = _toConsumableArray$1(globals.prevPoint);\n\n    for (var s = 0; s <= step; s++) {\n      handlePaintEllipse({\n        center: pt,\n        scale3: radius\n      });\n\n      for (var ii = 0; ii < 3; ii++) {\n        thresh[ii] -= delta[ii];\n\n        if (thresh[ii] <= 0) {\n          thresh[ii] += step;\n          pt[ii] += inc[ii];\n        }\n      }\n    }\n\n    globals.prevPoint = point;\n  } // --------------------------------------------------------------------------\n\n\n  function handlePaintTriangles(_ref4) {\n    var triangleList = _ref4.triangleList;\n    // debugger;\n    var triangleCount = Math.floor(triangleList.length / 9);\n\n    for (var i = 0; i < triangleCount; i++) {\n      var point0 = triangleList.subarray(9 * i + 0, 9 * i + 3);\n      var point1 = triangleList.subarray(9 * i + 3, 9 * i + 6);\n      var point2 = triangleList.subarray(9 * i + 6, 9 * i + 9);\n      var v1 = [0, 0, 0];\n      var v2 = [0, 0, 0];\n      subtract(v1, point1, point0);\n      subtract(v2, point2, point0);\n      var step1 = [0, 0, 0];\n      var numStep1 = 2 * Math.max(Math.abs(v1[0]), Math.abs(v1[1]), Math.abs(v1[2]));\n      scale(step1, v1, 1 / numStep1);\n      var step2 = [0, 0, 0];\n      var numStep2 = 2 * Math.max(Math.abs(v2[0]), Math.abs(v2[1]), Math.abs(v2[2]));\n      scale(step2, v2, 1 / numStep2);\n      var jStride = globals.dimensions[0];\n      var kStride = globals.dimensions[0] * globals.dimensions[1];\n\n      for (var u = 0; u <= numStep1 + 1; u++) {\n        var maxV = numStep2 - u * (numStep2 / numStep1);\n\n        for (var v = 0; v <= maxV + 1; v++) {\n          var point = _toConsumableArray$1(point0);\n\n          scaleAndAdd(point, point, step1, u);\n          scaleAndAdd(point, point, step2, v);\n          point[0] = Math.round(point[0]);\n          point[1] = Math.round(point[1]);\n          point[2] = Math.round(point[2]);\n\n          if (point[0] >= 0 && point[0] < globals.dimensions[0] && point[1] >= 0 && point[1] < globals.dimensions[1] && point[2] >= 0 && point[2] < globals.dimensions[2]) {\n            globals.buffer[point[0] + jStride * point[1] + kStride * point[2]] = 1;\n          }\n        }\n      }\n    }\n  } // --------------------------------------------------------------------------\n\n\n  registerWebworker().operation('start', function (_ref5) {\n    var bufferType = _ref5.bufferType,\n        dimensions = _ref5.dimensions,\n        slicingMode = _ref5.slicingMode;\n\n    if (!globals.buffer) {\n      var bufferSize = dimensions[0] * dimensions[1] * dimensions[2];\n      /* eslint-disable-next-line */\n\n      globals.buffer = new self[bufferType](bufferSize);\n      globals.dimensions = dimensions;\n      globals.prevPoint = null;\n      globals.slicingMode = slicingMode;\n    }\n  }).operation('paint', handlePaint).operation('paintRectangle', handlePaintRectangle).operation('paintEllipse', handlePaintEllipse).operation('paintTriangles', handlePaintTriangles).operation('end', function () {\n    var response = new registerWebworker.TransferableResponse(globals.buffer.buffer, [globals.buffer.buffer]);\n    globals.buffer = null;\n    return response;\n  });\n\n})();\n}, null);\n/* eslint-enable */\n\nexport { WorkerFactory as W };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}