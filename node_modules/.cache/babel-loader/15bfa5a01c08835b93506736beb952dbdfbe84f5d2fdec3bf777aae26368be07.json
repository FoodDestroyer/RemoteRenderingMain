{"ast":null,"code":"import macro from '../../macros.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUTypes from './Types.js';\nvar BufferUsage = vtkWebGPUBufferManager.BufferUsage;\nvar vtkErrorMacro = macro.vtkErrorMacro; // ----------------------------------------------------------------------------\n// vtkWebGPUStorageBuffer - similar to the UniformBuffer class\n// but YOU are responsible for layout issues and alignment.\n// The order you add entries is the order they will be layed out\n// in memory. But you must follow layout rules.\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// vtkWebGPUStorageBuffer methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUStorageBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUStorageBuffer');\n  publicAPI.addEntry = function (name, type) {\n    if (model._bufferEntryNames.has(name)) {\n      vtkErrorMacro(\"entry named \".concat(name, \" already exists\"));\n      return;\n    }\n    model._bufferEntryNames.set(name, model.bufferEntries.length);\n    var sizeInBytes = vtkWebGPUTypes.getByteStrideFromShaderFormat(type);\n    model.bufferEntries.push({\n      name: name,\n      type: type,\n      sizeInBytes: sizeInBytes,\n      offset: model.sizeInBytes,\n      nativeType: vtkWebGPUTypes.getNativeTypeFromShaderFormat(type)\n    });\n    model.sizeInBytes += sizeInBytes;\n  };\n  publicAPI.send = function (device) {\n    if (!model._buffer) {\n      var req = {\n        nativeArray: model.Float32Array,\n        usage: BufferUsage.Storage,\n        label: model.label\n      };\n      model._buffer = device.getBufferManager().getBuffer(req);\n      model.bindGroupTime.modified();\n      model._sendTime.modified();\n      return;\n    }\n    device.getHandle().queue.writeBuffer(model._buffer.getHandle(), 0, model.arrayBuffer, 0, model.sizeInBytes * model.numberOfInstances);\n    model._sendTime.modified();\n  };\n  publicAPI.createView = function (type) {\n    if (type in model === false) {\n      if (!model.arrayBuffer) {\n        model.arrayBuffer = new ArrayBuffer(model.sizeInBytes * model.numberOfInstances);\n      }\n      model[type] = macro.newTypedArray(type, model.arrayBuffer);\n    }\n  };\n  publicAPI.setValue = function (name, instance, val) {\n    var idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    view[(entry.offset + instance * model.sizeInBytes) / view.BYTES_PER_ELEMENT] = val;\n  };\n  publicAPI.setArray = function (name, instance, arr) {\n    var idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var ioffset = (entry.offset + instance * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n    for (var i = 0; i < arr.length; i++) {\n      view[ioffset + i] = arr[i];\n    }\n  };\n  publicAPI.setAllInstancesFromArray = function (name, arr) {\n    var idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var numComponents = arr.length / model.numberOfInstances;\n    for (var inst = 0; inst < model.numberOfInstances; inst++) {\n      var ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n      for (var i = 0; i < numComponents; i++) {\n        view[ioffset + i] = arr[inst * numComponents + i];\n      }\n    }\n  };\n  publicAPI.setAllInstancesFromArrayColorToFloat = function (name, arr) {\n    var idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var numComponents = arr.length / model.numberOfInstances;\n    for (var inst = 0; inst < model.numberOfInstances; inst++) {\n      var ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n      for (var i = 0; i < numComponents; i++) {\n        view[ioffset + i] = arr[inst * numComponents + i] / 255.0;\n      }\n    }\n  };\n  publicAPI.setAllInstancesFromArray3x3To4x4 = function (name, arr) {\n    var idx = model._bufferEntryNames.get(name);\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var numComponents = 9;\n    for (var inst = 0; inst < model.numberOfInstances; inst++) {\n      var ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n      for (var j = 0; j < 3; j++) {\n        for (var i = 0; i < 3; i++) {\n          view[ioffset + j * 4 + i] = arr[inst * numComponents + j * 3 + i];\n        }\n      }\n    }\n  };\n  publicAPI.getSendTime = function () {\n    return model._sendTime.getMTime();\n  };\n  publicAPI.getShaderCode = function (binding, group) {\n    var lines = [\"struct \".concat(model.label, \"StructEntry\\n{\")];\n    for (var i = 0; i < model.bufferEntries.length; i++) {\n      var entry = model.bufferEntries[i];\n      lines.push(\"  \".concat(entry.name, \": \").concat(entry.type, \",\"));\n    }\n    lines.push(\"\\n};\\nstruct \".concat(model.label, \"Struct\\n{\\n  values: array<\").concat(model.label, \"StructEntry>,\\n};\\n@binding(\").concat(binding, \") @group(\").concat(group, \") var<storage, read> \").concat(model.label, \": \").concat(model.label, \"Struct;\\n\"));\n    return lines.join('\\n');\n  };\n  publicAPI.getBindGroupEntry = function () {\n    var foo = {\n      resource: {\n        buffer: model._buffer.getHandle()\n      }\n    };\n    return foo;\n  };\n  publicAPI.clearData = function () {\n    model.numberOfInstances = 0;\n    model.sizeInBytes = 0;\n    model.bufferEntries = [];\n    model._bufferEntryNames = new Map();\n    model._buffer = null;\n    delete model.arrayBuffer;\n    delete model.Float32Array;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nvar DEFAULT_VALUES = {\n  bufferEntries: null,\n  bufferEntryNames: null,\n  sizeInBytes: 0,\n  label: null,\n  numberOfInstances: 1\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model); // Internal objects\n\n  model._bufferEntryNames = new Map();\n  model.bufferEntries = [];\n  model._sendTime = {};\n  macro.obj(model._sendTime, {\n    mtime: 0\n  });\n  model.bindGroupTime = {};\n  macro.obj(model.bindGroupTime, {\n    mtime: 0\n  }); // default SSBO desc\n\n  model.bindGroupLayoutEntry = model.bindGroupLayoutEntry || {\n    buffer: {\n      type: 'read-only-storage'\n    }\n  };\n  macro.get(publicAPI, model, ['bindGroupTime']);\n  macro.setGet(publicAPI, model, ['device', 'bindGroupLayoutEntry', 'label', 'numberOfInstances', 'sizeInBytes']); // Object methods\n\n  vtkWebGPUStorageBuffer(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkWebGPUStorageBuffer'); // ----------------------------------------------------------------------------\n\nvar vtkWebGPUStorageBuffer$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\nexport { vtkWebGPUStorageBuffer$1 as default, extend, newInstance };","map":{"version":3,"names":["macro","vtkWebGPUBufferManager","vtkWebGPUTypes","BufferUsage","vtkErrorMacro","vtkWebGPUStorageBuffer","publicAPI","model","classHierarchy","push","addEntry","name","type","_bufferEntryNames","has","concat","set","bufferEntries","length","sizeInBytes","getByteStrideFromShaderFormat","offset","nativeType","getNativeTypeFromShaderFormat","send","device","_buffer","req","nativeArray","Float32Array","usage","Storage","label","getBufferManager","getBuffer","bindGroupTime","modified","_sendTime","getHandle","queue","writeBuffer","arrayBuffer","numberOfInstances","createView","ArrayBuffer","newTypedArray","setValue","instance","val","idx","get","undefined","entry","view","BYTES_PER_ELEMENT","setArray","arr","ioffset","i","setAllInstancesFromArray","numComponents","inst","setAllInstancesFromArrayColorToFloat","setAllInstancesFromArray3x3To4x4","j","getSendTime","getMTime","getShaderCode","binding","group","lines","join","getBindGroupEntry","foo","resource","buffer","clearData","Map","DEFAULT_VALUES","bufferEntryNames","extend","initialValues","arguments","Object","assign","obj","mtime","bindGroupLayoutEntry","setGet","newInstance","vtkWebGPUStorageBuffer$1","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/Rendering/WebGPU/StorageBuffer.js"],"sourcesContent":["import macro from '../../macros.js';\nimport vtkWebGPUBufferManager from './BufferManager.js';\nimport vtkWebGPUTypes from './Types.js';\n\nvar BufferUsage = vtkWebGPUBufferManager.BufferUsage;\nvar vtkErrorMacro = macro.vtkErrorMacro; // ----------------------------------------------------------------------------\n// vtkWebGPUStorageBuffer - similar to the UniformBuffer class\n// but YOU are responsible for layout issues and alignment.\n// The order you add entries is the order they will be layed out\n// in memory. But you must follow layout rules.\n// ----------------------------------------------------------------------------\n// ----------------------------------------------------------------------------\n// vtkWebGPUStorageBuffer methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUStorageBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUStorageBuffer');\n\n  publicAPI.addEntry = function (name, type) {\n    if (model._bufferEntryNames.has(name)) {\n      vtkErrorMacro(\"entry named \".concat(name, \" already exists\"));\n      return;\n    }\n\n    model._bufferEntryNames.set(name, model.bufferEntries.length);\n\n    var sizeInBytes = vtkWebGPUTypes.getByteStrideFromShaderFormat(type);\n    model.bufferEntries.push({\n      name: name,\n      type: type,\n      sizeInBytes: sizeInBytes,\n      offset: model.sizeInBytes,\n      nativeType: vtkWebGPUTypes.getNativeTypeFromShaderFormat(type)\n    });\n    model.sizeInBytes += sizeInBytes;\n  };\n\n  publicAPI.send = function (device) {\n    if (!model._buffer) {\n      var req = {\n        nativeArray: model.Float32Array,\n        usage: BufferUsage.Storage,\n        label: model.label\n      };\n      model._buffer = device.getBufferManager().getBuffer(req);\n      model.bindGroupTime.modified();\n\n      model._sendTime.modified();\n\n      return;\n    }\n\n    device.getHandle().queue.writeBuffer(model._buffer.getHandle(), 0, model.arrayBuffer, 0, model.sizeInBytes * model.numberOfInstances);\n\n    model._sendTime.modified();\n  };\n\n  publicAPI.createView = function (type) {\n    if (type in model === false) {\n      if (!model.arrayBuffer) {\n        model.arrayBuffer = new ArrayBuffer(model.sizeInBytes * model.numberOfInstances);\n      }\n\n      model[type] = macro.newTypedArray(type, model.arrayBuffer);\n    }\n  };\n\n  publicAPI.setValue = function (name, instance, val) {\n    var idx = model._bufferEntryNames.get(name);\n\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    view[(entry.offset + instance * model.sizeInBytes) / view.BYTES_PER_ELEMENT] = val;\n  };\n\n  publicAPI.setArray = function (name, instance, arr) {\n    var idx = model._bufferEntryNames.get(name);\n\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var ioffset = (entry.offset + instance * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n\n    for (var i = 0; i < arr.length; i++) {\n      view[ioffset + i] = arr[i];\n    }\n  };\n\n  publicAPI.setAllInstancesFromArray = function (name, arr) {\n    var idx = model._bufferEntryNames.get(name);\n\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var numComponents = arr.length / model.numberOfInstances;\n\n    for (var inst = 0; inst < model.numberOfInstances; inst++) {\n      var ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n\n      for (var i = 0; i < numComponents; i++) {\n        view[ioffset + i] = arr[inst * numComponents + i];\n      }\n    }\n  };\n\n  publicAPI.setAllInstancesFromArrayColorToFloat = function (name, arr) {\n    var idx = model._bufferEntryNames.get(name);\n\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var numComponents = arr.length / model.numberOfInstances;\n\n    for (var inst = 0; inst < model.numberOfInstances; inst++) {\n      var ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n\n      for (var i = 0; i < numComponents; i++) {\n        view[ioffset + i] = arr[inst * numComponents + i] / 255.0;\n      }\n    }\n  };\n\n  publicAPI.setAllInstancesFromArray3x3To4x4 = function (name, arr) {\n    var idx = model._bufferEntryNames.get(name);\n\n    if (idx === undefined) {\n      vtkErrorMacro(\"entry named \".concat(name, \" not found in UBO\"));\n      return;\n    }\n\n    var entry = model.bufferEntries[idx];\n    publicAPI.createView(entry.nativeType);\n    var view = model[entry.nativeType];\n    var numComponents = 9;\n\n    for (var inst = 0; inst < model.numberOfInstances; inst++) {\n      var ioffset = (entry.offset + inst * model.sizeInBytes) / view.BYTES_PER_ELEMENT;\n\n      for (var j = 0; j < 3; j++) {\n        for (var i = 0; i < 3; i++) {\n          view[ioffset + j * 4 + i] = arr[inst * numComponents + j * 3 + i];\n        }\n      }\n    }\n  };\n\n  publicAPI.getSendTime = function () {\n    return model._sendTime.getMTime();\n  };\n\n  publicAPI.getShaderCode = function (binding, group) {\n    var lines = [\"struct \".concat(model.label, \"StructEntry\\n{\")];\n\n    for (var i = 0; i < model.bufferEntries.length; i++) {\n      var entry = model.bufferEntries[i];\n      lines.push(\"  \".concat(entry.name, \": \").concat(entry.type, \",\"));\n    }\n\n    lines.push(\"\\n};\\nstruct \".concat(model.label, \"Struct\\n{\\n  values: array<\").concat(model.label, \"StructEntry>,\\n};\\n@binding(\").concat(binding, \") @group(\").concat(group, \") var<storage, read> \").concat(model.label, \": \").concat(model.label, \"Struct;\\n\"));\n    return lines.join('\\n');\n  };\n\n  publicAPI.getBindGroupEntry = function () {\n    var foo = {\n      resource: {\n        buffer: model._buffer.getHandle()\n      }\n    };\n    return foo;\n  };\n\n  publicAPI.clearData = function () {\n    model.numberOfInstances = 0;\n    model.sizeInBytes = 0;\n    model.bufferEntries = [];\n    model._bufferEntryNames = new Map();\n    model._buffer = null;\n    delete model.arrayBuffer;\n    delete model.Float32Array;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  bufferEntries: null,\n  bufferEntryNames: null,\n  sizeInBytes: 0,\n  label: null,\n  numberOfInstances: 1\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  macro.obj(publicAPI, model); // Internal objects\n\n  model._bufferEntryNames = new Map();\n  model.bufferEntries = [];\n  model._sendTime = {};\n  macro.obj(model._sendTime, {\n    mtime: 0\n  });\n  model.bindGroupTime = {};\n  macro.obj(model.bindGroupTime, {\n    mtime: 0\n  }); // default SSBO desc\n\n  model.bindGroupLayoutEntry = model.bindGroupLayoutEntry || {\n    buffer: {\n      type: 'read-only-storage'\n    }\n  };\n  macro.get(publicAPI, model, ['bindGroupTime']);\n  macro.setGet(publicAPI, model, ['device', 'bindGroupLayoutEntry', 'label', 'numberOfInstances', 'sizeInBytes']); // Object methods\n\n  vtkWebGPUStorageBuffer(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkWebGPUStorageBuffer'); // ----------------------------------------------------------------------------\n\nvar vtkWebGPUStorageBuffer$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkWebGPUStorageBuffer$1 as default, extend, newInstance };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}