{"ast":null,"code":"import { mat4, vec3 } from 'gl-matrix';\nimport macro from '../../macros.js';\nimport vtkMapper from './Mapper.js';\n\n// vtkPixelSpaceCallbackMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPixelSpaceCallbackMapper(publicAPI, model) {\n  model.classHierarchy.push('vtkPixelSpaceCallbackMapper');\n  if (!model.callback) {\n    model.callback = function () {};\n  }\n  publicAPI.invokeCallback = function (dataset, camera, aspect, windowSize, depthValues) {\n    if (!model.callback) {\n      return;\n    }\n    var matrix = camera.getCompositeProjectionMatrix(aspect, -1, 1);\n    mat4.transpose(matrix, matrix);\n    var dataPoints = dataset.getPoints();\n    var result = new Float64Array(3);\n    var width = windowSize.usize;\n    var height = windowSize.vsize;\n    var hw = width / 2;\n    var hh = height / 2;\n    var coords = [];\n    for (var pidx = 0; pidx < dataPoints.getNumberOfPoints(); pidx += 1) {\n      var point = dataPoints.getPoint(pidx);\n      vec3.transformMat4(result, point, matrix);\n      var coord = [result[0] * hw + hw, result[1] * hh + hh, result[2], 0];\n      if (depthValues) {\n        var linIdx = Math.floor(coord[1]) * width + Math.floor(coord[0]);\n        var idx = linIdx * 4;\n        var r = depthValues[idx] / 255;\n        var g = depthValues[idx + 1] / 255;\n        var z = (r * 256 + g) / 257;\n        coord[3] = z * 2 - 1;\n      }\n      coords.push(coord);\n    }\n    model.callback(coords, camera, aspect, depthValues, [width, height]);\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nvar DEFAULT_VALUES = {\n  callback: null,\n  useZValues: false\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Inheritance\n\n  vtkMapper.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['callback', 'useZValues']); // Object methods\n\n  vtkPixelSpaceCallbackMapper(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkPixelSpaceCallbackMapper'); // ----------------------------------------------------------------------------\n\nvar vtkPixelSpaceCallbackMapper$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\nexport { vtkPixelSpaceCallbackMapper$1 as default, extend, newInstance };","map":{"version":3,"names":["mat4","vec3","macro","vtkMapper","vtkPixelSpaceCallbackMapper","publicAPI","model","classHierarchy","push","callback","invokeCallback","dataset","camera","aspect","windowSize","depthValues","matrix","getCompositeProjectionMatrix","transpose","dataPoints","getPoints","result","Float64Array","width","usize","height","vsize","hw","hh","coords","pidx","getNumberOfPoints","point","getPoint","transformMat4","coord","linIdx","Math","floor","idx","r","g","z","DEFAULT_VALUES","useZValues","extend","initialValues","arguments","length","undefined","Object","assign","setGet","newInstance","vtkPixelSpaceCallbackMapper$1","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/Rendering/Core/PixelSpaceCallbackMapper.js"],"sourcesContent":["import { mat4, vec3 } from 'gl-matrix';\nimport macro from '../../macros.js';\nimport vtkMapper from './Mapper.js';\n\n// vtkPixelSpaceCallbackMapper methods\n// ----------------------------------------------------------------------------\n\nfunction vtkPixelSpaceCallbackMapper(publicAPI, model) {\n  model.classHierarchy.push('vtkPixelSpaceCallbackMapper');\n\n  if (!model.callback) {\n    model.callback = function () {};\n  }\n\n  publicAPI.invokeCallback = function (dataset, camera, aspect, windowSize, depthValues) {\n    if (!model.callback) {\n      return;\n    }\n\n    var matrix = camera.getCompositeProjectionMatrix(aspect, -1, 1);\n    mat4.transpose(matrix, matrix);\n    var dataPoints = dataset.getPoints();\n    var result = new Float64Array(3);\n    var width = windowSize.usize;\n    var height = windowSize.vsize;\n    var hw = width / 2;\n    var hh = height / 2;\n    var coords = [];\n\n    for (var pidx = 0; pidx < dataPoints.getNumberOfPoints(); pidx += 1) {\n      var point = dataPoints.getPoint(pidx);\n      vec3.transformMat4(result, point, matrix);\n      var coord = [result[0] * hw + hw, result[1] * hh + hh, result[2], 0];\n\n      if (depthValues) {\n        var linIdx = Math.floor(coord[1]) * width + Math.floor(coord[0]);\n        var idx = linIdx * 4;\n        var r = depthValues[idx] / 255;\n        var g = depthValues[idx + 1] / 255;\n        var z = (r * 256 + g) / 257;\n        coord[3] = z * 2 - 1;\n      }\n\n      coords.push(coord);\n    }\n\n    model.callback(coords, camera, aspect, depthValues, [width, height]);\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  callback: null,\n  useZValues: false\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Inheritance\n\n  vtkMapper.extend(publicAPI, model, initialValues);\n  macro.setGet(publicAPI, model, ['callback', 'useZValues']); // Object methods\n\n  vtkPixelSpaceCallbackMapper(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkPixelSpaceCallbackMapper'); // ----------------------------------------------------------------------------\n\nvar vtkPixelSpaceCallbackMapper$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkPixelSpaceCallbackMapper$1 as default, extend, newInstance };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}