{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport macro from '../../macros.js';\nimport Constants from './BufferManager/Constants.js';\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nvar forwarded = ['getMappedRange', 'mapAsync', 'unmap'];\nfunction bufferSubData(device, destBuffer, destOffset, srcArrayBuffer) {\n  var byteCount = srcArrayBuffer.byteLength;\n  var srcBuffer = device.createBuffer({\n    size: byteCount,\n    /* eslint-disable no-undef */\n    usage: GPUBufferUsage.COPY_SRC,\n    /* eslint-enable no-undef */\n    mappedAtCreation: true\n  });\n  var arrayBuffer = srcBuffer.getMappedRange(0, byteCount);\n  new Uint8Array(arrayBuffer).set(new Uint8Array(srcArrayBuffer)); // memcpy\n\n  srcBuffer.unmap();\n  var encoder = device.createCommandEncoder();\n  encoder.copyBufferToBuffer(srcBuffer, 0, destBuffer, destOffset, byteCount);\n  var commandBuffer = encoder.finish();\n  var queue = device.queue;\n  queue.submit([commandBuffer]);\n  srcBuffer.destroy();\n} // ----------------------------------------------------------------------------\n// vtkWebGPUBufferManager methods\n// ----------------------------------------------------------------------------\n\nfunction vtkWebGPUBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUBuffer');\n  publicAPI.create = function (sizeInBytes, usage) {\n    model.handle = model.device.getHandle().createBuffer({\n      size: sizeInBytes,\n      usage: usage,\n      label: model.label\n    });\n    model.sizeInBytes = sizeInBytes;\n    model.usage = usage;\n  };\n  publicAPI.write = function (data) {\n    bufferSubData(model.device.getHandle(), model.handle, 0, data.buffer);\n  };\n  publicAPI.createAndWrite = function (data, usage) {\n    model.handle = model.device.getHandle().createBuffer({\n      size: data.byteLength,\n      usage: usage,\n      mappedAtCreation: true,\n      label: model.label\n    });\n    model.sizeInBytes = data.byteLength;\n    model.usage = usage;\n    new Uint8Array(model.handle.getMappedRange()).set(new Uint8Array(data.buffer)); // memcpy\n\n    model.handle.unmap();\n  }; // simple forwarders\n\n  var _loop = function _loop(i) {\n    publicAPI[forwarded[i]] = function () {\n      var _model$handle;\n      return (_model$handle = model.handle)[forwarded[i]].apply(_model$handle, arguments);\n    };\n  };\n  for (var i = 0; i < forwarded.length; i++) {\n    _loop(i);\n  }\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nvar DEFAULT_VALUES = {\n  device: null,\n  handle: null,\n  sizeInBytes: 0,\n  strideInBytes: 0,\n  arrayInformation: null,\n  usage: null,\n  label: null,\n  sourceTime: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Object methods\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['handle', 'sizeInBytes', 'usage']);\n  macro.setGet(publicAPI, model, ['strideInBytes', 'device', 'arrayInformation', 'label', 'sourceTime']);\n  vtkWebGPUBuffer(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend); // ----------------------------------------------------------------------------\n\nvar vtkWebGPUBuffer$1 = _objectSpread({\n  newInstance: newInstance,\n  extend: extend\n}, Constants);\nexport { vtkWebGPUBuffer$1 as default, extend, newInstance };","map":{"version":3,"names":["_defineProperty","macro","Constants","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","forwarded","bufferSubData","device","destBuffer","destOffset","srcArrayBuffer","byteCount","byteLength","srcBuffer","createBuffer","size","usage","GPUBufferUsage","COPY_SRC","mappedAtCreation","arrayBuffer","getMappedRange","Uint8Array","set","unmap","encoder","createCommandEncoder","copyBufferToBuffer","commandBuffer","finish","queue","submit","destroy","vtkWebGPUBuffer","publicAPI","model","classHierarchy","create","sizeInBytes","handle","getHandle","label","write","data","buffer","createAndWrite","_loop","_model$handle","DEFAULT_VALUES","strideInBytes","arrayInformation","sourceTime","extend","initialValues","undefined","assign","obj","get","setGet","newInstance","vtkWebGPUBuffer$1","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/Rendering/WebGPU/Buffer.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport macro from '../../macros.js';\nimport Constants from './BufferManager/Constants.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar forwarded = ['getMappedRange', 'mapAsync', 'unmap'];\n\nfunction bufferSubData(device, destBuffer, destOffset, srcArrayBuffer) {\n  var byteCount = srcArrayBuffer.byteLength;\n  var srcBuffer = device.createBuffer({\n    size: byteCount,\n\n    /* eslint-disable no-undef */\n    usage: GPUBufferUsage.COPY_SRC,\n\n    /* eslint-enable no-undef */\n    mappedAtCreation: true\n  });\n  var arrayBuffer = srcBuffer.getMappedRange(0, byteCount);\n  new Uint8Array(arrayBuffer).set(new Uint8Array(srcArrayBuffer)); // memcpy\n\n  srcBuffer.unmap();\n  var encoder = device.createCommandEncoder();\n  encoder.copyBufferToBuffer(srcBuffer, 0, destBuffer, destOffset, byteCount);\n  var commandBuffer = encoder.finish();\n  var queue = device.queue;\n  queue.submit([commandBuffer]);\n  srcBuffer.destroy();\n} // ----------------------------------------------------------------------------\n// vtkWebGPUBufferManager methods\n// ----------------------------------------------------------------------------\n\n\nfunction vtkWebGPUBuffer(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUBuffer');\n\n  publicAPI.create = function (sizeInBytes, usage) {\n    model.handle = model.device.getHandle().createBuffer({\n      size: sizeInBytes,\n      usage: usage,\n      label: model.label\n    });\n    model.sizeInBytes = sizeInBytes;\n    model.usage = usage;\n  };\n\n  publicAPI.write = function (data) {\n    bufferSubData(model.device.getHandle(), model.handle, 0, data.buffer);\n  };\n\n  publicAPI.createAndWrite = function (data, usage) {\n    model.handle = model.device.getHandle().createBuffer({\n      size: data.byteLength,\n      usage: usage,\n      mappedAtCreation: true,\n      label: model.label\n    });\n    model.sizeInBytes = data.byteLength;\n    model.usage = usage;\n    new Uint8Array(model.handle.getMappedRange()).set(new Uint8Array(data.buffer)); // memcpy\n\n    model.handle.unmap();\n  }; // simple forwarders\n\n\n  var _loop = function _loop(i) {\n    publicAPI[forwarded[i]] = function () {\n      var _model$handle;\n\n      return (_model$handle = model.handle)[forwarded[i]].apply(_model$handle, arguments);\n    };\n  };\n\n  for (var i = 0; i < forwarded.length; i++) {\n    _loop(i);\n  }\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  device: null,\n  handle: null,\n  sizeInBytes: 0,\n  strideInBytes: 0,\n  arrayInformation: null,\n  usage: null,\n  label: null,\n  sourceTime: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Object methods\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['handle', 'sizeInBytes', 'usage']);\n  macro.setGet(publicAPI, model, ['strideInBytes', 'device', 'arrayInformation', 'label', 'sourceTime']);\n  vtkWebGPUBuffer(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend); // ----------------------------------------------------------------------------\n\nvar vtkWebGPUBuffer$1 = _objectSpread({\n  newInstance: newInstance,\n  extend: extend\n}, Constants);\n\nexport { vtkWebGPUBuffer$1 as default, extend, newInstance };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}