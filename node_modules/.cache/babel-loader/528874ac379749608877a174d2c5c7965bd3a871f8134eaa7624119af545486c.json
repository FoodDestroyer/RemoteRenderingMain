{"ast":null,"code":"import macro from '../../macros.js';\nimport vtkWebGPURenderEncoder from './RenderEncoder.js';\nimport vtkWebGPUTexture from './Texture.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\nfunction vtkWebGPUOpaquePass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUOpaquePass'); // this pass implements a forward rendering pipeline\n  // if both volumes and opaque geometry are present\n  // it will mix the two together by capturing a zbuffer\n  // first\n\n  publicAPI.traverse = function (renNode, viewNode) {\n    if (model.deleted) {\n      return;\n    } // we just render our delegates in order\n\n    model._currentParent = viewNode;\n    var device = viewNode.getDevice();\n    if (!model.renderEncoder) {\n      publicAPI.createRenderEncoder();\n      model.colorTexture = vtkWebGPUTexture.newInstance({\n        label: 'opaquePassColor'\n      });\n      model.colorTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: 'rgba16float',\n        /* eslint-disable no-undef */\n\n        /* eslint-disable no-bitwise */\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC\n      });\n      var ctView = model.colorTexture.createView('opaquePassColorTexture');\n      model.renderEncoder.setColorTextureView(0, ctView);\n      model.depthFormat = 'depth32float';\n      model.depthTexture = vtkWebGPUTexture.newInstance({\n        label: 'opaquePassDepth'\n      });\n      model.depthTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: model.depthFormat,\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC\n      });\n      var dView = model.depthTexture.createView('opaquePassDepthTexture');\n      model.renderEncoder.setDepthTextureView(dView);\n    } else {\n      model.colorTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n      model.depthTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n    }\n    model.renderEncoder.attachTextureViews();\n    publicAPI.setCurrentOperation('opaquePass');\n    renNode.setRenderEncoder(model.renderEncoder);\n    renNode.traverse(publicAPI);\n  };\n  publicAPI.getColorTextureView = function () {\n    return model.renderEncoder.getColorTextureViews()[0];\n  };\n  publicAPI.getDepthTextureView = function () {\n    return model.renderEncoder.getDepthTextureView();\n  };\n  publicAPI.createRenderEncoder = function () {\n    model.renderEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'OpaquePass'\n    }); // default settings are fine for this\n\n    model.renderEncoder.setPipelineHash('op');\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nvar DEFAULT_VALUES = {\n  renderEncoder: null,\n  colorTexture: null,\n  depthTexture: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['colorTexture', 'depthTexture']); // Object methods\n\n  vtkWebGPUOpaquePass(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkWebGPUOpaquePass'); // ----------------------------------------------------------------------------\n\nvar vtkWebGPUOpaquePass$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\nexport { vtkWebGPUOpaquePass$1 as default, extend, newInstance };","map":{"version":3,"names":["macro","vtkWebGPURenderEncoder","vtkWebGPUTexture","vtkRenderPass","vtkWebGPUOpaquePass","publicAPI","model","classHierarchy","push","traverse","renNode","viewNode","deleted","_currentParent","device","getDevice","renderEncoder","createRenderEncoder","colorTexture","newInstance","label","create","width","getCanvas","height","format","usage","GPUTextureUsage","RENDER_ATTACHMENT","TEXTURE_BINDING","COPY_SRC","ctView","createView","setColorTextureView","depthFormat","depthTexture","dView","setDepthTextureView","resize","attachTextureViews","setCurrentOperation","setRenderEncoder","getColorTextureView","getColorTextureViews","getDepthTextureView","setPipelineHash","DEFAULT_VALUES","extend","initialValues","arguments","length","undefined","Object","assign","get","vtkWebGPUOpaquePass$1","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/Rendering/WebGPU/OpaquePass.js"],"sourcesContent":["import macro from '../../macros.js';\nimport vtkWebGPURenderEncoder from './RenderEncoder.js';\nimport vtkWebGPUTexture from './Texture.js';\nimport vtkRenderPass from '../SceneGraph/RenderPass.js';\n\nfunction vtkWebGPUOpaquePass(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkWebGPUOpaquePass'); // this pass implements a forward rendering pipeline\n  // if both volumes and opaque geometry are present\n  // it will mix the two together by capturing a zbuffer\n  // first\n\n  publicAPI.traverse = function (renNode, viewNode) {\n    if (model.deleted) {\n      return;\n    } // we just render our delegates in order\n\n\n    model._currentParent = viewNode;\n    var device = viewNode.getDevice();\n\n    if (!model.renderEncoder) {\n      publicAPI.createRenderEncoder();\n      model.colorTexture = vtkWebGPUTexture.newInstance({\n        label: 'opaquePassColor'\n      });\n      model.colorTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: 'rgba16float',\n\n        /* eslint-disable no-undef */\n\n        /* eslint-disable no-bitwise */\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC\n      });\n      var ctView = model.colorTexture.createView('opaquePassColorTexture');\n      model.renderEncoder.setColorTextureView(0, ctView);\n      model.depthFormat = 'depth32float';\n      model.depthTexture = vtkWebGPUTexture.newInstance({\n        label: 'opaquePassDepth'\n      });\n      model.depthTexture.create(device, {\n        width: viewNode.getCanvas().width,\n        height: viewNode.getCanvas().height,\n        format: model.depthFormat,\n        usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC\n      });\n      var dView = model.depthTexture.createView('opaquePassDepthTexture');\n      model.renderEncoder.setDepthTextureView(dView);\n    } else {\n      model.colorTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n      model.depthTexture.resize(viewNode.getCanvas().width, viewNode.getCanvas().height);\n    }\n\n    model.renderEncoder.attachTextureViews();\n    publicAPI.setCurrentOperation('opaquePass');\n    renNode.setRenderEncoder(model.renderEncoder);\n    renNode.traverse(publicAPI);\n  };\n\n  publicAPI.getColorTextureView = function () {\n    return model.renderEncoder.getColorTextureViews()[0];\n  };\n\n  publicAPI.getDepthTextureView = function () {\n    return model.renderEncoder.getDepthTextureView();\n  };\n\n  publicAPI.createRenderEncoder = function () {\n    model.renderEncoder = vtkWebGPURenderEncoder.newInstance({\n      label: 'OpaquePass'\n    }); // default settings are fine for this\n\n    model.renderEncoder.setPipelineHash('op');\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  renderEncoder: null,\n  colorTexture: null,\n  depthTexture: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Build VTK API\n\n  vtkRenderPass.extend(publicAPI, model, initialValues);\n  macro.get(publicAPI, model, ['colorTexture', 'depthTexture']); // Object methods\n\n  vtkWebGPUOpaquePass(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkWebGPUOpaquePass'); // ----------------------------------------------------------------------------\n\nvar vtkWebGPUOpaquePass$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkWebGPUOpaquePass$1 as default, extend, newInstance };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}