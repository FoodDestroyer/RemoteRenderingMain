{"ast":null,"code":"import { vec3, mat4 } from 'gl-matrix';\nimport macro from '../../macros.js';\nimport vtkCompositeCameraManipulator from './CompositeCameraManipulator.js';\nimport vtkCompositeMouseManipulator from './CompositeMouseManipulator.js';\nimport { r as radiansFromDegrees, j as cross } from '../../Common/Core/Math/index.js';\n\n// vtkMouseCameraAxisRotateManipulator methods\n// ----------------------------------------------------------------------------\n\nfunction vtkMouseCameraAxisRotateManipulator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkMouseCameraAxisRotateManipulator');\n  var negCameraDir = new Float64Array(3);\n  var newCamPos = new Float64Array(3);\n  var newFp = new Float64Array(3);\n  var newViewUp = new Float64Array(3);\n  var trans = new Float64Array(16);\n  var rotation = new Float64Array(16);\n  var v2 = new Float64Array(3);\n  var centerNeg = new Float64Array(3);\n  var negRotationAxis = new Float64Array(3);\n  publicAPI.onButtonDown = function (interactor, renderer, position) {\n    model.previousPosition = position;\n  };\n  publicAPI.onMouseMove = function (interactor, renderer, position) {\n    if (!position) {\n      return;\n    }\n    var camera = renderer.getActiveCamera();\n    var cameraPos = camera.getPosition();\n    var cameraFp = camera.getFocalPoint();\n    var cameraViewUp = camera.getViewUp();\n    var cameraDirection = camera.getDirectionOfProjection();\n    vec3.negate(negCameraDir, cameraDirection);\n    mat4.identity(trans);\n    mat4.identity(rotation);\n    var center = model.center,\n      rotationFactor = model.rotationFactor,\n      rotationAxis = model.rotationAxis;\n    vec3.negate(negRotationAxis, rotationAxis);\n    var dx = model.previousPosition.x - position.x;\n    var dy = model.previousPosition.y - position.y;\n    var size = interactor.getView().getViewportSize(renderer); // Azimuth\n\n    var azimuthDelta = radiansFromDegrees(360.0 * dx / size[0] * rotationFactor);\n    mat4.rotate(rotation, rotation, azimuthDelta, rotationAxis); // Elevation\n\n    cross(cameraDirection, cameraViewUp, v2);\n    var elevationDelta = radiansFromDegrees(-360.0 * dy / size[1] * rotationFactor); // angle of camera to rotation axis on the positive or negative half,\n    // relative to the origin.\n\n    var angleToPosHalf = Math.acos(vec3.dot(negCameraDir, rotationAxis));\n    var angleToNegHalf = Math.acos(vec3.dot(negCameraDir, negRotationAxis)); // whether camera is in positive half of the rotation axis or neg half\n\n    var inPosHalf = angleToPosHalf <= angleToNegHalf;\n    var elevationToAxis = Math.min(angleToPosHalf, angleToNegHalf);\n    if (model.useHalfAxis && !inPosHalf) {\n      elevationDelta = Math.PI / 2 - angleToPosHalf;\n    } else if (inPosHalf && elevationToAxis + elevationDelta < 0) {\n      elevationDelta = -elevationToAxis; // } else if (!inPosHalf && elevationToAxis - elevationDelta < 0) {\n    } else if (!inPosHalf && angleToPosHalf + elevationDelta > Math.PI) {\n      elevationDelta = elevationToAxis;\n    }\n    mat4.rotate(rotation, rotation, elevationDelta, v2); // Translate from origin\n\n    mat4.translate(trans, trans, center); // apply rotation\n\n    mat4.multiply(trans, trans, rotation); // Translate to origin\n\n    vec3.negate(centerNeg, center);\n    mat4.translate(trans, trans, centerNeg); // Apply transformation to camera position, focal point, and view up\n\n    vec3.transformMat4(newCamPos, cameraPos, trans);\n    vec3.transformMat4(newFp, cameraFp, trans);\n    vec3.transformMat4(newViewUp, cameraViewUp, rotation);\n    camera.setPosition(newCamPos[0], newCamPos[1], newCamPos[2]);\n    camera.setFocalPoint(newFp[0], newFp[1], newFp[2]);\n    camera.setViewUp(newViewUp);\n    renderer.resetCameraClippingRange();\n    if (interactor.getLightFollowCamera()) {\n      renderer.updateLightsGeometryToFollowCamera();\n    }\n    model.previousPosition = position;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nvar DEFAULT_VALUES = {\n  rotationAxis: [0, 0, 1],\n  useHalfAxis: true\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Inheritance\n\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['rotationAxis', 'useHalfAxis']);\n  vtkCompositeMouseManipulator.extend(publicAPI, model, initialValues);\n  vtkCompositeCameraManipulator.extend(publicAPI, model, initialValues); // Object specific methods\n\n  vtkMouseCameraAxisRotateManipulator(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkMouseCameraAxisRotateManipulator'); // ----------------------------------------------------------------------------\n\nvar vtkMouseCameraAxisRotateManipulator$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\nexport { vtkMouseCameraAxisRotateManipulator$1 as default, extend, newInstance };","map":{"version":3,"names":["vec3","mat4","macro","vtkCompositeCameraManipulator","vtkCompositeMouseManipulator","r","radiansFromDegrees","j","cross","vtkMouseCameraAxisRotateManipulator","publicAPI","model","classHierarchy","push","negCameraDir","Float64Array","newCamPos","newFp","newViewUp","trans","rotation","v2","centerNeg","negRotationAxis","onButtonDown","interactor","renderer","position","previousPosition","onMouseMove","camera","getActiveCamera","cameraPos","getPosition","cameraFp","getFocalPoint","cameraViewUp","getViewUp","cameraDirection","getDirectionOfProjection","negate","identity","center","rotationFactor","rotationAxis","dx","x","dy","y","size","getView","getViewportSize","azimuthDelta","rotate","elevationDelta","angleToPosHalf","Math","acos","dot","angleToNegHalf","inPosHalf","elevationToAxis","min","useHalfAxis","PI","translate","multiply","transformMat4","setPosition","setFocalPoint","setViewUp","resetCameraClippingRange","getLightFollowCamera","updateLightsGeometryToFollowCamera","DEFAULT_VALUES","extend","initialValues","arguments","length","undefined","Object","assign","obj","setGet","newInstance","vtkMouseCameraAxisRotateManipulator$1","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/Interaction/Manipulators/MouseCameraAxisRotateManipulator.js"],"sourcesContent":["import { vec3, mat4 } from 'gl-matrix';\nimport macro from '../../macros.js';\nimport vtkCompositeCameraManipulator from './CompositeCameraManipulator.js';\nimport vtkCompositeMouseManipulator from './CompositeMouseManipulator.js';\nimport { r as radiansFromDegrees, j as cross } from '../../Common/Core/Math/index.js';\n\n// vtkMouseCameraAxisRotateManipulator methods\n// ----------------------------------------------------------------------------\n\nfunction vtkMouseCameraAxisRotateManipulator(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkMouseCameraAxisRotateManipulator');\n  var negCameraDir = new Float64Array(3);\n  var newCamPos = new Float64Array(3);\n  var newFp = new Float64Array(3);\n  var newViewUp = new Float64Array(3);\n  var trans = new Float64Array(16);\n  var rotation = new Float64Array(16);\n  var v2 = new Float64Array(3);\n  var centerNeg = new Float64Array(3);\n  var negRotationAxis = new Float64Array(3);\n\n  publicAPI.onButtonDown = function (interactor, renderer, position) {\n    model.previousPosition = position;\n  };\n\n  publicAPI.onMouseMove = function (interactor, renderer, position) {\n    if (!position) {\n      return;\n    }\n\n    var camera = renderer.getActiveCamera();\n    var cameraPos = camera.getPosition();\n    var cameraFp = camera.getFocalPoint();\n    var cameraViewUp = camera.getViewUp();\n    var cameraDirection = camera.getDirectionOfProjection();\n    vec3.negate(negCameraDir, cameraDirection);\n    mat4.identity(trans);\n    mat4.identity(rotation);\n    var center = model.center,\n        rotationFactor = model.rotationFactor,\n        rotationAxis = model.rotationAxis;\n    vec3.negate(negRotationAxis, rotationAxis);\n    var dx = model.previousPosition.x - position.x;\n    var dy = model.previousPosition.y - position.y;\n    var size = interactor.getView().getViewportSize(renderer); // Azimuth\n\n    var azimuthDelta = radiansFromDegrees(360.0 * dx / size[0] * rotationFactor);\n    mat4.rotate(rotation, rotation, azimuthDelta, rotationAxis); // Elevation\n\n    cross(cameraDirection, cameraViewUp, v2);\n    var elevationDelta = radiansFromDegrees(-360.0 * dy / size[1] * rotationFactor); // angle of camera to rotation axis on the positive or negative half,\n    // relative to the origin.\n\n    var angleToPosHalf = Math.acos(vec3.dot(negCameraDir, rotationAxis));\n    var angleToNegHalf = Math.acos(vec3.dot(negCameraDir, negRotationAxis)); // whether camera is in positive half of the rotation axis or neg half\n\n    var inPosHalf = angleToPosHalf <= angleToNegHalf;\n    var elevationToAxis = Math.min(angleToPosHalf, angleToNegHalf);\n\n    if (model.useHalfAxis && !inPosHalf) {\n      elevationDelta = Math.PI / 2 - angleToPosHalf;\n    } else if (inPosHalf && elevationToAxis + elevationDelta < 0) {\n      elevationDelta = -elevationToAxis; // } else if (!inPosHalf && elevationToAxis - elevationDelta < 0) {\n    } else if (!inPosHalf && angleToPosHalf + elevationDelta > Math.PI) {\n      elevationDelta = elevationToAxis;\n    }\n\n    mat4.rotate(rotation, rotation, elevationDelta, v2); // Translate from origin\n\n    mat4.translate(trans, trans, center); // apply rotation\n\n    mat4.multiply(trans, trans, rotation); // Translate to origin\n\n    vec3.negate(centerNeg, center);\n    mat4.translate(trans, trans, centerNeg); // Apply transformation to camera position, focal point, and view up\n\n    vec3.transformMat4(newCamPos, cameraPos, trans);\n    vec3.transformMat4(newFp, cameraFp, trans);\n    vec3.transformMat4(newViewUp, cameraViewUp, rotation);\n    camera.setPosition(newCamPos[0], newCamPos[1], newCamPos[2]);\n    camera.setFocalPoint(newFp[0], newFp[1], newFp[2]);\n    camera.setViewUp(newViewUp);\n    renderer.resetCameraClippingRange();\n\n    if (interactor.getLightFollowCamera()) {\n      renderer.updateLightsGeometryToFollowCamera();\n    }\n\n    model.previousPosition = position;\n  };\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  rotationAxis: [0, 0, 1],\n  useHalfAxis: true\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Inheritance\n\n  macro.obj(publicAPI, model);\n  macro.setGet(publicAPI, model, ['rotationAxis', 'useHalfAxis']);\n  vtkCompositeMouseManipulator.extend(publicAPI, model, initialValues);\n  vtkCompositeCameraManipulator.extend(publicAPI, model, initialValues); // Object specific methods\n\n  vtkMouseCameraAxisRotateManipulator(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkMouseCameraAxisRotateManipulator'); // ----------------------------------------------------------------------------\n\nvar vtkMouseCameraAxisRotateManipulator$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkMouseCameraAxisRotateManipulator$1 as default, extend, newInstance };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}