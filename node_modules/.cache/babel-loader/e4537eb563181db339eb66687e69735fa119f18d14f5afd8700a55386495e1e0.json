{"ast":null,"code":"import macro from '../../../macros.js';\nfunction vtkViewStream(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkViewStream'); // Internal variables\n\n  model.imageDecodingPool = [new Image(), new Image()];\n  model.eventPool = [];\n  model.nextPoolImageIndex = 0;\n  model.urlToRevoke = [];\n  model.activeURL = null;\n  model.fps = [];\n  model.lastTime = Date.now();\n  model.lastImageEvent = null; // --------------------------------------------------------------------------\n  // Internal methods\n  // --------------------------------------------------------------------------\n\n  function imageLoaded(e) {\n    var id = Number(this.dataset.id);\n    publicAPI.invokeImageReady(model.eventPool[id]);\n  } // --------------------------------------------------------------------------\n\n  function prepareDecodingPool() {\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n    while (model.imageDecodingPool.length < size) {\n      model.imageDecodingPool.push(new Image());\n    }\n    for (var i = 0; i < model.imageDecodingPool.length; i++) {\n      model.imageDecodingPool[i].dataset.id = i;\n      model.imageDecodingPool[i].onload = imageLoaded;\n    }\n  } // --------------------------------------------------------------------------\n\n  function decodeImage(event) {\n    model.eventPool[model.nextPoolImageIndex] = event;\n    event.image = model.imageDecodingPool[model.nextPoolImageIndex++];\n    model.nextPoolImageIndex %= model.imageDecodingPool.length;\n    event.image.src = event.url;\n  } // --------------------------------------------------------------------------\n\n  publicAPI.pushCamera = function () {\n    var focalPoint = model.camera.getReferenceByName('focalPoint');\n    var viewUp = model.camera.getReferenceByName('viewUp');\n    var position = model.camera.getReferenceByName('position');\n    var parallelProjection = model.camera.getParallelProjection();\n    var viewAngle = model.camera.getViewAngle();\n    var parallelScale = model.camera.getParallelScale();\n    var promise = null;\n    if (model.useCameraParameters) {\n      promise = model.protocol.updateCameraParameters(model.viewId, {\n        focalPoint: focalPoint,\n        viewUp: viewUp,\n        position: position,\n        parallelProjection: parallelProjection,\n        viewAngle: viewAngle,\n        parallelScale: parallelScale\n      }, false);\n    } else {\n      promise = model.protocol.updateCamera(model.viewId, focalPoint, viewUp, position, false);\n    }\n    if (model.isAnimating) {\n      setTimeout(publicAPI.pushCamera, 1000 / model.cameraUpdateRate);\n    }\n    return promise;\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.invalidateCache = function () {\n    return model.protocol.invalidateCache(model.viewId);\n  }; // --------------------------------------------------------------------------\n  // PublicAPI\n  // --------------------------------------------------------------------------\n\n  publicAPI.render = function () {\n    return model.protocol.render({\n      view: model.viewId,\n      size: model.size\n    });\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.resetCamera = function () {\n    return model.protocol.resetCamera(model.viewId);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.startAnimation = function () {\n    return model.protocol.startAnimation(model.viewId);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.stopAnimation = function () {\n    return model.protocol.stopAnimation(model.viewId);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.setSize = function (width, height) {\n    var changeDetected = false;\n    if (model.size[0] !== width || model.size[1] !== height) {\n      model.size = [width, height];\n      changeDetected = true;\n    }\n    if (changeDetected) {\n      publicAPI.modified();\n      if (model.protocol) {\n        return model.protocol.setSize(model.viewId, width, height);\n      }\n    }\n    return Promise.resolve(false);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.startInteraction = function () {\n    var promises = [model.protocol.setQuality(model.viewId, model.interactiveQuality, model.interactiveRatio)];\n    if (model.camera) {\n      promises.push(publicAPI.startAnimation());\n      model.isAnimating = true;\n      promises.push(publicAPI.pushCamera());\n    }\n    return Promise.all(promises);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.endInteraction = function () {\n    var promises = [];\n    promises.push(model.protocol.setQuality(model.viewId, model.stillQuality, model.stillRatio));\n    if (model.camera) {\n      promises.push(publicAPI.stopAnimation());\n      model.isAnimating = false;\n      promises.push(publicAPI.pushCamera());\n    } else {\n      promises.push(publicAPI.render());\n    }\n    return Promise.all(promises);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.setViewId = function (id) {\n    if (model.viewId === id || !model.protocol) {\n      return false;\n    }\n    if (model.viewId) {\n      model.protocol.unregisterView(model.viewId);\n    }\n    model.viewId = id;\n    if (model.viewId) {\n      model.protocol.registerView(model.viewId).then(function (_ref) {\n        var viewId = _ref.viewId;\n        model.viewId = viewId;\n      });\n    }\n    return true;\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.processMessage = function (msg) {\n    /* eslint-disable eqeqeq */\n    if (msg.id != model.viewId) {\n      return;\n    }\n    /* eslint-enable eqeqeq */\n\n    var imgBlob = new Blob([msg.image], {\n      type: model.mimeType\n    });\n    if (model.activeURL) {\n      model.urlToRevoke.push(model.activeURL);\n      model.activeURL = null;\n      while (model.urlToRevoke.length > 60) {\n        var url = model.urlToRevoke.shift();\n        window.URL.revokeObjectURL(url);\n      }\n    }\n    model.activeURL = URL.createObjectURL(imgBlob);\n    var time = Date.now();\n    var fps = Math.floor(10000 / (time - model.lastTime)) / 10;\n    model.fps.push(fps);\n    model.lastTime = time;\n    model.lastImageEvent = {\n      url: model.activeURL,\n      fps: fps,\n      metadata: {\n        size: msg.size,\n        id: msg.id,\n        memory: msg.memsize,\n        workTime: msg.workTime\n      }\n    };\n    if (model.decodeImage) {\n      decodeImage(model.lastImageEvent);\n    } else {\n      publicAPI.invokeImageReady(model.lastImageEvent);\n    } // GC fps\n\n    while (model.fps.length > model.fpsWindowSize) {\n      model.fps.shift();\n    }\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.delete = macro.chain(function () {\n    model.unregisterViewStream(publicAPI);\n    publicAPI.setViewId(null);\n    while (model.urlToRevoke.length) {\n      window.URL.revokeObjectURL(model.urlToRevoke.pop());\n    }\n  }, publicAPI.delete); // --------------------------------------------------------------------------\n  // Initialize object\n  // --------------------------------------------------------------------------\n\n  prepareDecodingPool();\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nvar DEFAULT_VALUES = {\n  // protocol: null,\n  // api: null,\n  cameraUpdateRate: 30,\n  decodeImage: true,\n  fpsWindowSize: 250,\n  interactiveQuality: 80,\n  interactiveRatio: 1,\n  isAnimating: false,\n  mimeType: 'image/jpeg',\n  size: [-1, -1],\n  stillQuality: 100,\n  stillRatio: 1,\n  useCameraParameters: false,\n  viewId: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Object methods\n\n  macro.obj(publicAPI, model);\n  macro.event(publicAPI, model, 'ImageReady');\n  macro.get(publicAPI, model, ['viewId', 'size', 'fps', 'lastImageEvent']);\n  macro.setGet(publicAPI, model, ['camera', 'cameraUpdateRate', 'decodeImage', 'fpsWindowSize', 'interactiveQuality', 'interactiveRatio', 'stillQuality', 'stillRatio', 'useCameraParameters']); // Object specific methods\n\n  vtkViewStream(publicAPI, model); // Blend APIs\n\n  Object.assign(publicAPI, model.sharedAPI);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkViewStream'); // ----------------------------------------------------------------------------\n\nvar ViewStream = {\n  newInstance: newInstance,\n  extend: extend\n};\nexport { ViewStream as default, extend, newInstance };","map":{"version":3,"names":["macro","vtkViewStream","publicAPI","model","classHierarchy","push","imageDecodingPool","Image","eventPool","nextPoolImageIndex","urlToRevoke","activeURL","fps","lastTime","Date","now","lastImageEvent","imageLoaded","e","id","Number","dataset","invokeImageReady","prepareDecodingPool","size","arguments","length","undefined","i","onload","decodeImage","event","image","src","url","pushCamera","focalPoint","camera","getReferenceByName","viewUp","position","parallelProjection","getParallelProjection","viewAngle","getViewAngle","parallelScale","getParallelScale","promise","useCameraParameters","protocol","updateCameraParameters","viewId","updateCamera","isAnimating","setTimeout","cameraUpdateRate","invalidateCache","render","view","resetCamera","startAnimation","stopAnimation","setSize","width","height","changeDetected","modified","Promise","resolve","startInteraction","promises","setQuality","interactiveQuality","interactiveRatio","all","endInteraction","stillQuality","stillRatio","setViewId","unregisterView","registerView","then","_ref","processMessage","msg","imgBlob","Blob","type","mimeType","shift","window","URL","revokeObjectURL","createObjectURL","time","Math","floor","metadata","memory","memsize","workTime","fpsWindowSize","delete","chain","unregisterViewStream","pop","DEFAULT_VALUES","extend","initialValues","Object","assign","obj","get","setGet","sharedAPI","newInstance","ViewStream","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/IO/Core/ImageStream/ViewStream.js"],"sourcesContent":["import macro from '../../../macros.js';\n\nfunction vtkViewStream(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkViewStream'); // Internal variables\n\n  model.imageDecodingPool = [new Image(), new Image()];\n  model.eventPool = [];\n  model.nextPoolImageIndex = 0;\n  model.urlToRevoke = [];\n  model.activeURL = null;\n  model.fps = [];\n  model.lastTime = Date.now();\n  model.lastImageEvent = null; // --------------------------------------------------------------------------\n  // Internal methods\n  // --------------------------------------------------------------------------\n\n  function imageLoaded(e) {\n    var id = Number(this.dataset.id);\n    publicAPI.invokeImageReady(model.eventPool[id]);\n  } // --------------------------------------------------------------------------\n\n\n  function prepareDecodingPool() {\n    var size = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 2;\n\n    while (model.imageDecodingPool.length < size) {\n      model.imageDecodingPool.push(new Image());\n    }\n\n    for (var i = 0; i < model.imageDecodingPool.length; i++) {\n      model.imageDecodingPool[i].dataset.id = i;\n      model.imageDecodingPool[i].onload = imageLoaded;\n    }\n  } // --------------------------------------------------------------------------\n\n\n  function decodeImage(event) {\n    model.eventPool[model.nextPoolImageIndex] = event;\n    event.image = model.imageDecodingPool[model.nextPoolImageIndex++];\n    model.nextPoolImageIndex %= model.imageDecodingPool.length;\n    event.image.src = event.url;\n  } // --------------------------------------------------------------------------\n\n\n  publicAPI.pushCamera = function () {\n    var focalPoint = model.camera.getReferenceByName('focalPoint');\n    var viewUp = model.camera.getReferenceByName('viewUp');\n    var position = model.camera.getReferenceByName('position');\n    var parallelProjection = model.camera.getParallelProjection();\n    var viewAngle = model.camera.getViewAngle();\n    var parallelScale = model.camera.getParallelScale();\n    var promise = null;\n\n    if (model.useCameraParameters) {\n      promise = model.protocol.updateCameraParameters(model.viewId, {\n        focalPoint: focalPoint,\n        viewUp: viewUp,\n        position: position,\n        parallelProjection: parallelProjection,\n        viewAngle: viewAngle,\n        parallelScale: parallelScale\n      }, false);\n    } else {\n      promise = model.protocol.updateCamera(model.viewId, focalPoint, viewUp, position, false);\n    }\n\n    if (model.isAnimating) {\n      setTimeout(publicAPI.pushCamera, 1000 / model.cameraUpdateRate);\n    }\n\n    return promise;\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.invalidateCache = function () {\n    return model.protocol.invalidateCache(model.viewId);\n  }; // --------------------------------------------------------------------------\n  // PublicAPI\n  // --------------------------------------------------------------------------\n\n\n  publicAPI.render = function () {\n    return model.protocol.render({\n      view: model.viewId,\n      size: model.size\n    });\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.resetCamera = function () {\n    return model.protocol.resetCamera(model.viewId);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.startAnimation = function () {\n    return model.protocol.startAnimation(model.viewId);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.stopAnimation = function () {\n    return model.protocol.stopAnimation(model.viewId);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.setSize = function (width, height) {\n    var changeDetected = false;\n\n    if (model.size[0] !== width || model.size[1] !== height) {\n      model.size = [width, height];\n      changeDetected = true;\n    }\n\n    if (changeDetected) {\n      publicAPI.modified();\n\n      if (model.protocol) {\n        return model.protocol.setSize(model.viewId, width, height);\n      }\n    }\n\n    return Promise.resolve(false);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.startInteraction = function () {\n    var promises = [model.protocol.setQuality(model.viewId, model.interactiveQuality, model.interactiveRatio)];\n\n    if (model.camera) {\n      promises.push(publicAPI.startAnimation());\n      model.isAnimating = true;\n      promises.push(publicAPI.pushCamera());\n    }\n\n    return Promise.all(promises);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.endInteraction = function () {\n    var promises = [];\n    promises.push(model.protocol.setQuality(model.viewId, model.stillQuality, model.stillRatio));\n\n    if (model.camera) {\n      promises.push(publicAPI.stopAnimation());\n      model.isAnimating = false;\n      promises.push(publicAPI.pushCamera());\n    } else {\n      promises.push(publicAPI.render());\n    }\n\n    return Promise.all(promises);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.setViewId = function (id) {\n    if (model.viewId === id || !model.protocol) {\n      return false;\n    }\n\n    if (model.viewId) {\n      model.protocol.unregisterView(model.viewId);\n    }\n\n    model.viewId = id;\n\n    if (model.viewId) {\n      model.protocol.registerView(model.viewId).then(function (_ref) {\n        var viewId = _ref.viewId;\n        model.viewId = viewId;\n      });\n    }\n\n    return true;\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.processMessage = function (msg) {\n    /* eslint-disable eqeqeq */\n    if (msg.id != model.viewId) {\n      return;\n    }\n    /* eslint-enable eqeqeq */\n\n\n    var imgBlob = new Blob([msg.image], {\n      type: model.mimeType\n    });\n\n    if (model.activeURL) {\n      model.urlToRevoke.push(model.activeURL);\n      model.activeURL = null;\n\n      while (model.urlToRevoke.length > 60) {\n        var url = model.urlToRevoke.shift();\n        window.URL.revokeObjectURL(url);\n      }\n    }\n\n    model.activeURL = URL.createObjectURL(imgBlob);\n    var time = Date.now();\n    var fps = Math.floor(10000 / (time - model.lastTime)) / 10;\n    model.fps.push(fps);\n    model.lastTime = time;\n    model.lastImageEvent = {\n      url: model.activeURL,\n      fps: fps,\n      metadata: {\n        size: msg.size,\n        id: msg.id,\n        memory: msg.memsize,\n        workTime: msg.workTime\n      }\n    };\n\n    if (model.decodeImage) {\n      decodeImage(model.lastImageEvent);\n    } else {\n      publicAPI.invokeImageReady(model.lastImageEvent);\n    } // GC fps\n\n\n    while (model.fps.length > model.fpsWindowSize) {\n      model.fps.shift();\n    }\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.delete = macro.chain(function () {\n    model.unregisterViewStream(publicAPI);\n    publicAPI.setViewId(null);\n\n    while (model.urlToRevoke.length) {\n      window.URL.revokeObjectURL(model.urlToRevoke.pop());\n    }\n  }, publicAPI.delete); // --------------------------------------------------------------------------\n  // Initialize object\n  // --------------------------------------------------------------------------\n\n  prepareDecodingPool();\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  // protocol: null,\n  // api: null,\n  cameraUpdateRate: 30,\n  decodeImage: true,\n  fpsWindowSize: 250,\n  interactiveQuality: 80,\n  interactiveRatio: 1,\n  isAnimating: false,\n  mimeType: 'image/jpeg',\n  size: [-1, -1],\n  stillQuality: 100,\n  stillRatio: 1,\n  useCameraParameters: false,\n  viewId: null\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Object methods\n\n  macro.obj(publicAPI, model);\n  macro.event(publicAPI, model, 'ImageReady');\n  macro.get(publicAPI, model, ['viewId', 'size', 'fps', 'lastImageEvent']);\n  macro.setGet(publicAPI, model, ['camera', 'cameraUpdateRate', 'decodeImage', 'fpsWindowSize', 'interactiveQuality', 'interactiveRatio', 'stillQuality', 'stillRatio', 'useCameraParameters']); // Object specific methods\n\n  vtkViewStream(publicAPI, model); // Blend APIs\n\n  Object.assign(publicAPI, model.sharedAPI);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkViewStream'); // ----------------------------------------------------------------------------\n\nvar ViewStream = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { ViewStream as default, extend, newInstance };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}