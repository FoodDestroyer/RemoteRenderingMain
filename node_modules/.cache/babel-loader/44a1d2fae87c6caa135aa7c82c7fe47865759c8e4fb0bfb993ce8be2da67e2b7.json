{"ast":null,"code":"/* global XMLHttpRequest */\nimport CompositeClosureHelper from '../CompositeClosureHelper';\nconst connections = [];\nfunction ProcessLauncher(publicAPI, model) {\n  publicAPI.start = config => {\n    var xhr = new XMLHttpRequest(),\n      url = model.endPoint;\n    xhr.open('POST', url, true);\n    if (config.headers) {\n      Object.entries(config.headers).forEach(([key, value]) => xhr.setRequestHeader(key, value));\n      delete config.headers;\n    }\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n    xhr.onload = e => {\n      const response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n      if (xhr.status === 200 && response && !response.error) {\n        // Add connection to our global list\n        connections.push(response);\n        publicAPI.fireProcessReady(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = e => {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send(JSON.stringify(config));\n  };\n  publicAPI.fetchConnection = sessionId => {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, sessionId].join('/');\n    xhr.open('GET', url, true);\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n    xhr.onload = e => {\n      if (this.status === 200) {\n        publicAPI.fireFetch(supportsJson ? xhr.response : JSON.parse(xhr.response));\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = e => {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send();\n  };\n  publicAPI.stop = connection => {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, connection.id].join('/');\n    xhr.open('DELETE', url, true);\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n    xhr.onload = e => {\n      if (this.status === 200) {\n        const response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n        // Remove connection from the list\n        // FIXME / TODO\n        publicAPI.fireProcessStopped(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = e => {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send();\n  };\n  publicAPI.listConnections = () => {\n    return connections;\n  };\n}\nconst DEFAULT_VALUES = {\n  endPoint: null\n};\nexport function extend(publicAPI, model, initialValues = {}) {\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  CompositeClosureHelper.destroy(publicAPI, model);\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessReady');\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessStopped');\n  CompositeClosureHelper.event(publicAPI, model, 'Fetch');\n  CompositeClosureHelper.event(publicAPI, model, 'Error');\n  CompositeClosureHelper.isA(publicAPI, model, 'ProcessLauncher');\n  ProcessLauncher(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nexport const newInstance = CompositeClosureHelper.newInstance(extend);\nexport default {\n  newInstance,\n  extend\n};","map":{"version":3,"names":["CompositeClosureHelper","connections","ProcessLauncher","publicAPI","model","start","config","xhr","XMLHttpRequest","url","endPoint","open","headers","Object","entries","forEach","key","value","setRequestHeader","responseType","supportsJson","onload","e","response","JSON","parse","status","error","push","fireProcessReady","fireError","onerror","send","stringify","fetchConnection","sessionId","join","fireFetch","stop","connection","id","fireProcessStopped","listConnections","DEFAULT_VALUES","extend","initialValues","assign","destroy","event","isA","newInstance"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/wslink/src/ProcessLauncher/index.js"],"sourcesContent":["/* global XMLHttpRequest */\nimport CompositeClosureHelper from '../CompositeClosureHelper';\n\nconst connections = [];\n\nfunction ProcessLauncher(publicAPI, model) {\n  publicAPI.start = (config) => {\n    var xhr = new XMLHttpRequest(),\n      url = model.endPoint;\n\n    xhr.open('POST', url, true);\n\n    if (config.headers) {\n      Object.entries(config.headers).forEach(([key, value]) =>\n        xhr.setRequestHeader(key, value)\n      );\n      delete config.headers;\n    }\n\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n\n    xhr.onload = (e) => {\n      const response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n      if (xhr.status === 200 && response && !response.error) {\n        // Add connection to our global list\n        connections.push(response);\n        publicAPI.fireProcessReady(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.onerror = (e) => {\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.send(JSON.stringify(config));\n  };\n\n  publicAPI.fetchConnection = (sessionId) => {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, sessionId].join('/');\n\n    xhr.open('GET', url, true);\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n\n    xhr.onload = (e) => {\n      if (this.status === 200) {\n        publicAPI.fireFetch(\n          supportsJson ? xhr.response : JSON.parse(xhr.response)\n        );\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.onerror = (e) => {\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.send();\n  };\n\n  publicAPI.stop = (connection) => {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, connection.id].join('/');\n\n    xhr.open('DELETE', url, true);\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n\n    xhr.onload = (e) => {\n      if (this.status === 200) {\n        const response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n        // Remove connection from the list\n        // FIXME / TODO\n        publicAPI.fireProcessStopped(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = (e) => {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send();\n  };\n\n  publicAPI.listConnections = () => {\n    return connections;\n  };\n}\n\nconst DEFAULT_VALUES = {\n  endPoint: null,\n};\n\nexport function extend(publicAPI, model, initialValues = {}) {\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  CompositeClosureHelper.destroy(publicAPI, model);\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessReady');\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessStopped');\n  CompositeClosureHelper.event(publicAPI, model, 'Fetch');\n  CompositeClosureHelper.event(publicAPI, model, 'Error');\n  CompositeClosureHelper.isA(publicAPI, model, 'ProcessLauncher');\n\n  ProcessLauncher(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nexport const newInstance = CompositeClosureHelper.newInstance(extend);\n\nexport default { newInstance, extend };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}