{"ast":null,"code":"import { strFromU8, decompressSync } from 'fflate';\nimport macro from '../../../macros.js';\nimport Base64 from '../../../Common/Core/Base64.js';\nimport Endian from '../../../Common/Core/Endian.js';\nimport { DataTypeByteSize } from '../../../Common/Core/DataArray/Constants.js';\nimport { registerType } from '../DataAccessHelper.js';\nvar vtkErrorMacro = macro.vtkErrorMacro,\n  vtkDebugMacro = macro.vtkDebugMacro;\nvar requestCount = 0;\nfunction getContent(url) {\n  var el = document.querySelector(\".webResource[data-url=\\\"\".concat(url, \"\\\"]\"));\n  return el ? el.innerHTML : null;\n}\nfunction getElement(url) {\n  return document.querySelector(\".webResource[data-url=\\\"\".concat(url, \"\\\"]\"));\n}\nfunction removeLeadingSlash(str) {\n  return str[0] === '/' ? str.substr(1) : str;\n}\nfunction fetchText(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var txt = getContent(url);\n    if (txt === null) {\n      reject(new Error(\"No such text \".concat(url)));\n    } else {\n      resolve(txt);\n    }\n  });\n}\nfunction fetchJSON(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var txt = getContent(removeLeadingSlash(url));\n    if (txt === null) {\n      reject(new Error(\"No such JSON \".concat(url)));\n    } else {\n      resolve(JSON.parse(txt));\n    }\n  });\n}\nfunction fetchArray(instance, baseURL, array) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return new Promise(function (resolve, reject) {\n    var url = removeLeadingSlash([baseURL, array.ref.basepath, options.compression ? \"\".concat(array.ref.id, \".gz\") : array.ref.id].join('/'));\n    var txt = getContent(url);\n    if (txt === null) {\n      reject(new Error(\"No such array \".concat(url)));\n    } else {\n      if (array.dataType === 'string') {\n        var bText = atob(txt);\n        if (options.compression) {\n          bText = strFromU8(decompressSync(bText));\n        }\n        array.values = JSON.parse(bText);\n      } else {\n        var uint8array = new Uint8Array(Base64.toArrayBuffer(txt));\n        array.buffer = new ArrayBuffer(uint8array.length); // copy uint8array to buffer\n\n        var view = new Uint8Array(array.buffer);\n        view.set(uint8array);\n        if (options.compression) {\n          if (array.dataType === 'string' || array.dataType === 'JSON') {\n            array.buffer = strFromU8(decompressSync(new Uint8Array(array.buffer)));\n          } else {\n            array.buffer = decompressSync(new Uint8Array(array.buffer)).buffer;\n          }\n        }\n        if (array.ref.encode === 'JSON') {\n          array.values = JSON.parse(array.buffer);\n        } else {\n          if (Endian.ENDIANNESS !== array.ref.encode && Endian.ENDIANNESS) {\n            // Need to swap bytes\n            vtkDebugMacro(\"Swap bytes of \".concat(array.name));\n            Endian.swapBytes(array.buffer, DataTypeByteSize[array.dataType]);\n          }\n          array.values = macro.newTypedArray(array.dataType, array.buffer);\n        }\n        if (array.values.length !== array.size) {\n          vtkErrorMacro(\"Error in FetchArray: \".concat(array.name, \" does not have the proper array size. Got \").concat(array.values.length, \", instead of \").concat(array.size));\n        }\n      } // Done with the ref and work\n\n      delete array.ref;\n      if (--requestCount === 0 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n        instance.invokeBusy(false);\n      }\n      if (instance !== null && instance !== void 0 && instance.modified) {\n        instance.modified();\n      }\n      resolve(array);\n    }\n  });\n} // ----------------------------------------------------------------------------\n\nfunction fetchImage(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var img = getElement(url);\n    if (img) {\n      resolve(img);\n    } else {\n      reject(new Error(\"No such image \".concat(url)));\n    }\n  });\n} // ----------------------------------------------------------------------------\n\nvar HtmlDataAccessHelper = {\n  fetchJSON: fetchJSON,\n  fetchText: fetchText,\n  fetchArray: fetchArray,\n  fetchImage: fetchImage\n};\nregisterType('html', function (options) {\n  return HtmlDataAccessHelper;\n}); // Export fetch methods\n\nexport { HtmlDataAccessHelper as default };","map":{"version":3,"names":["strFromU8","decompressSync","macro","Base64","Endian","DataTypeByteSize","registerType","vtkErrorMacro","vtkDebugMacro","requestCount","getContent","url","el","document","querySelector","concat","innerHTML","getElement","removeLeadingSlash","str","substr","fetchText","instance","Promise","resolve","reject","txt","Error","fetchJSON","JSON","parse","fetchArray","baseURL","array","options","arguments","length","undefined","ref","basepath","compression","id","join","dataType","bText","atob","values","uint8array","Uint8Array","toArrayBuffer","buffer","ArrayBuffer","view","set","encode","ENDIANNESS","name","swapBytes","newTypedArray","size","invokeBusy","modified","fetchImage","img","HtmlDataAccessHelper","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js"],"sourcesContent":["import { strFromU8, decompressSync } from 'fflate';\nimport macro from '../../../macros.js';\nimport Base64 from '../../../Common/Core/Base64.js';\nimport Endian from '../../../Common/Core/Endian.js';\nimport { DataTypeByteSize } from '../../../Common/Core/DataArray/Constants.js';\nimport { registerType } from '../DataAccessHelper.js';\n\nvar vtkErrorMacro = macro.vtkErrorMacro,\n    vtkDebugMacro = macro.vtkDebugMacro;\nvar requestCount = 0;\n\nfunction getContent(url) {\n  var el = document.querySelector(\".webResource[data-url=\\\"\".concat(url, \"\\\"]\"));\n  return el ? el.innerHTML : null;\n}\n\nfunction getElement(url) {\n  return document.querySelector(\".webResource[data-url=\\\"\".concat(url, \"\\\"]\"));\n}\n\nfunction removeLeadingSlash(str) {\n  return str[0] === '/' ? str.substr(1) : str;\n}\n\nfunction fetchText(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var txt = getContent(url);\n\n    if (txt === null) {\n      reject(new Error(\"No such text \".concat(url)));\n    } else {\n      resolve(txt);\n    }\n  });\n}\n\nfunction fetchJSON(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var txt = getContent(removeLeadingSlash(url));\n\n    if (txt === null) {\n      reject(new Error(\"No such JSON \".concat(url)));\n    } else {\n      resolve(JSON.parse(txt));\n    }\n  });\n}\n\nfunction fetchArray(instance, baseURL, array) {\n  var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return new Promise(function (resolve, reject) {\n    var url = removeLeadingSlash([baseURL, array.ref.basepath, options.compression ? \"\".concat(array.ref.id, \".gz\") : array.ref.id].join('/'));\n    var txt = getContent(url);\n\n    if (txt === null) {\n      reject(new Error(\"No such array \".concat(url)));\n    } else {\n      if (array.dataType === 'string') {\n        var bText = atob(txt);\n\n        if (options.compression) {\n          bText = strFromU8(decompressSync(bText));\n        }\n\n        array.values = JSON.parse(bText);\n      } else {\n        var uint8array = new Uint8Array(Base64.toArrayBuffer(txt));\n        array.buffer = new ArrayBuffer(uint8array.length); // copy uint8array to buffer\n\n        var view = new Uint8Array(array.buffer);\n        view.set(uint8array);\n\n        if (options.compression) {\n          if (array.dataType === 'string' || array.dataType === 'JSON') {\n            array.buffer = strFromU8(decompressSync(new Uint8Array(array.buffer)));\n          } else {\n            array.buffer = decompressSync(new Uint8Array(array.buffer)).buffer;\n          }\n        }\n\n        if (array.ref.encode === 'JSON') {\n          array.values = JSON.parse(array.buffer);\n        } else {\n          if (Endian.ENDIANNESS !== array.ref.encode && Endian.ENDIANNESS) {\n            // Need to swap bytes\n            vtkDebugMacro(\"Swap bytes of \".concat(array.name));\n            Endian.swapBytes(array.buffer, DataTypeByteSize[array.dataType]);\n          }\n\n          array.values = macro.newTypedArray(array.dataType, array.buffer);\n        }\n\n        if (array.values.length !== array.size) {\n          vtkErrorMacro(\"Error in FetchArray: \".concat(array.name, \" does not have the proper array size. Got \").concat(array.values.length, \", instead of \").concat(array.size));\n        }\n      } // Done with the ref and work\n\n\n      delete array.ref;\n\n      if (--requestCount === 0 && instance !== null && instance !== void 0 && instance.invokeBusy) {\n        instance.invokeBusy(false);\n      }\n\n      if (instance !== null && instance !== void 0 && instance.modified) {\n        instance.modified();\n      }\n\n      resolve(array);\n    }\n  });\n} // ----------------------------------------------------------------------------\n\n\nfunction fetchImage(instance, url) {\n  return new Promise(function (resolve, reject) {\n    var img = getElement(url);\n\n    if (img) {\n      resolve(img);\n    } else {\n      reject(new Error(\"No such image \".concat(url)));\n    }\n  });\n} // ----------------------------------------------------------------------------\n\n\nvar HtmlDataAccessHelper = {\n  fetchJSON: fetchJSON,\n  fetchText: fetchText,\n  fetchArray: fetchArray,\n  fetchImage: fetchImage\n};\nregisterType('html', function (options) {\n  return HtmlDataAccessHelper;\n}); // Export fetch methods\n\nexport { HtmlDataAccessHelper as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}