{"ast":null,"code":"import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport vtk from '../../../vtk.js';\nimport vtkPiecewiseFunctionProxy from '../PiecewiseFunctionProxy.js';\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nfunction getProperties(proxy) {\n  var props = {};\n  proxy.listPropertyNames().forEach(function (name) {\n    props[name] = proxy.getPropertyByName(name).value;\n  });\n  return props;\n} // ----------------------------------------------------------------------------\n// Proxy State Handling\n// ----------------------------------------------------------------------------\n\nfunction addStateAPI(publicAPI, model) {\n  publicAPI.loadState = function (state) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      var proxyMapping = {};\n      var $oldToNewIdMapping = {};\n      var cameras = {};\n      var datasetHandler = options.datasetHandler || vtk;\n      var sourcePromises = [];\n      state.sources.forEach(function (_ref) {\n        var id = _ref.id,\n          group = _ref.group,\n          name = _ref.name,\n          props = _ref.props;\n        sourcePromises.push(Promise.resolve(datasetHandler(props.dataset)).then(function (dataset) {\n          if (dataset) {\n            var proxy = publicAPI.createProxy(group, name);\n            proxy.setName(props.name);\n            proxy.setInputData(dataset, props.type);\n            proxyMapping[id] = proxy;\n            return proxy;\n          }\n          return null;\n        }));\n      });\n      Promise.all(sourcePromises).then(function () {\n        var views = publicAPI.getViews();\n        state.views.forEach(function (_ref2) {\n          var id = _ref2.id,\n            group = _ref2.group,\n            name = _ref2.name,\n            props = _ref2.props,\n            camera = _ref2.camera;\n          var proxy = null;\n          if (state.options.recycleViews) {\n            proxy = views.find(function (v) {\n              return v.getProxyGroup() === group && v.getProxyName() === name && v.getName() === props.name;\n            });\n          }\n          if (!proxy) {\n            proxy = publicAPI.createProxy(group, name, {\n              disableAnimation: true\n            });\n          } else {\n            proxy.setDisableAnimation(true);\n          }\n          proxy.set(props, true);\n          proxyMapping[id] = proxy;\n          cameras[id] = camera;\n        });\n        function updateView(view) {\n          if (!proxyMapping[view] || !cameras[view]) {\n            return;\n          }\n          proxyMapping[view].resetOrientation().then(function () {\n            proxyMapping[view].getCamera().set(cameras[view]);\n            proxyMapping[view].getRenderer().updateLightsGeometryToFollowCamera();\n            proxyMapping[view].renderLater();\n          });\n        }\n        state.representations.forEach(function (_ref3) {\n          var source = _ref3.source,\n            view = _ref3.view,\n            props = _ref3.props;\n          var proxy = publicAPI.getRepresentation(proxyMapping[source], proxyMapping[view]);\n          proxy.set(props, true);\n          updateView(view);\n        }); // restore luts and pwfs after restoring reps to avoid\n        // rep initialization from resetting restored luts/pwfs\n\n        Object.keys(state.fields).forEach(function (fieldName) {\n          var _state$fields$fieldNa = state.fields[fieldName],\n            lookupTable = _state$fields$fieldNa.lookupTable,\n            piecewiseFunction = _state$fields$fieldNa.piecewiseFunction;\n          var lutProxy = publicAPI.getLookupTable(fieldName, lookupTable);\n          lutProxy.setPresetName(lookupTable.presetName);\n          lutProxy.setDataRange.apply(lutProxy, _toConsumableArray(lookupTable.dataRange));\n          var pwfProxy = publicAPI.getPiecewiseFunction(fieldName, piecewiseFunction);\n          switch (piecewiseFunction.mode) {\n            case vtkPiecewiseFunctionProxy.Mode.Gaussians:\n              pwfProxy.setGaussians(piecewiseFunction.gaussians);\n              break;\n            case vtkPiecewiseFunctionProxy.Mode.Points:\n              pwfProxy.setPoints(piecewiseFunction.points);\n              break;\n            case vtkPiecewiseFunctionProxy.Mode.Nodes:\n              pwfProxy.setNodes(piecewiseFunction.nodes);\n              break;\n          }\n          pwfProxy.setMode(piecewiseFunction.mode);\n          pwfProxy.setDataRange.apply(pwfProxy, _toConsumableArray(piecewiseFunction.dataRange));\n        }); // Apply camera no matter what\n\n        Object.keys(cameras).forEach(updateView); // Create id mapping\n\n        Object.keys(proxyMapping).forEach(function (originalId) {\n          var newId = proxyMapping[originalId].getProxyId();\n          $oldToNewIdMapping[originalId] = newId;\n        }); // Re-enable animation on views\n\n        state.views.forEach(function (_ref4) {\n          var id = _ref4.id;\n          proxyMapping[id].setDisableAnimation(false);\n        });\n        resolve(_objectSpread(_objectSpread({}, state.userData), {}, {\n          $oldToNewIdMapping: $oldToNewIdMapping\n        }));\n      }).catch(reject);\n    });\n  };\n  publicAPI.saveState = function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var userData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      var sources = publicAPI.getSources(); // const representations = publicAPI.getRepresentations();\n\n      var views = publicAPI.getViews(); // Extract handlers\n\n      var datasetHandler = options.datasetHandler || function (d) {\n        return d.getState();\n      };\n      delete options.datasetHandler;\n      var datasets = [];\n      var fieldNames = new Set();\n      var state = {\n        userData: userData,\n        options: options,\n        sources: [],\n        views: [],\n        representations: [],\n        fields: {}\n      };\n      sources.forEach(function (source) {\n        var dataset = Promise.resolve(datasetHandler(source.getDataset(), source));\n        datasets.push(dataset);\n        state.sources.push({\n          id: source.getProxyId(),\n          group: source.getProxyGroup(),\n          name: source.getProxyName(),\n          props: {\n            name: source.getName(),\n            type: source.getType(),\n            dataset: dataset\n          }\n        });\n      });\n      views.forEach(function (view) {\n        var camera = view.getCamera().get('position', 'viewUp', 'focalPoint');\n        state.views.push({\n          id: view.getProxyId(),\n          group: view.getProxyGroup(),\n          name: view.getProxyName(),\n          props: Object.assign(getProperties(view), view.get('axis', 'orientation', 'viewUp')),\n          camera: camera\n        }); // Loop over view representations\n\n        var representations = view.getRepresentations();\n        representations.forEach(function (representation) {\n          state.representations.push({\n            source: representation.getInput().getProxyId(),\n            view: view.getProxyId(),\n            props: getProperties(representation)\n          });\n          fieldNames.add(representation.getColorBy()[0]);\n        });\n      });\n      fieldNames.forEach(function (fieldName) {\n        state.fields[fieldName] = {\n          lookupTable: publicAPI.getLookupTable(fieldName).get('mode', 'presetName', 'rgbPoints', 'hsvPoints', 'nodes', 'arrayName', 'arrayLocation', 'dataRange'),\n          piecewiseFunction: publicAPI.getPiecewiseFunction(fieldName).get('mode', 'gaussians', 'points', 'nodes', 'arrayName', 'arrayLocation', 'dataRange')\n        };\n      });\n      Promise.all(datasets).then(function () {\n        var _loop = function _loop(i) {\n          state.sources[i].props.dataset.then(function (value) {\n            state.sources[i].props.dataset = value;\n          });\n        };\n\n        // Patch datasets in state to the result of the promises\n        for (var i = 0; i < state.sources.length; i++) {\n          _loop(i);\n        } // provide valide state\n\n        resolve(state);\n      }).catch(reject);\n    });\n  };\n}\nexport { addStateAPI as default };","map":{"version":3,"names":["_defineProperty","_toConsumableArray","vtk","vtkPiecewiseFunctionProxy","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","getProperties","proxy","props","listPropertyNames","name","getPropertyByName","value","addStateAPI","publicAPI","model","loadState","state","options","undefined","Promise","resolve","reject","proxyMapping","$oldToNewIdMapping","cameras","datasetHandler","sourcePromises","sources","_ref","id","group","dataset","then","createProxy","setName","setInputData","type","all","views","getViews","_ref2","camera","recycleViews","find","v","getProxyGroup","getProxyName","getName","disableAnimation","setDisableAnimation","set","updateView","view","resetOrientation","getCamera","getRenderer","updateLightsGeometryToFollowCamera","renderLater","representations","_ref3","getRepresentation","fields","fieldName","_state$fields$fieldNa","lookupTable","piecewiseFunction","lutProxy","getLookupTable","setPresetName","presetName","setDataRange","dataRange","pwfProxy","getPiecewiseFunction","mode","Mode","Gaussians","setGaussians","gaussians","Points","setPoints","points","Nodes","setNodes","nodes","setMode","originalId","newId","getProxyId","_ref4","userData","catch","saveState","getSources","d","getState","datasets","fieldNames","Set","getDataset","getType","get","assign","getRepresentations","representation","getInput","add","getColorBy","_loop","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/Proxy/Core/ProxyManager/state.js"],"sourcesContent":["import _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport vtk from '../../../vtk.js';\nimport vtkPiecewiseFunctionProxy from '../PiecewiseFunctionProxy.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction getProperties(proxy) {\n  var props = {};\n  proxy.listPropertyNames().forEach(function (name) {\n    props[name] = proxy.getPropertyByName(name).value;\n  });\n  return props;\n} // ----------------------------------------------------------------------------\n// Proxy State Handling\n// ----------------------------------------------------------------------------\n\n\nfunction addStateAPI(publicAPI, model) {\n  publicAPI.loadState = function (state) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      var proxyMapping = {};\n      var $oldToNewIdMapping = {};\n      var cameras = {};\n      var datasetHandler = options.datasetHandler || vtk;\n      var sourcePromises = [];\n      state.sources.forEach(function (_ref) {\n        var id = _ref.id,\n            group = _ref.group,\n            name = _ref.name,\n            props = _ref.props;\n        sourcePromises.push(Promise.resolve(datasetHandler(props.dataset)).then(function (dataset) {\n          if (dataset) {\n            var proxy = publicAPI.createProxy(group, name);\n            proxy.setName(props.name);\n            proxy.setInputData(dataset, props.type);\n            proxyMapping[id] = proxy;\n            return proxy;\n          }\n\n          return null;\n        }));\n      });\n      Promise.all(sourcePromises).then(function () {\n        var views = publicAPI.getViews();\n        state.views.forEach(function (_ref2) {\n          var id = _ref2.id,\n              group = _ref2.group,\n              name = _ref2.name,\n              props = _ref2.props,\n              camera = _ref2.camera;\n          var proxy = null;\n\n          if (state.options.recycleViews) {\n            proxy = views.find(function (v) {\n              return v.getProxyGroup() === group && v.getProxyName() === name && v.getName() === props.name;\n            });\n          }\n\n          if (!proxy) {\n            proxy = publicAPI.createProxy(group, name, {\n              disableAnimation: true\n            });\n          } else {\n            proxy.setDisableAnimation(true);\n          }\n\n          proxy.set(props, true);\n          proxyMapping[id] = proxy;\n          cameras[id] = camera;\n        });\n\n        function updateView(view) {\n          if (!proxyMapping[view] || !cameras[view]) {\n            return;\n          }\n\n          proxyMapping[view].resetOrientation().then(function () {\n            proxyMapping[view].getCamera().set(cameras[view]);\n            proxyMapping[view].getRenderer().updateLightsGeometryToFollowCamera();\n            proxyMapping[view].renderLater();\n          });\n        }\n\n        state.representations.forEach(function (_ref3) {\n          var source = _ref3.source,\n              view = _ref3.view,\n              props = _ref3.props;\n          var proxy = publicAPI.getRepresentation(proxyMapping[source], proxyMapping[view]);\n          proxy.set(props, true);\n          updateView(view);\n        }); // restore luts and pwfs after restoring reps to avoid\n        // rep initialization from resetting restored luts/pwfs\n\n        Object.keys(state.fields).forEach(function (fieldName) {\n          var _state$fields$fieldNa = state.fields[fieldName],\n              lookupTable = _state$fields$fieldNa.lookupTable,\n              piecewiseFunction = _state$fields$fieldNa.piecewiseFunction;\n          var lutProxy = publicAPI.getLookupTable(fieldName, lookupTable);\n          lutProxy.setPresetName(lookupTable.presetName);\n          lutProxy.setDataRange.apply(lutProxy, _toConsumableArray(lookupTable.dataRange));\n          var pwfProxy = publicAPI.getPiecewiseFunction(fieldName, piecewiseFunction);\n\n          switch (piecewiseFunction.mode) {\n            case vtkPiecewiseFunctionProxy.Mode.Gaussians:\n              pwfProxy.setGaussians(piecewiseFunction.gaussians);\n              break;\n\n            case vtkPiecewiseFunctionProxy.Mode.Points:\n              pwfProxy.setPoints(piecewiseFunction.points);\n              break;\n\n            case vtkPiecewiseFunctionProxy.Mode.Nodes:\n              pwfProxy.setNodes(piecewiseFunction.nodes);\n              break;\n          }\n\n          pwfProxy.setMode(piecewiseFunction.mode);\n          pwfProxy.setDataRange.apply(pwfProxy, _toConsumableArray(piecewiseFunction.dataRange));\n        }); // Apply camera no matter what\n\n        Object.keys(cameras).forEach(updateView); // Create id mapping\n\n        Object.keys(proxyMapping).forEach(function (originalId) {\n          var newId = proxyMapping[originalId].getProxyId();\n          $oldToNewIdMapping[originalId] = newId;\n        }); // Re-enable animation on views\n\n        state.views.forEach(function (_ref4) {\n          var id = _ref4.id;\n          proxyMapping[id].setDisableAnimation(false);\n        });\n        resolve(_objectSpread(_objectSpread({}, state.userData), {}, {\n          $oldToNewIdMapping: $oldToNewIdMapping\n        }));\n      }).catch(reject);\n    });\n  };\n\n  publicAPI.saveState = function () {\n    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var userData = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return new Promise(function (resolve, reject) {\n      var sources = publicAPI.getSources(); // const representations = publicAPI.getRepresentations();\n\n      var views = publicAPI.getViews(); // Extract handlers\n\n      var datasetHandler = options.datasetHandler || function (d) {\n        return d.getState();\n      };\n\n      delete options.datasetHandler;\n      var datasets = [];\n      var fieldNames = new Set();\n      var state = {\n        userData: userData,\n        options: options,\n        sources: [],\n        views: [],\n        representations: [],\n        fields: {}\n      };\n      sources.forEach(function (source) {\n        var dataset = Promise.resolve(datasetHandler(source.getDataset(), source));\n        datasets.push(dataset);\n        state.sources.push({\n          id: source.getProxyId(),\n          group: source.getProxyGroup(),\n          name: source.getProxyName(),\n          props: {\n            name: source.getName(),\n            type: source.getType(),\n            dataset: dataset\n          }\n        });\n      });\n      views.forEach(function (view) {\n        var camera = view.getCamera().get('position', 'viewUp', 'focalPoint');\n        state.views.push({\n          id: view.getProxyId(),\n          group: view.getProxyGroup(),\n          name: view.getProxyName(),\n          props: Object.assign(getProperties(view), view.get('axis', 'orientation', 'viewUp')),\n          camera: camera\n        }); // Loop over view representations\n\n        var representations = view.getRepresentations();\n        representations.forEach(function (representation) {\n          state.representations.push({\n            source: representation.getInput().getProxyId(),\n            view: view.getProxyId(),\n            props: getProperties(representation)\n          });\n          fieldNames.add(representation.getColorBy()[0]);\n        });\n      });\n      fieldNames.forEach(function (fieldName) {\n        state.fields[fieldName] = {\n          lookupTable: publicAPI.getLookupTable(fieldName).get('mode', 'presetName', 'rgbPoints', 'hsvPoints', 'nodes', 'arrayName', 'arrayLocation', 'dataRange'),\n          piecewiseFunction: publicAPI.getPiecewiseFunction(fieldName).get('mode', 'gaussians', 'points', 'nodes', 'arrayName', 'arrayLocation', 'dataRange')\n        };\n      });\n      Promise.all(datasets).then(function () {\n        var _loop = function _loop(i) {\n          state.sources[i].props.dataset.then(function (value) {\n            state.sources[i].props.dataset = value;\n          });\n        };\n\n        // Patch datasets in state to the result of the promises\n        for (var i = 0; i < state.sources.length; i++) {\n          _loop(i);\n        } // provide valide state\n\n\n        resolve(state);\n      }).catch(reject);\n    });\n  };\n}\n\nexport { addStateAPI as default };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}