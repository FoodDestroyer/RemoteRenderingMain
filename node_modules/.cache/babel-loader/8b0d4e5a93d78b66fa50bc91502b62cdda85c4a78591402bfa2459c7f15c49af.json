{"ast":null,"code":"import _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _construct from '@babel/runtime/helpers/construct';\nimport DeepEqual from 'fast-deep-equal';\nimport vtk, { vtkGlobal } from './vtk.js';\nimport ClassHierarchy from './Common/Core/ClassHierarchy.js';\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\nvar globalMTime = 0;\nvar VOID = Symbol('void');\nfunction getCurrentGlobalMTime() {\n  return globalMTime;\n} // ----------------------------------------------------------------------------\n// Logging function calls\n// ----------------------------------------------------------------------------\n\n/* eslint-disable no-prototype-builtins                                      */\n\nvar fakeConsole = {};\nfunction noOp() {}\nvar consoleMethods = ['log', 'debug', 'info', 'warn', 'error', 'time', 'timeEnd', 'group', 'groupEnd'];\nconsoleMethods.forEach(function (methodName) {\n  fakeConsole[methodName] = noOp;\n});\nvtkGlobal.console = console.hasOwnProperty('log') ? console : fakeConsole;\nvar loggerFunctions = {\n  debug: noOp,\n  // Don't print debug by default\n  error: vtkGlobal.console.error || noOp,\n  info: vtkGlobal.console.info || noOp,\n  log: vtkGlobal.console.log || noOp,\n  warn: vtkGlobal.console.warn || noOp\n};\nfunction setLoggerFunction(name, fn) {\n  if (loggerFunctions[name]) {\n    loggerFunctions[name] = fn || noOp;\n  }\n}\nfunction vtkLogMacro() {\n  loggerFunctions.log.apply(loggerFunctions, arguments);\n}\nfunction vtkInfoMacro() {\n  loggerFunctions.info.apply(loggerFunctions, arguments);\n}\nfunction vtkDebugMacro() {\n  loggerFunctions.debug.apply(loggerFunctions, arguments);\n}\nfunction vtkErrorMacro() {\n  loggerFunctions.error.apply(loggerFunctions, arguments);\n}\nfunction vtkWarningMacro() {\n  loggerFunctions.warn.apply(loggerFunctions, arguments);\n}\nvar ERROR_ONCE_MAP = {};\nfunction vtkOnceErrorMacro(str) {\n  if (!ERROR_ONCE_MAP[str]) {\n    loggerFunctions.error(str);\n    ERROR_ONCE_MAP[str] = true;\n  }\n} // ----------------------------------------------------------------------------\n// TypedArray\n// ----------------------------------------------------------------------------\n\nvar TYPED_ARRAYS = Object.create(null);\nTYPED_ARRAYS.Float32Array = Float32Array;\nTYPED_ARRAYS.Float64Array = Float64Array;\nTYPED_ARRAYS.Uint8Array = Uint8Array;\nTYPED_ARRAYS.Int8Array = Int8Array;\nTYPED_ARRAYS.Uint16Array = Uint16Array;\nTYPED_ARRAYS.Int16Array = Int16Array;\nTYPED_ARRAYS.Uint32Array = Uint32Array;\nTYPED_ARRAYS.Int32Array = Int32Array;\nTYPED_ARRAYS.Uint8ClampedArray = Uint8ClampedArray;\ntry {\n  TYPED_ARRAYS.BigInt64Array = BigInt64Array;\n  TYPED_ARRAYS.BigUint64Array = BigUint64Array;\n} catch (_unused) {// ignore\n}\nfunction newTypedArray(type) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return _construct(TYPED_ARRAYS[type] || Float64Array, args);\n}\nfunction newTypedArrayFrom(type) {\n  var _ref;\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n  return (_ref = TYPED_ARRAYS[type] || Float64Array).from.apply(_ref, args);\n} // ----------------------------------------------------------------------------\n// capitilize provided string\n// ----------------------------------------------------------------------------\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction _capitalize(str) {\n  return capitalize(str[0] === '_' ? str.slice(1) : str);\n}\nfunction uncapitalize(str) {\n  return str.charAt(0).toLowerCase() + str.slice(1);\n} // ----------------------------------------------------------------------------\n// Convert byte size into a well formatted string\n// ----------------------------------------------------------------------------\n\nfunction formatBytesToProperUnit(size) {\n  var precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  var chunkSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  var units = ['TB', 'GB', 'MB', 'KB'];\n  var value = Number(size);\n  var currentUnit = 'B';\n  while (value > chunkSize) {\n    value /= chunkSize;\n    currentUnit = units.pop();\n  }\n  return \"\".concat(value.toFixed(precision), \" \").concat(currentUnit);\n} // ----------------------------------------------------------------------------\n// Convert thousand number with proper separator\n// ----------------------------------------------------------------------------\n\nfunction formatNumbersWithThousandSeparator(n) {\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ' ';\n  var sections = [];\n  var size = n;\n  while (size > 1000) {\n    sections.push(\"000\".concat(size % 1000).slice(-3));\n    size = Math.floor(size / 1000);\n  }\n  if (size > 0) {\n    sections.push(size);\n  }\n  sections.reverse();\n  return sections.join(separator);\n} // ----------------------------------------------------------------------------\n// Array helper\n// ----------------------------------------------------------------------------\n\nfunction safeArrays(model) {\n  Object.keys(model).forEach(function (key) {\n    if (Array.isArray(model[key])) {\n      model[key] = [].concat(model[key]);\n    }\n  });\n} // ----------------------------------------------------------------------------\n// shallow equals\n// ----------------------------------------------------------------------------\n\nfunction shallowEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n    for (var i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n    return true;\n  }\n  return false;\n} // ----------------------------------------------------------------------------\n\nfunction enumToString(e, value) {\n  return Object.keys(e).find(function (key) {\n    return e[key] === value;\n  });\n}\nfunction getStateArrayMapFunc(item) {\n  if (item && item.isA) {\n    return item.getState();\n  }\n  return item;\n} // ----------------------------------------------------------------------------\n// setImmediate\n// ----------------------------------------------------------------------------\n\nfunction setImmediateVTK(fn) {\n  setTimeout(fn, 0);\n} // ----------------------------------------------------------------------------\n// measurePromiseExecution\n//\n// Measures the time it takes for a promise to finish from\n//   the time this function is invoked.\n// The callback receives the time it took for the promise to resolve or reject.\n// ----------------------------------------------------------------------------\n\nfunction measurePromiseExecution(promise, callback) {\n  var start = performance.now();\n  promise.finally(function () {\n    var delta = performance.now() - start;\n    callback(delta);\n  });\n} // ----------------------------------------------------------------------------\n// vtkObject: modified(), onModified(callback), delete()\n// ----------------------------------------------------------------------------\n\nfunction obj() {\n  var publicAPI = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var model = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // Ensure each instance as a unique ref of array\n  safeArrays(model);\n  var callbacks = [];\n  if (!Number.isInteger(model.mtime)) {\n    model.mtime = ++globalMTime;\n  }\n  if (!('classHierarchy' in model)) {\n    model.classHierarchy = new ClassHierarchy('vtkObject');\n  } else if (!(model.classHierarchy instanceof ClassHierarchy)) {\n    var hierarchy = new ClassHierarchy();\n    for (var i = 0; i < model.classHierarchy.length; i++) {\n      hierarchy.push(model.classHierarchy[i]);\n    }\n    model.classHierarchy = hierarchy;\n  }\n  function off(index) {\n    callbacks[index] = null;\n  }\n  function on(index) {\n    function unsubscribe() {\n      off(index);\n    }\n    return Object.freeze({\n      unsubscribe: unsubscribe\n    });\n  }\n  publicAPI.isDeleted = function () {\n    return !!model.deleted;\n  };\n  publicAPI.modified = function (otherMTime) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (otherMTime && otherMTime < publicAPI.getMTime()) {\n      return;\n    }\n    model.mtime = ++globalMTime;\n    callbacks.forEach(function (callback) {\n      return callback && callback(publicAPI);\n    });\n  };\n  publicAPI.onModified = function (callback) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n    var index = callbacks.length;\n    callbacks.push(callback);\n    return on(index);\n  };\n  publicAPI.getMTime = function () {\n    return model.mtime;\n  };\n  publicAPI.isA = function (className) {\n    var count = model.classHierarchy.length; // we go backwards as that is more likely for\n    // early termination\n\n    while (count--) {\n      if (model.classHierarchy[count] === className) {\n        return true;\n      }\n    }\n    return false;\n  };\n  publicAPI.getClassName = function () {\n    var depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return model.classHierarchy[model.classHierarchy.length - 1 - depth];\n  };\n  publicAPI.set = function () {\n    var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var noWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var noFunction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var ret = false;\n    Object.keys(map).forEach(function (name) {\n      var fn = noFunction ? null : publicAPI[\"set\".concat(capitalize(name))];\n      if (fn && Array.isArray(map[name]) && fn.length > 1) {\n        ret = fn.apply(void 0, _toConsumableArray(map[name])) || ret;\n      } else if (fn) {\n        ret = fn(map[name]) || ret;\n      } else {\n        // Set data on model directly\n        if (['mtime'].indexOf(name) === -1 && !noWarning) {\n          vtkWarningMacro(\"Warning: Set value to model directly \".concat(name, \", \").concat(map[name]));\n        }\n        ret = model[name] !== map[name] || ret;\n        model[name] = map[name];\n      }\n    });\n    return ret;\n  };\n  publicAPI.get = function () {\n    for (var _len3 = arguments.length, list = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      list[_key3] = arguments[_key3];\n    }\n    if (!list.length) {\n      return model;\n    }\n    var subset = {};\n    list.forEach(function (name) {\n      subset[name] = model[name];\n    });\n    return subset;\n  };\n  publicAPI.getReferenceByName = function (val) {\n    return model[val];\n  };\n  publicAPI.delete = function () {\n    Object.keys(model).forEach(function (field) {\n      return delete model[field];\n    });\n    callbacks.forEach(function (el, index) {\n      return off(index);\n    }); // Flag the instance being deleted\n\n    model.deleted = true;\n  }; // Add serialization support\n\n  publicAPI.getState = function () {\n    if (model.deleted) {\n      return null;\n    }\n    var jsonArchive = _objectSpread(_objectSpread({}, model), {}, {\n      vtkClass: publicAPI.getClassName()\n    }); // Convert every vtkObject to its serializable form\n\n    Object.keys(jsonArchive).forEach(function (keyName) {\n      if (jsonArchive[keyName] === null || jsonArchive[keyName] === undefined || keyName[0] === '_' // protected members start with _\n      ) {\n        delete jsonArchive[keyName];\n      } else if (jsonArchive[keyName].isA) {\n        jsonArchive[keyName] = jsonArchive[keyName].getState();\n      } else if (Array.isArray(jsonArchive[keyName])) {\n        jsonArchive[keyName] = jsonArchive[keyName].map(getStateArrayMapFunc);\n      }\n    }); // Sort resulting object by key name\n\n    var sortedObj = {};\n    Object.keys(jsonArchive).sort().forEach(function (name) {\n      sortedObj[name] = jsonArchive[name];\n    }); // Remove mtime\n\n    if (sortedObj.mtime) {\n      delete sortedObj.mtime;\n    }\n    return sortedObj;\n  }; // Add shallowCopy(otherInstance) support\n\n  publicAPI.shallowCopy = function (other) {\n    var debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (other.getClassName() !== publicAPI.getClassName()) {\n      throw new Error(\"Cannot ShallowCopy \".concat(other.getClassName(), \" into \").concat(publicAPI.getClassName()));\n    }\n    var otherModel = other.get();\n    var keyList = Object.keys(model).sort();\n    var otherKeyList = Object.keys(otherModel).sort();\n    otherKeyList.forEach(function (key) {\n      var keyIdx = keyList.indexOf(key);\n      if (keyIdx === -1) {\n        if (debug) {\n          vtkDebugMacro(\"add \".concat(key, \" in shallowCopy\"));\n        }\n      } else {\n        keyList.splice(keyIdx, 1);\n      }\n      model[key] = otherModel[key];\n    });\n    if (keyList.length && debug) {\n      vtkDebugMacro(\"Untouched keys: \".concat(keyList.join(', ')));\n    }\n    publicAPI.modified();\n  }; // This function will get called when one invoke JSON.stringify(vtkObject)\n  // JSON.stringify will only stringify the return value of this function\n\n  publicAPI.toJSON = function vtkObjToJSON() {\n    return publicAPI.getState();\n  }; // Allow usage as decorator\n\n  return publicAPI;\n} // ----------------------------------------------------------------------------\n// getXXX: add getters\n// ----------------------------------------------------------------------------\n\nvar objectGetterMap = {\n  object: function object(publicAPI, model, field) {\n    return function getter() {\n      return _objectSpread({}, model[field.name]);\n    };\n  }\n};\nfunction get(publicAPI, model, fieldNames) {\n  fieldNames.forEach(function (field) {\n    if (_typeof(field) === 'object') {\n      var getter = objectGetterMap[field.type];\n      if (getter) {\n        publicAPI[\"get\".concat(_capitalize(field.name))] = getter(publicAPI, model, field);\n      } else {\n        publicAPI[\"get\".concat(_capitalize(field.name))] = function () {\n          return model[field.name];\n        };\n      }\n    } else {\n      publicAPI[\"get\".concat(_capitalize(field))] = function () {\n        return model[field];\n      };\n    }\n  });\n} // ----------------------------------------------------------------------------\n// setXXX: add setters\n// ----------------------------------------------------------------------------\n\nvar objectSetterMap = {\n  enum: function _enum(publicAPI, model, field) {\n    var onChanged = \"_on\".concat(_capitalize(field.name), \"Changed\");\n    return function (value) {\n      if (typeof value === 'string') {\n        if (field.enum[value] !== undefined) {\n          if (model[field.name] !== field.enum[value]) {\n            model[field.name] = field.enum[value];\n            publicAPI.modified();\n            return true;\n          }\n          return false;\n        }\n        vtkErrorMacro(\"Set Enum with invalid argument \".concat(field, \", \").concat(value));\n        throw new RangeError('Set Enum with invalid string argument');\n      }\n      if (typeof value === 'number') {\n        if (model[field.name] !== value) {\n          if (Object.keys(field.enum).map(function (key) {\n            return field.enum[key];\n          }).indexOf(value) !== -1) {\n            var _model$onChanged;\n            var previousValue = model[field.name];\n            model[field.name] = value;\n            (_model$onChanged = model[onChanged]) === null || _model$onChanged === void 0 ? void 0 : _model$onChanged.call(model, publicAPI, model, value, previousValue);\n            publicAPI.modified();\n            return true;\n          }\n          vtkErrorMacro(\"Set Enum outside numeric range \".concat(field, \", \").concat(value));\n          throw new RangeError('Set Enum outside numeric range');\n        }\n        return false;\n      }\n      vtkErrorMacro(\"Set Enum with invalid argument (String/Number) \".concat(field, \", \").concat(value));\n      throw new TypeError('Set Enum with invalid argument (String/Number)');\n    };\n  },\n  object: function object(publicAPI, model, field) {\n    var onChanged = \"_on\".concat(_capitalize(field.name), \"Changed\");\n    return function (value) {\n      if (!DeepEqual(model[field.name], value)) {\n        var _model$onChanged2;\n        var previousValue = model[field.name];\n        model[field.name] = value;\n        (_model$onChanged2 = model[onChanged]) === null || _model$onChanged2 === void 0 ? void 0 : _model$onChanged2.call(model, publicAPI, model, value, previousValue);\n        publicAPI.modified();\n        return true;\n      }\n      return false;\n    };\n  }\n};\nfunction findSetter(field) {\n  if (_typeof(field) === 'object') {\n    var fn = objectSetterMap[field.type];\n    if (fn) {\n      return function (publicAPI, model) {\n        return fn(publicAPI, model, field);\n      };\n    }\n    vtkErrorMacro(\"No setter for field \".concat(field));\n    throw new TypeError('No setter for field');\n  }\n  return function getSetter(publicAPI, model) {\n    var onChanged = \"_on\".concat(_capitalize(field), \"Changed\");\n    return function setter(value) {\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n      if (model[field] !== value) {\n        var _model$onChanged3;\n        var previousValue = model[field.name];\n        model[field] = value;\n        (_model$onChanged3 = model[onChanged]) === null || _model$onChanged3 === void 0 ? void 0 : _model$onChanged3.call(model, publicAPI, model, value, previousValue);\n        publicAPI.modified();\n        return true;\n      }\n      return false;\n    };\n  };\n}\nfunction set(publicAPI, model, fields) {\n  fields.forEach(function (field) {\n    if (_typeof(field) === 'object') {\n      publicAPI[\"set\".concat(_capitalize(field.name))] = findSetter(field)(publicAPI, model);\n    } else {\n      publicAPI[\"set\".concat(_capitalize(field))] = findSetter(field)(publicAPI, model);\n    }\n  });\n} // ----------------------------------------------------------------------------\n// set/get XXX: add both setters and getters\n// ----------------------------------------------------------------------------\n\nfunction setGet(publicAPI, model, fieldNames) {\n  get(publicAPI, model, fieldNames);\n  set(publicAPI, model, fieldNames);\n} // ----------------------------------------------------------------------------\n// getXXX: add getters for object of type array with copy to be safe\n// getXXXByReference: add getters for object of type array without copy\n// ----------------------------------------------------------------------------\n\nfunction getArray(publicAPI, model, fieldNames) {\n  fieldNames.forEach(function (field) {\n    publicAPI[\"get\".concat(_capitalize(field))] = function () {\n      return model[field] ? Array.from(model[field]) : model[field];\n    };\n    publicAPI[\"get\".concat(_capitalize(field), \"ByReference\")] = function () {\n      return model[field];\n    };\n  });\n} // ----------------------------------------------------------------------------\n// setXXX: add setter for object of type array\n// if 'defaultVal' is supplied, shorter arrays will be padded to 'size' with 'defaultVal'\n// set...From: fast path to copy the content of an array to the current one without call to modified.\n// ----------------------------------------------------------------------------\n\nfunction setArray(publicAPI, model, fieldNames, size) {\n  var defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n  fieldNames.forEach(function (field) {\n    if (model[field] && size && model[field].length !== size) {\n      throw new RangeError(\"Invalid initial number of values for array (\".concat(field, \")\"));\n    }\n    var onChanged = \"_on\".concat(_capitalize(field), \"Changed\");\n    publicAPI[\"set\".concat(_capitalize(field))] = function () {\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      var array = args;\n      var changeDetected;\n      var needCopy = false; // allow null or an array to be passed as a single arg.\n\n      if (array.length === 1 && (array[0] == null || array[0].length >= 0)) {\n        /* eslint-disable prefer-destructuring */\n        array = array[0];\n        /* eslint-enable prefer-destructuring */\n\n        needCopy = true;\n      }\n      if (array == null) {\n        changeDetected = model[field] !== array;\n      } else {\n        if (size && array.length !== size) {\n          if (array.length < size && defaultVal !== undefined) {\n            array = Array.from(array);\n            needCopy = false;\n            while (array.length < size) {\n              array.push(defaultVal);\n            }\n          } else {\n            throw new RangeError(\"Invalid number of values for array setter (\".concat(field, \")\"));\n          }\n        }\n        changeDetected = model[field] == null || model[field].length !== array.length;\n        for (var i = 0; !changeDetected && i < array.length; ++i) {\n          changeDetected = model[field][i] !== array[i];\n        }\n        if (changeDetected && needCopy) {\n          array = Array.from(array);\n        }\n      }\n      if (changeDetected) {\n        var _model$onChanged4;\n        var previousValue = model[field.name];\n        model[field] = array;\n        (_model$onChanged4 = model[onChanged]) === null || _model$onChanged4 === void 0 ? void 0 : _model$onChanged4.call(model, publicAPI, model, array, previousValue);\n        publicAPI.modified();\n      }\n      return changeDetected;\n    };\n    publicAPI[\"set\".concat(_capitalize(field), \"From\")] = function (otherArray) {\n      var target = model[field];\n      otherArray.forEach(function (v, i) {\n        target[i] = v;\n      });\n    };\n  });\n} // ----------------------------------------------------------------------------\n// set/get XXX: add setter and getter for object of type array\n// ----------------------------------------------------------------------------\n\nfunction setGetArray(publicAPI, model, fieldNames, size) {\n  var defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n  getArray(publicAPI, model, fieldNames);\n  setArray(publicAPI, model, fieldNames, size, defaultVal);\n}\nfunction moveToProtected(publicAPI, model, fieldNames) {\n  for (var i = 0; i < fieldNames.length; i++) {\n    var fieldName = fieldNames[i];\n    if (model[fieldName] !== undefined) {\n      model[\"_\".concat(fieldName)] = model[fieldName];\n      delete model[fieldName];\n    }\n  }\n} // ----------------------------------------------------------------------------\n// vtkAlgorithm: setInputData(), setInputConnection(), getOutputData(), getOutputPort()\n// ----------------------------------------------------------------------------\n\nfunction algo(publicAPI, model, numberOfInputs, numberOfOutputs) {\n  if (model.inputData) {\n    model.inputData = model.inputData.map(vtk);\n  } else {\n    model.inputData = [];\n  }\n  if (model.inputConnection) {\n    model.inputConnection = model.inputConnection.map(vtk);\n  } else {\n    model.inputConnection = [];\n  }\n  if (model.output) {\n    model.output = model.output.map(vtk);\n  } else {\n    model.output = [];\n  }\n  if (model.inputArrayToProcess) {\n    model.inputArrayToProcess = model.inputArrayToProcess.map(vtk);\n  } else {\n    model.inputArrayToProcess = [];\n  } // Cache the argument for later manipulation\n\n  model.numberOfInputs = numberOfInputs; // Methods\n\n  function setInputData(dataset) {\n    var port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (port >= model.numberOfInputs) {\n      vtkErrorMacro(\"algorithm \".concat(publicAPI.getClassName(), \" only has \").concat(model.numberOfInputs, \" input ports. To add more input ports, use addInputData()\"));\n      return;\n    }\n    if (model.inputData[port] !== dataset || model.inputConnection[port]) {\n      model.inputData[port] = dataset;\n      model.inputConnection[port] = null;\n      if (publicAPI.modified) {\n        publicAPI.modified();\n      }\n    }\n  }\n  function getInputData() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (model.inputConnection[port]) {\n      model.inputData[port] = model.inputConnection[port]();\n    }\n    return model.inputData[port];\n  }\n  function setInputConnection(outputPort) {\n    var port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    if (port >= model.numberOfInputs) {\n      var msg = \"algorithm \".concat(publicAPI.getClassName(), \" only has \");\n      msg += \"\".concat(model.numberOfInputs);\n      msg += ' input ports. To add more input ports, use addInputConnection()';\n      vtkErrorMacro(msg);\n      return;\n    }\n    model.inputData[port] = null;\n    model.inputConnection[port] = outputPort;\n  }\n  function getInputConnection() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return model.inputConnection[port];\n  }\n  function getPortToFill() {\n    var portToFill = model.numberOfInputs;\n    while (portToFill && !model.inputData[portToFill - 1] && !model.inputConnection[portToFill - 1]) {\n      portToFill--;\n    }\n    if (portToFill === model.numberOfInputs) {\n      model.numberOfInputs++;\n    }\n    return portToFill;\n  }\n  function addInputConnection(outputPort) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    setInputConnection(outputPort, getPortToFill());\n  }\n  function addInputData(dataset) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    setInputData(dataset, getPortToFill());\n  }\n  function getOutputData() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n    if (publicAPI.shouldUpdate()) {\n      publicAPI.update();\n    }\n    return model.output[port];\n  }\n  publicAPI.shouldUpdate = function () {\n    var localMTime = publicAPI.getMTime();\n    var minOutputMTime = Infinity;\n    var count = numberOfOutputs;\n    while (count--) {\n      if (!model.output[count] || model.output[count].isDeleted()) {\n        return true;\n      }\n      var mt = model.output[count].getMTime();\n      if (mt < localMTime) {\n        return true;\n      }\n      if (mt < minOutputMTime) {\n        minOutputMTime = mt;\n      }\n    }\n    count = model.numberOfInputs;\n    while (count--) {\n      var _model$inputConnectio, _publicAPI$getInputDa;\n      if ((_model$inputConnectio = model.inputConnection[count]) !== null && _model$inputConnectio !== void 0 && _model$inputConnectio.filter.shouldUpdate() || ((_publicAPI$getInputDa = publicAPI.getInputData(count)) === null || _publicAPI$getInputDa === void 0 ? void 0 : _publicAPI$getInputDa.getMTime()) > minOutputMTime) {\n        return true;\n      }\n    }\n    return false;\n  };\n  function getOutputPort() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    var outputPortAccess = function outputPortAccess() {\n      return getOutputData(port);\n    }; // Add reference to filter\n\n    outputPortAccess.filter = publicAPI;\n    return outputPortAccess;\n  } // Handle input if needed\n\n  if (model.numberOfInputs) {\n    // Reserve inputs\n    var count = model.numberOfInputs;\n    while (count--) {\n      model.inputData.push(null);\n      model.inputConnection.push(null);\n    } // Expose public methods\n\n    publicAPI.setInputData = setInputData;\n    publicAPI.setInputConnection = setInputConnection;\n    publicAPI.addInputData = addInputData;\n    publicAPI.addInputConnection = addInputConnection;\n    publicAPI.getInputData = getInputData;\n    publicAPI.getInputConnection = getInputConnection;\n  }\n  if (numberOfOutputs) {\n    publicAPI.getOutputData = getOutputData;\n    publicAPI.getOutputPort = getOutputPort;\n  }\n  publicAPI.update = function () {\n    var ins = [];\n    if (model.numberOfInputs) {\n      var _count = 0;\n      while (_count < model.numberOfInputs) {\n        ins[_count] = publicAPI.getInputData(_count);\n        _count++;\n      }\n    }\n    if (publicAPI.shouldUpdate() && publicAPI.requestData) {\n      publicAPI.requestData(ins, model.output);\n    }\n  };\n  publicAPI.getNumberOfInputPorts = function () {\n    return model.numberOfInputs;\n  };\n  publicAPI.getNumberOfOutputPorts = function () {\n    return numberOfOutputs || model.output.length;\n  };\n  publicAPI.getInputArrayToProcess = function (inputPort) {\n    var arrayDesc = model.inputArrayToProcess[inputPort];\n    var ds = model.inputData[inputPort];\n    if (arrayDesc && ds) {\n      return ds[\"get\".concat(arrayDesc.fieldAssociation)]().getArray(arrayDesc.arrayName);\n    }\n    return null;\n  };\n  publicAPI.setInputArrayToProcess = function (inputPort, arrayName, fieldAssociation) {\n    var attributeType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'Scalars';\n    while (model.inputArrayToProcess.length < inputPort) {\n      model.inputArrayToProcess.push(null);\n    }\n    model.inputArrayToProcess[inputPort] = {\n      arrayName: arrayName,\n      fieldAssociation: fieldAssociation,\n      attributeType: attributeType\n    };\n  };\n} // ----------------------------------------------------------------------------\n// Event handling: onXXX(callback), invokeXXX(args...)\n// ----------------------------------------------------------------------------\n\nvar EVENT_ABORT = Symbol('Event abort');\nfunction event(publicAPI, model, eventName) {\n  var callbacks = [];\n  var previousDelete = publicAPI.delete;\n  var curCallbackID = 1;\n  function off(callbackID) {\n    for (var i = 0; i < callbacks.length; ++i) {\n      var _callbacks$i = _slicedToArray(callbacks[i], 1),\n        cbID = _callbacks$i[0];\n      if (cbID === callbackID) {\n        callbacks.splice(i, 1);\n        return;\n      }\n    }\n  }\n  function on(callbackID) {\n    function unsubscribe() {\n      off(callbackID);\n    }\n    return Object.freeze({\n      unsubscribe: unsubscribe\n    });\n  }\n  function invoke() {\n    var _arguments = arguments;\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    /* eslint-disable prefer-rest-params */\n    // Go through a copy of the callbacks array in case new callbacks\n    // get prepended within previous callbacks\n\n    var currentCallbacks = callbacks.slice();\n    var _loop = function _loop(index) {\n      var _currentCallbacks$ind = _slicedToArray(currentCallbacks[index], 3),\n        cb = _currentCallbacks$ind[1],\n        priority = _currentCallbacks$ind[2];\n      if (!cb) {\n        return \"continue\"; // eslint-disable-line\n      }\n\n      if (priority < 0) {\n        setTimeout(function () {\n          return cb.apply(publicAPI, _arguments);\n        }, 1 - priority);\n      } else {\n        // Abort only if the callback explicitly returns false\n        var continueNext = cb.apply(publicAPI, _arguments);\n        if (continueNext === EVENT_ABORT) {\n          return \"break\";\n        }\n      }\n    };\n    for (var index = 0; index < currentCallbacks.length; ++index) {\n      var _ret = _loop(index);\n      if (_ret === \"continue\") continue;\n      if (_ret === \"break\") break;\n    }\n    /* eslint-enable prefer-rest-params */\n  }\n\n  publicAPI[\"invoke\".concat(_capitalize(eventName))] = invoke;\n  publicAPI[\"on\".concat(_capitalize(eventName))] = function (callback) {\n    var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n    if (!callback.apply) {\n      console.error(\"Invalid callback for event \".concat(eventName));\n      return null;\n    }\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n    var callbackID = curCallbackID++;\n    callbacks.push([callbackID, callback, priority]);\n    callbacks.sort(function (cb1, cb2) {\n      return cb2[2] - cb1[2];\n    });\n    return on(callbackID);\n  };\n  publicAPI.delete = function () {\n    previousDelete();\n    callbacks.forEach(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 1),\n        cbID = _ref3[0];\n      return off(cbID);\n    });\n  };\n} // ----------------------------------------------------------------------------\n// newInstance\n// ----------------------------------------------------------------------------\n\nfunction newInstance(extend, className) {\n  var constructor = function constructor() {\n    var initialValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var model = {};\n    var publicAPI = {};\n    extend(publicAPI, model, initialValues);\n    return Object.freeze(publicAPI);\n  }; // Register constructor to factory\n\n  if (className) {\n    vtk.register(className, constructor);\n  }\n  return constructor;\n} // ----------------------------------------------------------------------------\n// Chain function calls\n// ----------------------------------------------------------------------------\n\nfunction chain() {\n  for (var _len5 = arguments.length, fn = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    fn[_key5] = arguments[_key5];\n  }\n  return function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n    return fn.filter(function (i) {\n      return !!i;\n    }).map(function (i) {\n      return i.apply(void 0, args);\n    });\n  };\n} // ----------------------------------------------------------------------------\n// Some utility methods for vtk objects\n// ----------------------------------------------------------------------------\n\nfunction isVtkObject(instance) {\n  return instance && instance.isA && instance.isA('vtkObject');\n}\nfunction traverseInstanceTree(instance, extractFunction) {\n  var accumulator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var visitedInstances = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  if (isVtkObject(instance)) {\n    if (visitedInstances.indexOf(instance) >= 0) {\n      // avoid cycles\n      return accumulator;\n    }\n    visitedInstances.push(instance);\n    var result = extractFunction(instance);\n    if (result !== undefined) {\n      accumulator.push(result);\n    } // Now go through this instance's model\n\n    var model = instance.get();\n    Object.keys(model).forEach(function (key) {\n      var modelObj = model[key];\n      if (Array.isArray(modelObj)) {\n        modelObj.forEach(function (subObj) {\n          traverseInstanceTree(subObj, extractFunction, accumulator, visitedInstances);\n        });\n      } else {\n        traverseInstanceTree(modelObj, extractFunction, accumulator, visitedInstances);\n      }\n    });\n  }\n  return accumulator;\n} // ----------------------------------------------------------------------------\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n  var timeout;\n  var debounced = function debounced() {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n    var context = _this;\n    var later = function later() {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n  debounced.cancel = function () {\n    return clearTimeout(timeout);\n  };\n  return debounced;\n} // ----------------------------------------------------------------------------\n// Creates a throttled function that only invokes `func` at most once per\n// every `wait` milliseconds.\n\nfunction throttle(callback, delay) {\n  var isThrottled = false;\n  var argsToUse = null;\n  function next() {\n    isThrottled = false;\n    if (argsToUse !== null) {\n      wrapper.apply(void 0, _toConsumableArray(argsToUse)); // eslint-disable-line\n\n      argsToUse = null;\n    }\n  }\n  function wrapper() {\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n    if (isThrottled) {\n      argsToUse = args;\n      return;\n    }\n    isThrottled = true;\n    callback.apply(void 0, args);\n    setTimeout(next, delay);\n  }\n  return wrapper;\n} // ----------------------------------------------------------------------------\n// keystore(publicAPI, model, initialKeystore)\n//\n//    - initialKeystore: Initial keystore. This can be either a Map or an\n//      object.\n//\n// Generated API\n//  setKey(key, value) : mixed (returns value)\n//  getKey(key) : mixed\n//  getAllKeys() : [mixed]\n//  deleteKey(key) : Boolean\n// ----------------------------------------------------------------------------\n\nfunction keystore(publicAPI, model) {\n  var initialKeystore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  model.keystore = Object.assign(model.keystore || {}, initialKeystore);\n  publicAPI.setKey = function (key, value) {\n    model.keystore[key] = value;\n  };\n  publicAPI.getKey = function (key) {\n    return model.keystore[key];\n  };\n  publicAPI.getAllKeys = function () {\n    return Object.keys(model.keystore);\n  };\n  publicAPI.deleteKey = function (key) {\n    return delete model.keystore[key];\n  };\n  publicAPI.clearKeystore = function () {\n    return publicAPI.getAllKeys().forEach(function (key) {\n      return delete model.keystore[key];\n    });\n  };\n} // ----------------------------------------------------------------------------\n// proxy(publicAPI, model, sectionName, propertyUI)\n//\n//    - sectionName: Name of the section for UI\n//    - propertyUI: List of props with their UI description\n//\n// Generated API\n//  getProxyId() : String\n//  listProxyProperties() : [string]\n//  updateProxyProperty(name, prop)\n//  getProxySection() => List of properties for UI generation\n// ----------------------------------------------------------------------------\n\nvar nextProxyId = 1;\nvar ROOT_GROUP_NAME = '__root__';\nfunction proxy(publicAPI, model) {\n  // Proxies are keystores\n  keystore(publicAPI, model);\n  var parentDelete = publicAPI.delete; // getProxyId\n\n  model.proxyId = \"\".concat(nextProxyId++); // ui handling\n\n  model.ui = JSON.parse(JSON.stringify(model.ui || [])); // deep copy\n\n  get(publicAPI, model, ['proxyId', 'proxyGroup', 'proxyName']);\n  setGet(publicAPI, model, ['proxyManager']); // group properties\n\n  var propertyMap = {};\n  var groupChildrenNames = {};\n  function registerProperties(descriptionList, currentGroupName) {\n    if (!groupChildrenNames[currentGroupName]) {\n      groupChildrenNames[currentGroupName] = [];\n    }\n    var childrenNames = groupChildrenNames[currentGroupName];\n    for (var i = 0; i < descriptionList.length; i++) {\n      childrenNames.push(descriptionList[i].name);\n      propertyMap[descriptionList[i].name] = descriptionList[i];\n      if (descriptionList[i].children && descriptionList[i].children.length) {\n        registerProperties(descriptionList[i].children, descriptionList[i].name);\n      }\n    }\n  }\n  registerProperties(model.ui, ROOT_GROUP_NAME);\n  publicAPI.updateUI = function (ui) {\n    model.ui = JSON.parse(JSON.stringify(ui || [])); // deep copy\n\n    Object.keys(propertyMap).forEach(function (k) {\n      return delete propertyMap[k];\n    });\n    Object.keys(groupChildrenNames).forEach(function (k) {\n      return delete groupChildrenNames[k];\n    });\n    registerProperties(model.ui, ROOT_GROUP_NAME);\n    publicAPI.modified();\n  };\n  function listProxyProperties() {\n    var gName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n    return groupChildrenNames[gName];\n  }\n  publicAPI.updateProxyProperty = function (propertyName, propUI) {\n    var prop = propertyMap[propertyName];\n    if (prop) {\n      Object.assign(prop, propUI);\n    } else {\n      propertyMap[propertyName] = _objectSpread({}, propUI);\n    }\n  };\n  publicAPI.activate = function () {\n    if (model.proxyManager) {\n      var setActiveMethod = \"setActive\".concat(_capitalize(publicAPI.getProxyGroup().slice(0, -1)));\n      if (model.proxyManager[setActiveMethod]) {\n        model.proxyManager[setActiveMethod](publicAPI);\n      }\n    }\n  }; // property link\n\n  model.propertyLinkSubscribers = {};\n  publicAPI.registerPropertyLinkForGC = function (otherLink, type) {\n    if (!(type in model.propertyLinkSubscribers)) {\n      model.propertyLinkSubscribers[type] = [];\n    }\n    model.propertyLinkSubscribers[type].push(otherLink);\n  };\n  publicAPI.gcPropertyLinks = function (type) {\n    var subscribers = model.propertyLinkSubscribers[type] || [];\n    while (subscribers.length) {\n      subscribers.pop().unbind(publicAPI);\n    }\n  };\n  model.propertyLinkMap = {};\n  publicAPI.getPropertyLink = function (id) {\n    var persistent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (model.propertyLinkMap[id]) {\n      return model.propertyLinkMap[id];\n    }\n    var value = null;\n    var links = [];\n    var count = 0;\n    var updateInProgress = false;\n    function update(source) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (updateInProgress) {\n        return null;\n      }\n      var needUpdate = [];\n      var sourceLink = null;\n      count = links.length;\n      while (count--) {\n        var link = links[count];\n        if (link.instance === source) {\n          sourceLink = link;\n        } else {\n          needUpdate.push(link);\n        }\n      }\n      if (!sourceLink) {\n        return null;\n      }\n      var newValue = sourceLink.instance[\"get\".concat(_capitalize(sourceLink.propertyName))]();\n      if (!shallowEquals(newValue, value) || force) {\n        value = newValue;\n        updateInProgress = true;\n        while (needUpdate.length) {\n          var linkToUpdate = needUpdate.pop();\n          linkToUpdate.instance.set(_defineProperty({}, linkToUpdate.propertyName, value));\n        }\n        updateInProgress = false;\n      }\n      if (model.propertyLinkMap[id].persistent) {\n        model.propertyLinkMap[id].value = newValue;\n      }\n      return newValue;\n    }\n    function unbind(instance, propertyName) {\n      var indexToDelete = [];\n      count = links.length;\n      while (count--) {\n        var link = links[count];\n        if (link.instance === instance && (link.propertyName === propertyName || propertyName === undefined)) {\n          link.subscription.unsubscribe();\n          indexToDelete.push(count);\n        }\n      }\n      while (indexToDelete.length) {\n        links.splice(indexToDelete.pop(), 1);\n      }\n    }\n    function bind(instance, propertyName) {\n      var updateMe = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var subscription = instance.onModified(update);\n      var other = links[0];\n      links.push({\n        instance: instance,\n        propertyName: propertyName,\n        subscription: subscription\n      });\n      if (updateMe) {\n        if (model.propertyLinkMap[id].persistent && model.propertyLinkMap[id].value !== undefined) {\n          instance.set(_defineProperty({}, propertyName, model.propertyLinkMap[id].value));\n        } else if (other) {\n          update(other.instance, true);\n        }\n      }\n      return {\n        unsubscribe: function unsubscribe() {\n          return unbind(instance, propertyName);\n        }\n      };\n    }\n    function unsubscribe() {\n      while (links.length) {\n        links.pop().subscription.unsubscribe();\n      }\n    }\n    var linkHandler = {\n      bind: bind,\n      unbind: unbind,\n      unsubscribe: unsubscribe,\n      persistent: persistent\n    };\n    model.propertyLinkMap[id] = linkHandler;\n    return linkHandler;\n  }; // extract values\n\n  function getProperties() {\n    var groupName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n    var values = [];\n    var id = model.proxyId;\n    var propertyNames = listProxyProperties(groupName) || [];\n    for (var i = 0; i < propertyNames.length; i++) {\n      var name = propertyNames[i];\n      var method = publicAPI[\"get\".concat(_capitalize(name))];\n      var value = method ? method() : undefined;\n      var prop = {\n        id: id,\n        name: name,\n        value: value\n      };\n      var children = getProperties(name);\n      if (children.length) {\n        prop.children = children;\n      }\n      values.push(prop);\n    }\n    return values;\n  }\n  publicAPI.listPropertyNames = function () {\n    return getProperties().map(function (p) {\n      return p.name;\n    });\n  };\n  publicAPI.getPropertyByName = function (name) {\n    return getProperties().find(function (p) {\n      return p.name === name;\n    });\n  };\n  publicAPI.getPropertyDomainByName = function (name) {\n    return (propertyMap[name] || {}).domain;\n  }; // ui section\n\n  publicAPI.getProxySection = function () {\n    return {\n      id: model.proxyId,\n      name: model.proxyGroup,\n      ui: model.ui,\n      properties: getProperties()\n    };\n  }; // free resources\n\n  publicAPI.delete = function () {\n    var list = Object.keys(model.propertyLinkMap);\n    var count = list.length;\n    while (count--) {\n      model.propertyLinkMap[list[count]].unsubscribe();\n    }\n    Object.keys(model.propertyLinkSubscribers).forEach(publicAPI.gcPropertyLinks);\n    parentDelete();\n  }; // @todo fix infinite recursion due to active source\n\n  publicAPI.getState = function () {\n    return null;\n  };\n  function registerLinks() {\n    // Allow dynamic registration of links at the application level\n    if (model.links) {\n      for (var i = 0; i < model.links.length; i++) {\n        var _model$links$i = model.links[i],\n          link = _model$links$i.link,\n          property = _model$links$i.property,\n          persistent = _model$links$i.persistent,\n          updateOnBind = _model$links$i.updateOnBind,\n          type = _model$links$i.type;\n        if (type === 'application') {\n          var sLink = model.proxyManager.getPropertyLink(link, persistent);\n          publicAPI.registerPropertyLinkForGC(sLink, 'application');\n          sLink.bind(publicAPI, property, updateOnBind);\n        }\n      }\n    }\n  }\n  setImmediateVTK(registerLinks);\n} // ----------------------------------------------------------------------------\n// proxyPropertyMapping(publicAPI, model, map)\n//\n//   map = {\n//      opacity: { modelKey: 'property', property: 'opacity' },\n//   }\n//\n// Generated API:\n//  Elevate set/get methods from internal object stored in the model to current one\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyMapping(publicAPI, model, map) {\n  var parentDelete = publicAPI.delete;\n  var subscriptions = [];\n  var propertyNames = Object.keys(map);\n  var count = propertyNames.length;\n  while (count--) {\n    var propertyName = propertyNames[count];\n    var _map$propertyName = map[propertyName],\n      modelKey = _map$propertyName.modelKey,\n      property = _map$propertyName.property,\n      _map$propertyName$mod = _map$propertyName.modified,\n      modified = _map$propertyName$mod === void 0 ? true : _map$propertyName$mod;\n    var methodSrc = _capitalize(property);\n    var methodDst = _capitalize(propertyName);\n    publicAPI[\"get\".concat(methodDst)] = model[modelKey][\"get\".concat(methodSrc)];\n    publicAPI[\"set\".concat(methodDst)] = model[modelKey][\"set\".concat(methodSrc)];\n    if (modified) {\n      subscriptions.push(model[modelKey].onModified(publicAPI.modified));\n    }\n  }\n  publicAPI.delete = function () {\n    while (subscriptions.length) {\n      subscriptions.pop().unsubscribe();\n    }\n    parentDelete();\n  };\n} // ----------------------------------------------------------------------------\n// proxyPropertyState(publicAPI, model, state, defaults)\n//\n//   state = {\n//     representation: {\n//       'Surface with edges': { property: { edgeVisibility: true, representation: 2 } },\n//       Surface: { property: { edgeVisibility: false, representation: 2 } },\n//       Wireframe: { property: { edgeVisibility: false, representation: 1 } },\n//       Points: { property: { edgeVisibility: false, representation: 0 } },\n//     },\n//   }\n//\n//   defaults = {\n//      representation: 'Surface',\n//   }\n//\n// Generated API\n//   get / set Representation ( string ) => push state to various internal objects\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyState(publicAPI, model) {\n  var state = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var defaults = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  model.this = publicAPI;\n  function applyState(map) {\n    var modelKeys = Object.keys(map);\n    var count = modelKeys.length;\n    while (count--) {\n      var modelKey = modelKeys[count];\n      model[modelKey].set(map[modelKey]);\n    }\n  }\n  var modelKeys = Object.keys(defaults);\n  var count = modelKeys.length;\n  var _loop2 = function _loop2() {\n    // Add default\n    var key = modelKeys[count];\n    model[key] = defaults[key]; // Add set method\n\n    var mapping = state[key];\n    publicAPI[\"set\".concat(_capitalize(key))] = function (value) {\n      if (value !== model[key]) {\n        model[key] = value;\n        var propValues = mapping[value];\n        applyState(propValues);\n        publicAPI.modified();\n      }\n    };\n  };\n  while (count--) {\n    _loop2();\n  } // Add getter\n\n  if (modelKeys.length) {\n    get(publicAPI, model, modelKeys);\n  }\n} // ----------------------------------------------------------------------------\n// From : https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\n//\n//\n// Copyright (c) 2015, Facebook, Inc.\n// All rights reserved.\n//\n// This source code is licensed under the BSD-style license found in the\n// LICENSE file in the root directory of this source tree. An additional grant\n// of patent rights can be found in the PATENTS file in the same directory.\n//\n//\n// Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n// complicated, thus this doc is long and (hopefully) detailed enough to answer\n// your questions.\n//\n// If you need to react to the mouse wheel in a predictable way, this code is\n// like your bestest friend.// hugs//\n//\n// As of today, there are 4 DOM event types you can listen to:\n//\n//   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n//   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n//   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n//   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n//\n// So what to do?  The is the best:\n//\n//   normalizeWheel.getEventType();\n//\n// In your event callback, use this code to get sane interpretation of the\n// deltas.  This code will return an object with properties:\n//\n//   spinX   -- normalized spin speed (use for zoom) - x plane\n//   spinY   -- \" - y plane\n//   pixelX  -- normalized distance (to pixels) - x plane\n//   pixelY  -- \" - y plane\n//\n// Wheel values are provided by the browser assuming you are using the wheel to\n// scroll a web page by a number of lines or pixels (or pages).  Values can vary\n// significantly on different platforms and browsers, forgetting that you can\n// scroll at different speeds.  Some devices (like trackpads) emit more events\n// at smaller increments with fine granularity, and some emit massive jumps with\n// linear speed or acceleration.\n//\n// This code does its best to normalize the deltas for you:\n//\n//   - spin is trying to normalize how far the wheel was spun (or trackpad\n//     dragged).  This is super useful for zoom support where you want to\n//     throw away the chunky scroll steps on the PC and make those equal to\n//     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n//     resolve a single slow step on a wheel to 1.\n//\n//   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n//     get the crazy differences between browsers, but at least it'll be in\n//     pixels!\n//\n//   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n//     should translate to positive value zooming IN, negative zooming OUT.\n//     This matches the newer 'wheel' event.\n//\n// Why are there spinX, spinY (or pixels)?\n//\n//   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n//     with a mouse.  It results in side-scrolling in the browser by default.\n//\n//   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n//\n//   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n//     probably is by browsers in conjunction with fancy 3D controllers .. but\n//     you know.\n//\n// Implementation info:\n//\n// Examples of 'wheel' event if you scroll slowly (down) by one step with an\n// average mouse:\n//\n//   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n//   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n//   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n//   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n//   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n//\n// On the trackpad:\n//\n//   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n//   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n//\n// On other/older browsers.. it's more complicated as there can be multiple and\n// also missing delta values.\n//\n// The 'wheel' event is more standard:\n//\n// http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n//\n// The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n// deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n// backward compatibility with older events.  Those other values help us\n// better normalize spin speed.  Example of what the browsers provide:\n//\n//                          | event.wheelDelta | event.detail\n//        ------------------+------------------+--------------\n//          Safari v5/OS X  |       -120       |       0\n//          Safari v5/Win7  |       -120       |       0\n//         Chrome v17/OS X  |       -120       |       0\n//         Chrome v17/Win7  |       -120       |       0\n//                IE9/Win7  |       -120       |   undefined\n//         Firefox v4/OS X  |     undefined    |       1\n//         Firefox v4/Win7  |     undefined    |       3\n//\n// ----------------------------------------------------------------------------\n// Reasonable defaults\n\nvar PIXEL_STEP = 10;\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\nfunction normalizeWheel(wheelEvent) {\n  var sX = 0; // spinX\n\n  var sY = 0; // spinY\n\n  var pX = 0; // pixelX\n\n  var pY = 0; // pixelY\n  // Legacy\n\n  if ('detail' in wheelEvent) {\n    sY = wheelEvent.detail;\n  }\n  if ('wheelDelta' in wheelEvent) {\n    sY = -wheelEvent.wheelDelta / 120;\n  }\n  if ('wheelDeltaY' in wheelEvent) {\n    sY = -wheelEvent.wheelDeltaY / 120;\n  }\n  if ('wheelDeltaX' in wheelEvent) {\n    sX = -wheelEvent.wheelDeltaX / 120;\n  } // side scrolling on FF with DOMMouseScroll\n\n  if ('axis' in wheelEvent && wheelEvent.axis === wheelEvent.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n  if ('deltaY' in wheelEvent) {\n    pY = wheelEvent.deltaY;\n  }\n  if ('deltaX' in wheelEvent) {\n    pX = wheelEvent.deltaX;\n  }\n  if ((pX || pY) && wheelEvent.deltaMode) {\n    if (wheelEvent.deltaMode === 1) {\n      // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {\n      // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  } // Fall-back if spin cannot be determined\n\n  if (pX && !sX) {\n    sX = pX < 1 ? -1 : 1;\n  }\n  if (pY && !sY) {\n    sY = pY < 1 ? -1 : 1;\n  }\n  return {\n    spinX: sX,\n    spinY: sY,\n    pixelX: pX,\n    pixelY: pY\n  };\n} // ----------------------------------------------------------------------------\n// Default export\n// ----------------------------------------------------------------------------\n\nvar macro = {\n  algo: algo,\n  capitalize: capitalize,\n  chain: chain,\n  debounce: debounce,\n  enumToString: enumToString,\n  event: event,\n  EVENT_ABORT: EVENT_ABORT,\n  formatBytesToProperUnit: formatBytesToProperUnit,\n  formatNumbersWithThousandSeparator: formatNumbersWithThousandSeparator,\n  get: get,\n  getArray: getArray,\n  getCurrentGlobalMTime: getCurrentGlobalMTime,\n  getStateArrayMapFunc: getStateArrayMapFunc,\n  isVtkObject: isVtkObject,\n  keystore: keystore,\n  measurePromiseExecution: measurePromiseExecution,\n  moveToProtected: moveToProtected,\n  newInstance: newInstance,\n  newTypedArray: newTypedArray,\n  newTypedArrayFrom: newTypedArrayFrom,\n  normalizeWheel: normalizeWheel,\n  obj: obj,\n  proxy: proxy,\n  proxyPropertyMapping: proxyPropertyMapping,\n  proxyPropertyState: proxyPropertyState,\n  safeArrays: safeArrays,\n  set: set,\n  setArray: setArray,\n  setGet: setGet,\n  setGetArray: setGetArray,\n  setImmediate: setImmediateVTK,\n  setLoggerFunction: setLoggerFunction,\n  throttle: throttle,\n  traverseInstanceTree: traverseInstanceTree,\n  TYPED_ARRAYS: TYPED_ARRAYS,\n  // deprecated todo remove on breaking API revision\n  uncapitalize: uncapitalize,\n  VOID: VOID,\n  vtkDebugMacro: vtkDebugMacro,\n  vtkErrorMacro: vtkErrorMacro,\n  vtkInfoMacro: vtkInfoMacro,\n  vtkLogMacro: vtkLogMacro,\n  vtkOnceErrorMacro: vtkOnceErrorMacro,\n  vtkWarningMacro: vtkWarningMacro\n};\nexport { EVENT_ABORT, TYPED_ARRAYS, VOID, _capitalize, algo, capitalize, chain, debounce, macro as default, event, formatBytesToProperUnit, formatNumbersWithThousandSeparator, get, getArray, isVtkObject, keystore, measurePromiseExecution, moveToProtected, newInstance, newTypedArray, newTypedArrayFrom, normalizeWheel, obj, proxy, proxyPropertyMapping, proxyPropertyState, set, setArray, setGet, setGetArray, setImmediateVTK, setLoggerFunction, throttle, traverseInstanceTree, uncapitalize, vtkDebugMacro, vtkErrorMacro, vtkInfoMacro, vtkLogMacro, vtkOnceErrorMacro, vtkWarningMacro };","map":{"version":3,"names":["_slicedToArray","_typeof","_defineProperty","_toConsumableArray","_construct","DeepEqual","vtk","vtkGlobal","ClassHierarchy","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","globalMTime","VOID","Symbol","getCurrentGlobalMTime","fakeConsole","noOp","consoleMethods","methodName","console","hasOwnProperty","loggerFunctions","debug","error","info","log","warn","setLoggerFunction","name","fn","vtkLogMacro","vtkInfoMacro","vtkDebugMacro","vtkErrorMacro","vtkWarningMacro","ERROR_ONCE_MAP","vtkOnceErrorMacro","str","TYPED_ARRAYS","create","Float32Array","Float64Array","Uint8Array","Int8Array","Uint16Array","Int16Array","Uint32Array","Int32Array","Uint8ClampedArray","BigInt64Array","BigUint64Array","_unused","newTypedArray","type","_len","args","Array","_key","newTypedArrayFrom","_ref","_len2","_key2","from","capitalize","charAt","toUpperCase","slice","_capitalize","uncapitalize","toLowerCase","formatBytesToProperUnit","size","precision","undefined","chunkSize","units","value","Number","currentUnit","pop","concat","toFixed","formatNumbersWithThousandSeparator","n","separator","sections","Math","floor","reverse","join","safeArrays","model","isArray","shallowEquals","a","b","enumToString","e","find","getStateArrayMapFunc","item","isA","getState","setImmediateVTK","setTimeout","measurePromiseExecution","promise","callback","start","performance","now","finally","delta","obj","publicAPI","callbacks","isInteger","mtime","classHierarchy","hierarchy","off","index","on","unsubscribe","freeze","isDeleted","deleted","modified","otherMTime","getMTime","onModified","className","count","getClassName","depth","set","map","noWarning","noFunction","ret","indexOf","get","_len3","list","_key3","subset","getReferenceByName","val","delete","field","el","jsonArchive","vtkClass","keyName","sortedObj","sort","shallowCopy","other","Error","otherModel","keyList","otherKeyList","keyIdx","splice","toJSON","vtkObjToJSON","objectGetterMap","getter","fieldNames","objectSetterMap","enum","_enum","onChanged","RangeError","_model$onChanged","previousValue","call","TypeError","_model$onChanged2","findSetter","getSetter","setter","_model$onChanged3","fields","setGet","getArray","setArray","defaultVal","_len4","_key4","array","changeDetected","needCopy","_model$onChanged4","otherArray","v","setGetArray","moveToProtected","fieldName","algo","numberOfInputs","numberOfOutputs","inputData","inputConnection","output","inputArrayToProcess","setInputData","dataset","port","getInputData","setInputConnection","outputPort","msg","getInputConnection","getPortToFill","portToFill","addInputConnection","addInputData","getOutputData","shouldUpdate","update","localMTime","minOutputMTime","Infinity","mt","_model$inputConnectio","_publicAPI$getInputDa","getOutputPort","outputPortAccess","ins","_count","requestData","getNumberOfInputPorts","getNumberOfOutputPorts","getInputArrayToProcess","inputPort","arrayDesc","ds","fieldAssociation","arrayName","setInputArrayToProcess","attributeType","EVENT_ABORT","event","eventName","previousDelete","curCallbackID","callbackID","_callbacks$i","cbID","invoke","_arguments","currentCallbacks","_loop","_currentCallbacks$ind","cb","priority","continueNext","_ret","cb1","cb2","_ref2","_ref3","newInstance","extend","constructor","initialValues","register","chain","_len5","_key5","_len6","_key6","isVtkObject","instance","traverseInstanceTree","extractFunction","accumulator","visitedInstances","result","modelObj","subObj","debounce","func","wait","immediate","_this","timeout","debounced","_len7","_key7","context","later","callNow","clearTimeout","cancel","throttle","delay","isThrottled","argsToUse","next","wrapper","_len8","_key8","keystore","initialKeystore","assign","setKey","getKey","getAllKeys","deleteKey","clearKeystore","nextProxyId","ROOT_GROUP_NAME","proxy","parentDelete","proxyId","ui","JSON","parse","stringify","propertyMap","groupChildrenNames","registerProperties","descriptionList","currentGroupName","childrenNames","children","updateUI","k","listProxyProperties","gName","updateProxyProperty","propertyName","propUI","prop","activate","proxyManager","setActiveMethod","getProxyGroup","propertyLinkSubscribers","registerPropertyLinkForGC","otherLink","gcPropertyLinks","subscribers","unbind","propertyLinkMap","getPropertyLink","id","persistent","links","updateInProgress","force","needUpdate","sourceLink","link","newValue","linkToUpdate","indexToDelete","subscription","bind","updateMe","linkHandler","getProperties","groupName","values","propertyNames","method","listPropertyNames","p","getPropertyByName","getPropertyDomainByName","domain","getProxySection","proxyGroup","properties","registerLinks","_model$links$i","property","updateOnBind","sLink","proxyPropertyMapping","subscriptions","_map$propertyName","modelKey","_map$propertyName$mod","methodSrc","methodDst","proxyPropertyState","state","defaults","this","applyState","modelKeys","_loop2","mapping","propValues","PIXEL_STEP","LINE_HEIGHT","PAGE_HEIGHT","normalizeWheel","wheelEvent","sX","sY","pX","pY","detail","wheelDelta","wheelDeltaY","wheelDeltaX","axis","HORIZONTAL_AXIS","deltaY","deltaX","deltaMode","spinX","spinY","pixelX","pixelY","macro","setImmediate","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/macros.js"],"sourcesContent":["import _slicedToArray from '@babel/runtime/helpers/slicedToArray';\nimport _typeof from '@babel/runtime/helpers/typeof';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _toConsumableArray from '@babel/runtime/helpers/toConsumableArray';\nimport _construct from '@babel/runtime/helpers/construct';\nimport DeepEqual from 'fast-deep-equal';\nimport vtk, { vtkGlobal } from './vtk.js';\nimport ClassHierarchy from './Common/Core/ClassHierarchy.js';\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nvar globalMTime = 0;\nvar VOID = Symbol('void');\n\nfunction getCurrentGlobalMTime() {\n  return globalMTime;\n} // ----------------------------------------------------------------------------\n// Logging function calls\n// ----------------------------------------------------------------------------\n\n/* eslint-disable no-prototype-builtins                                      */\n\n\nvar fakeConsole = {};\n\nfunction noOp() {}\n\nvar consoleMethods = ['log', 'debug', 'info', 'warn', 'error', 'time', 'timeEnd', 'group', 'groupEnd'];\nconsoleMethods.forEach(function (methodName) {\n  fakeConsole[methodName] = noOp;\n});\nvtkGlobal.console = console.hasOwnProperty('log') ? console : fakeConsole;\nvar loggerFunctions = {\n  debug: noOp,\n  // Don't print debug by default\n  error: vtkGlobal.console.error || noOp,\n  info: vtkGlobal.console.info || noOp,\n  log: vtkGlobal.console.log || noOp,\n  warn: vtkGlobal.console.warn || noOp\n};\nfunction setLoggerFunction(name, fn) {\n  if (loggerFunctions[name]) {\n    loggerFunctions[name] = fn || noOp;\n  }\n}\nfunction vtkLogMacro() {\n  loggerFunctions.log.apply(loggerFunctions, arguments);\n}\nfunction vtkInfoMacro() {\n  loggerFunctions.info.apply(loggerFunctions, arguments);\n}\nfunction vtkDebugMacro() {\n  loggerFunctions.debug.apply(loggerFunctions, arguments);\n}\nfunction vtkErrorMacro() {\n  loggerFunctions.error.apply(loggerFunctions, arguments);\n}\nfunction vtkWarningMacro() {\n  loggerFunctions.warn.apply(loggerFunctions, arguments);\n}\nvar ERROR_ONCE_MAP = {};\nfunction vtkOnceErrorMacro(str) {\n  if (!ERROR_ONCE_MAP[str]) {\n    loggerFunctions.error(str);\n    ERROR_ONCE_MAP[str] = true;\n  }\n} // ----------------------------------------------------------------------------\n// TypedArray\n// ----------------------------------------------------------------------------\n\nvar TYPED_ARRAYS = Object.create(null);\nTYPED_ARRAYS.Float32Array = Float32Array;\nTYPED_ARRAYS.Float64Array = Float64Array;\nTYPED_ARRAYS.Uint8Array = Uint8Array;\nTYPED_ARRAYS.Int8Array = Int8Array;\nTYPED_ARRAYS.Uint16Array = Uint16Array;\nTYPED_ARRAYS.Int16Array = Int16Array;\nTYPED_ARRAYS.Uint32Array = Uint32Array;\nTYPED_ARRAYS.Int32Array = Int32Array;\nTYPED_ARRAYS.Uint8ClampedArray = Uint8ClampedArray;\n\ntry {\n  TYPED_ARRAYS.BigInt64Array = BigInt64Array;\n  TYPED_ARRAYS.BigUint64Array = BigUint64Array;\n} catch (_unused) {// ignore\n}\n\nfunction newTypedArray(type) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return _construct(TYPED_ARRAYS[type] || Float64Array, args);\n}\nfunction newTypedArrayFrom(type) {\n  var _ref;\n\n  for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n    args[_key2 - 1] = arguments[_key2];\n  }\n\n  return (_ref = TYPED_ARRAYS[type] || Float64Array).from.apply(_ref, args);\n} // ----------------------------------------------------------------------------\n// capitilize provided string\n// ----------------------------------------------------------------------------\n\nfunction capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction _capitalize(str) {\n  return capitalize(str[0] === '_' ? str.slice(1) : str);\n}\nfunction uncapitalize(str) {\n  return str.charAt(0).toLowerCase() + str.slice(1);\n} // ----------------------------------------------------------------------------\n// Convert byte size into a well formatted string\n// ----------------------------------------------------------------------------\n\nfunction formatBytesToProperUnit(size) {\n  var precision = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  var chunkSize = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1000;\n  var units = ['TB', 'GB', 'MB', 'KB'];\n  var value = Number(size);\n  var currentUnit = 'B';\n\n  while (value > chunkSize) {\n    value /= chunkSize;\n    currentUnit = units.pop();\n  }\n\n  return \"\".concat(value.toFixed(precision), \" \").concat(currentUnit);\n} // ----------------------------------------------------------------------------\n// Convert thousand number with proper separator\n// ----------------------------------------------------------------------------\n\nfunction formatNumbersWithThousandSeparator(n) {\n  var separator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ' ';\n  var sections = [];\n  var size = n;\n\n  while (size > 1000) {\n    sections.push(\"000\".concat(size % 1000).slice(-3));\n    size = Math.floor(size / 1000);\n  }\n\n  if (size > 0) {\n    sections.push(size);\n  }\n\n  sections.reverse();\n  return sections.join(separator);\n} // ----------------------------------------------------------------------------\n// Array helper\n// ----------------------------------------------------------------------------\n\nfunction safeArrays(model) {\n  Object.keys(model).forEach(function (key) {\n    if (Array.isArray(model[key])) {\n      model[key] = [].concat(model[key]);\n    }\n  });\n} // ----------------------------------------------------------------------------\n// shallow equals\n// ----------------------------------------------------------------------------\n\n\nfunction shallowEquals(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) {\n      return false;\n    }\n\n    for (var i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  return false;\n} // ----------------------------------------------------------------------------\n\n\nfunction enumToString(e, value) {\n  return Object.keys(e).find(function (key) {\n    return e[key] === value;\n  });\n}\n\nfunction getStateArrayMapFunc(item) {\n  if (item && item.isA) {\n    return item.getState();\n  }\n\n  return item;\n} // ----------------------------------------------------------------------------\n// setImmediate\n// ----------------------------------------------------------------------------\n\n\nfunction setImmediateVTK(fn) {\n  setTimeout(fn, 0);\n} // ----------------------------------------------------------------------------\n// measurePromiseExecution\n//\n// Measures the time it takes for a promise to finish from\n//   the time this function is invoked.\n// The callback receives the time it took for the promise to resolve or reject.\n// ----------------------------------------------------------------------------\n\nfunction measurePromiseExecution(promise, callback) {\n  var start = performance.now();\n  promise.finally(function () {\n    var delta = performance.now() - start;\n    callback(delta);\n  });\n} // ----------------------------------------------------------------------------\n// vtkObject: modified(), onModified(callback), delete()\n// ----------------------------------------------------------------------------\n\nfunction obj() {\n  var publicAPI = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var model = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  // Ensure each instance as a unique ref of array\n  safeArrays(model);\n  var callbacks = [];\n\n  if (!Number.isInteger(model.mtime)) {\n    model.mtime = ++globalMTime;\n  }\n\n  if (!('classHierarchy' in model)) {\n    model.classHierarchy = new ClassHierarchy('vtkObject');\n  } else if (!(model.classHierarchy instanceof ClassHierarchy)) {\n    var hierarchy = new ClassHierarchy();\n\n    for (var i = 0; i < model.classHierarchy.length; i++) {\n      hierarchy.push(model.classHierarchy[i]);\n    }\n\n    model.classHierarchy = hierarchy;\n  }\n\n  function off(index) {\n    callbacks[index] = null;\n  }\n\n  function on(index) {\n    function unsubscribe() {\n      off(index);\n    }\n\n    return Object.freeze({\n      unsubscribe: unsubscribe\n    });\n  }\n\n  publicAPI.isDeleted = function () {\n    return !!model.deleted;\n  };\n\n  publicAPI.modified = function (otherMTime) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n\n    if (otherMTime && otherMTime < publicAPI.getMTime()) {\n      return;\n    }\n\n    model.mtime = ++globalMTime;\n    callbacks.forEach(function (callback) {\n      return callback && callback(publicAPI);\n    });\n  };\n\n  publicAPI.onModified = function (callback) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n\n    var index = callbacks.length;\n    callbacks.push(callback);\n    return on(index);\n  };\n\n  publicAPI.getMTime = function () {\n    return model.mtime;\n  };\n\n  publicAPI.isA = function (className) {\n    var count = model.classHierarchy.length; // we go backwards as that is more likely for\n    // early termination\n\n    while (count--) {\n      if (model.classHierarchy[count] === className) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  publicAPI.getClassName = function () {\n    var depth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return model.classHierarchy[model.classHierarchy.length - 1 - depth];\n  };\n\n  publicAPI.set = function () {\n    var map = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var noWarning = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var noFunction = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    var ret = false;\n    Object.keys(map).forEach(function (name) {\n      var fn = noFunction ? null : publicAPI[\"set\".concat(capitalize(name))];\n\n      if (fn && Array.isArray(map[name]) && fn.length > 1) {\n        ret = fn.apply(void 0, _toConsumableArray(map[name])) || ret;\n      } else if (fn) {\n        ret = fn(map[name]) || ret;\n      } else {\n        // Set data on model directly\n        if (['mtime'].indexOf(name) === -1 && !noWarning) {\n          vtkWarningMacro(\"Warning: Set value to model directly \".concat(name, \", \").concat(map[name]));\n        }\n\n        ret = model[name] !== map[name] || ret;\n        model[name] = map[name];\n      }\n    });\n    return ret;\n  };\n\n  publicAPI.get = function () {\n    for (var _len3 = arguments.length, list = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      list[_key3] = arguments[_key3];\n    }\n\n    if (!list.length) {\n      return model;\n    }\n\n    var subset = {};\n    list.forEach(function (name) {\n      subset[name] = model[name];\n    });\n    return subset;\n  };\n\n  publicAPI.getReferenceByName = function (val) {\n    return model[val];\n  };\n\n  publicAPI.delete = function () {\n    Object.keys(model).forEach(function (field) {\n      return delete model[field];\n    });\n    callbacks.forEach(function (el, index) {\n      return off(index);\n    }); // Flag the instance being deleted\n\n    model.deleted = true;\n  }; // Add serialization support\n\n\n  publicAPI.getState = function () {\n    if (model.deleted) {\n      return null;\n    }\n\n    var jsonArchive = _objectSpread(_objectSpread({}, model), {}, {\n      vtkClass: publicAPI.getClassName()\n    }); // Convert every vtkObject to its serializable form\n\n\n    Object.keys(jsonArchive).forEach(function (keyName) {\n      if (jsonArchive[keyName] === null || jsonArchive[keyName] === undefined || keyName[0] === '_' // protected members start with _\n      ) {\n        delete jsonArchive[keyName];\n      } else if (jsonArchive[keyName].isA) {\n        jsonArchive[keyName] = jsonArchive[keyName].getState();\n      } else if (Array.isArray(jsonArchive[keyName])) {\n        jsonArchive[keyName] = jsonArchive[keyName].map(getStateArrayMapFunc);\n      }\n    }); // Sort resulting object by key name\n\n    var sortedObj = {};\n    Object.keys(jsonArchive).sort().forEach(function (name) {\n      sortedObj[name] = jsonArchive[name];\n    }); // Remove mtime\n\n    if (sortedObj.mtime) {\n      delete sortedObj.mtime;\n    }\n\n    return sortedObj;\n  }; // Add shallowCopy(otherInstance) support\n\n\n  publicAPI.shallowCopy = function (other) {\n    var debug = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (other.getClassName() !== publicAPI.getClassName()) {\n      throw new Error(\"Cannot ShallowCopy \".concat(other.getClassName(), \" into \").concat(publicAPI.getClassName()));\n    }\n\n    var otherModel = other.get();\n    var keyList = Object.keys(model).sort();\n    var otherKeyList = Object.keys(otherModel).sort();\n    otherKeyList.forEach(function (key) {\n      var keyIdx = keyList.indexOf(key);\n\n      if (keyIdx === -1) {\n        if (debug) {\n          vtkDebugMacro(\"add \".concat(key, \" in shallowCopy\"));\n        }\n      } else {\n        keyList.splice(keyIdx, 1);\n      }\n\n      model[key] = otherModel[key];\n    });\n\n    if (keyList.length && debug) {\n      vtkDebugMacro(\"Untouched keys: \".concat(keyList.join(', ')));\n    }\n\n    publicAPI.modified();\n  }; // This function will get called when one invoke JSON.stringify(vtkObject)\n  // JSON.stringify will only stringify the return value of this function\n\n\n  publicAPI.toJSON = function vtkObjToJSON() {\n    return publicAPI.getState();\n  }; // Allow usage as decorator\n\n\n  return publicAPI;\n} // ----------------------------------------------------------------------------\n// getXXX: add getters\n// ----------------------------------------------------------------------------\n\nvar objectGetterMap = {\n  object: function object(publicAPI, model, field) {\n    return function getter() {\n      return _objectSpread({}, model[field.name]);\n    };\n  }\n};\nfunction get(publicAPI, model, fieldNames) {\n  fieldNames.forEach(function (field) {\n    if (_typeof(field) === 'object') {\n      var getter = objectGetterMap[field.type];\n\n      if (getter) {\n        publicAPI[\"get\".concat(_capitalize(field.name))] = getter(publicAPI, model, field);\n      } else {\n        publicAPI[\"get\".concat(_capitalize(field.name))] = function () {\n          return model[field.name];\n        };\n      }\n    } else {\n      publicAPI[\"get\".concat(_capitalize(field))] = function () {\n        return model[field];\n      };\n    }\n  });\n} // ----------------------------------------------------------------------------\n// setXXX: add setters\n// ----------------------------------------------------------------------------\n\nvar objectSetterMap = {\n  enum: function _enum(publicAPI, model, field) {\n    var onChanged = \"_on\".concat(_capitalize(field.name), \"Changed\");\n    return function (value) {\n      if (typeof value === 'string') {\n        if (field.enum[value] !== undefined) {\n          if (model[field.name] !== field.enum[value]) {\n            model[field.name] = field.enum[value];\n            publicAPI.modified();\n            return true;\n          }\n\n          return false;\n        }\n\n        vtkErrorMacro(\"Set Enum with invalid argument \".concat(field, \", \").concat(value));\n        throw new RangeError('Set Enum with invalid string argument');\n      }\n\n      if (typeof value === 'number') {\n        if (model[field.name] !== value) {\n          if (Object.keys(field.enum).map(function (key) {\n            return field.enum[key];\n          }).indexOf(value) !== -1) {\n            var _model$onChanged;\n\n            var previousValue = model[field.name];\n            model[field.name] = value;\n            (_model$onChanged = model[onChanged]) === null || _model$onChanged === void 0 ? void 0 : _model$onChanged.call(model, publicAPI, model, value, previousValue);\n            publicAPI.modified();\n            return true;\n          }\n\n          vtkErrorMacro(\"Set Enum outside numeric range \".concat(field, \", \").concat(value));\n          throw new RangeError('Set Enum outside numeric range');\n        }\n\n        return false;\n      }\n\n      vtkErrorMacro(\"Set Enum with invalid argument (String/Number) \".concat(field, \", \").concat(value));\n      throw new TypeError('Set Enum with invalid argument (String/Number)');\n    };\n  },\n  object: function object(publicAPI, model, field) {\n    var onChanged = \"_on\".concat(_capitalize(field.name), \"Changed\");\n    return function (value) {\n      if (!DeepEqual(model[field.name], value)) {\n        var _model$onChanged2;\n\n        var previousValue = model[field.name];\n        model[field.name] = value;\n        (_model$onChanged2 = model[onChanged]) === null || _model$onChanged2 === void 0 ? void 0 : _model$onChanged2.call(model, publicAPI, model, value, previousValue);\n        publicAPI.modified();\n        return true;\n      }\n\n      return false;\n    };\n  }\n};\n\nfunction findSetter(field) {\n  if (_typeof(field) === 'object') {\n    var fn = objectSetterMap[field.type];\n\n    if (fn) {\n      return function (publicAPI, model) {\n        return fn(publicAPI, model, field);\n      };\n    }\n\n    vtkErrorMacro(\"No setter for field \".concat(field));\n    throw new TypeError('No setter for field');\n  }\n\n  return function getSetter(publicAPI, model) {\n    var onChanged = \"_on\".concat(_capitalize(field), \"Changed\");\n    return function setter(value) {\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n\n      if (model[field] !== value) {\n        var _model$onChanged3;\n\n        var previousValue = model[field.name];\n        model[field] = value;\n        (_model$onChanged3 = model[onChanged]) === null || _model$onChanged3 === void 0 ? void 0 : _model$onChanged3.call(model, publicAPI, model, value, previousValue);\n        publicAPI.modified();\n        return true;\n      }\n\n      return false;\n    };\n  };\n}\n\nfunction set(publicAPI, model, fields) {\n  fields.forEach(function (field) {\n    if (_typeof(field) === 'object') {\n      publicAPI[\"set\".concat(_capitalize(field.name))] = findSetter(field)(publicAPI, model);\n    } else {\n      publicAPI[\"set\".concat(_capitalize(field))] = findSetter(field)(publicAPI, model);\n    }\n  });\n} // ----------------------------------------------------------------------------\n// set/get XXX: add both setters and getters\n// ----------------------------------------------------------------------------\n\nfunction setGet(publicAPI, model, fieldNames) {\n  get(publicAPI, model, fieldNames);\n  set(publicAPI, model, fieldNames);\n} // ----------------------------------------------------------------------------\n// getXXX: add getters for object of type array with copy to be safe\n// getXXXByReference: add getters for object of type array without copy\n// ----------------------------------------------------------------------------\n\nfunction getArray(publicAPI, model, fieldNames) {\n  fieldNames.forEach(function (field) {\n    publicAPI[\"get\".concat(_capitalize(field))] = function () {\n      return model[field] ? Array.from(model[field]) : model[field];\n    };\n\n    publicAPI[\"get\".concat(_capitalize(field), \"ByReference\")] = function () {\n      return model[field];\n    };\n  });\n} // ----------------------------------------------------------------------------\n// setXXX: add setter for object of type array\n// if 'defaultVal' is supplied, shorter arrays will be padded to 'size' with 'defaultVal'\n// set...From: fast path to copy the content of an array to the current one without call to modified.\n// ----------------------------------------------------------------------------\n\nfunction setArray(publicAPI, model, fieldNames, size) {\n  var defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n  fieldNames.forEach(function (field) {\n    if (model[field] && size && model[field].length !== size) {\n      throw new RangeError(\"Invalid initial number of values for array (\".concat(field, \")\"));\n    }\n\n    var onChanged = \"_on\".concat(_capitalize(field), \"Changed\");\n\n    publicAPI[\"set\".concat(_capitalize(field))] = function () {\n      if (model.deleted) {\n        vtkErrorMacro('instance deleted - cannot call any method');\n        return false;\n      }\n\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      var array = args;\n      var changeDetected;\n      var needCopy = false; // allow null or an array to be passed as a single arg.\n\n      if (array.length === 1 && (array[0] == null || array[0].length >= 0)) {\n        /* eslint-disable prefer-destructuring */\n        array = array[0];\n        /* eslint-enable prefer-destructuring */\n\n        needCopy = true;\n      }\n\n      if (array == null) {\n        changeDetected = model[field] !== array;\n      } else {\n        if (size && array.length !== size) {\n          if (array.length < size && defaultVal !== undefined) {\n            array = Array.from(array);\n            needCopy = false;\n\n            while (array.length < size) {\n              array.push(defaultVal);\n            }\n          } else {\n            throw new RangeError(\"Invalid number of values for array setter (\".concat(field, \")\"));\n          }\n        }\n\n        changeDetected = model[field] == null || model[field].length !== array.length;\n\n        for (var i = 0; !changeDetected && i < array.length; ++i) {\n          changeDetected = model[field][i] !== array[i];\n        }\n\n        if (changeDetected && needCopy) {\n          array = Array.from(array);\n        }\n      }\n\n      if (changeDetected) {\n        var _model$onChanged4;\n\n        var previousValue = model[field.name];\n        model[field] = array;\n        (_model$onChanged4 = model[onChanged]) === null || _model$onChanged4 === void 0 ? void 0 : _model$onChanged4.call(model, publicAPI, model, array, previousValue);\n        publicAPI.modified();\n      }\n\n      return changeDetected;\n    };\n\n    publicAPI[\"set\".concat(_capitalize(field), \"From\")] = function (otherArray) {\n      var target = model[field];\n      otherArray.forEach(function (v, i) {\n        target[i] = v;\n      });\n    };\n  });\n} // ----------------------------------------------------------------------------\n// set/get XXX: add setter and getter for object of type array\n// ----------------------------------------------------------------------------\n\nfunction setGetArray(publicAPI, model, fieldNames, size) {\n  var defaultVal = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : undefined;\n  getArray(publicAPI, model, fieldNames);\n  setArray(publicAPI, model, fieldNames, size, defaultVal);\n}\nfunction moveToProtected(publicAPI, model, fieldNames) {\n  for (var i = 0; i < fieldNames.length; i++) {\n    var fieldName = fieldNames[i];\n\n    if (model[fieldName] !== undefined) {\n      model[\"_\".concat(fieldName)] = model[fieldName];\n      delete model[fieldName];\n    }\n  }\n} // ----------------------------------------------------------------------------\n// vtkAlgorithm: setInputData(), setInputConnection(), getOutputData(), getOutputPort()\n// ----------------------------------------------------------------------------\n\nfunction algo(publicAPI, model, numberOfInputs, numberOfOutputs) {\n  if (model.inputData) {\n    model.inputData = model.inputData.map(vtk);\n  } else {\n    model.inputData = [];\n  }\n\n  if (model.inputConnection) {\n    model.inputConnection = model.inputConnection.map(vtk);\n  } else {\n    model.inputConnection = [];\n  }\n\n  if (model.output) {\n    model.output = model.output.map(vtk);\n  } else {\n    model.output = [];\n  }\n\n  if (model.inputArrayToProcess) {\n    model.inputArrayToProcess = model.inputArrayToProcess.map(vtk);\n  } else {\n    model.inputArrayToProcess = [];\n  } // Cache the argument for later manipulation\n\n\n  model.numberOfInputs = numberOfInputs; // Methods\n\n  function setInputData(dataset) {\n    var port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n\n    if (port >= model.numberOfInputs) {\n      vtkErrorMacro(\"algorithm \".concat(publicAPI.getClassName(), \" only has \").concat(model.numberOfInputs, \" input ports. To add more input ports, use addInputData()\"));\n      return;\n    }\n\n    if (model.inputData[port] !== dataset || model.inputConnection[port]) {\n      model.inputData[port] = dataset;\n      model.inputConnection[port] = null;\n\n      if (publicAPI.modified) {\n        publicAPI.modified();\n      }\n    }\n  }\n\n  function getInputData() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (model.inputConnection[port]) {\n      model.inputData[port] = model.inputConnection[port]();\n    }\n\n    return model.inputData[port];\n  }\n\n  function setInputConnection(outputPort) {\n    var port = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n\n    if (port >= model.numberOfInputs) {\n      var msg = \"algorithm \".concat(publicAPI.getClassName(), \" only has \");\n      msg += \"\".concat(model.numberOfInputs);\n      msg += ' input ports. To add more input ports, use addInputConnection()';\n      vtkErrorMacro(msg);\n      return;\n    }\n\n    model.inputData[port] = null;\n    model.inputConnection[port] = outputPort;\n  }\n\n  function getInputConnection() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    return model.inputConnection[port];\n  }\n\n  function getPortToFill() {\n    var portToFill = model.numberOfInputs;\n\n    while (portToFill && !model.inputData[portToFill - 1] && !model.inputConnection[portToFill - 1]) {\n      portToFill--;\n    }\n\n    if (portToFill === model.numberOfInputs) {\n      model.numberOfInputs++;\n    }\n\n    return portToFill;\n  }\n\n  function addInputConnection(outputPort) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n\n    setInputConnection(outputPort, getPortToFill());\n  }\n\n  function addInputData(dataset) {\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n\n    setInputData(dataset, getPortToFill());\n  }\n\n  function getOutputData() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n\n    if (publicAPI.shouldUpdate()) {\n      publicAPI.update();\n    }\n\n    return model.output[port];\n  }\n\n  publicAPI.shouldUpdate = function () {\n    var localMTime = publicAPI.getMTime();\n    var minOutputMTime = Infinity;\n    var count = numberOfOutputs;\n\n    while (count--) {\n      if (!model.output[count] || model.output[count].isDeleted()) {\n        return true;\n      }\n\n      var mt = model.output[count].getMTime();\n\n      if (mt < localMTime) {\n        return true;\n      }\n\n      if (mt < minOutputMTime) {\n        minOutputMTime = mt;\n      }\n    }\n\n    count = model.numberOfInputs;\n\n    while (count--) {\n      var _model$inputConnectio, _publicAPI$getInputDa;\n\n      if ((_model$inputConnectio = model.inputConnection[count]) !== null && _model$inputConnectio !== void 0 && _model$inputConnectio.filter.shouldUpdate() || ((_publicAPI$getInputDa = publicAPI.getInputData(count)) === null || _publicAPI$getInputDa === void 0 ? void 0 : _publicAPI$getInputDa.getMTime()) > minOutputMTime) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  function getOutputPort() {\n    var port = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n    var outputPortAccess = function outputPortAccess() {\n      return getOutputData(port);\n    }; // Add reference to filter\n\n\n    outputPortAccess.filter = publicAPI;\n    return outputPortAccess;\n  } // Handle input if needed\n\n\n  if (model.numberOfInputs) {\n    // Reserve inputs\n    var count = model.numberOfInputs;\n\n    while (count--) {\n      model.inputData.push(null);\n      model.inputConnection.push(null);\n    } // Expose public methods\n\n\n    publicAPI.setInputData = setInputData;\n    publicAPI.setInputConnection = setInputConnection;\n    publicAPI.addInputData = addInputData;\n    publicAPI.addInputConnection = addInputConnection;\n    publicAPI.getInputData = getInputData;\n    publicAPI.getInputConnection = getInputConnection;\n  }\n\n  if (numberOfOutputs) {\n    publicAPI.getOutputData = getOutputData;\n    publicAPI.getOutputPort = getOutputPort;\n  }\n\n  publicAPI.update = function () {\n    var ins = [];\n\n    if (model.numberOfInputs) {\n      var _count = 0;\n\n      while (_count < model.numberOfInputs) {\n        ins[_count] = publicAPI.getInputData(_count);\n        _count++;\n      }\n    }\n\n    if (publicAPI.shouldUpdate() && publicAPI.requestData) {\n      publicAPI.requestData(ins, model.output);\n    }\n  };\n\n  publicAPI.getNumberOfInputPorts = function () {\n    return model.numberOfInputs;\n  };\n\n  publicAPI.getNumberOfOutputPorts = function () {\n    return numberOfOutputs || model.output.length;\n  };\n\n  publicAPI.getInputArrayToProcess = function (inputPort) {\n    var arrayDesc = model.inputArrayToProcess[inputPort];\n    var ds = model.inputData[inputPort];\n\n    if (arrayDesc && ds) {\n      return ds[\"get\".concat(arrayDesc.fieldAssociation)]().getArray(arrayDesc.arrayName);\n    }\n\n    return null;\n  };\n\n  publicAPI.setInputArrayToProcess = function (inputPort, arrayName, fieldAssociation) {\n    var attributeType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'Scalars';\n\n    while (model.inputArrayToProcess.length < inputPort) {\n      model.inputArrayToProcess.push(null);\n    }\n\n    model.inputArrayToProcess[inputPort] = {\n      arrayName: arrayName,\n      fieldAssociation: fieldAssociation,\n      attributeType: attributeType\n    };\n  };\n} // ----------------------------------------------------------------------------\n// Event handling: onXXX(callback), invokeXXX(args...)\n// ----------------------------------------------------------------------------\n\nvar EVENT_ABORT = Symbol('Event abort');\nfunction event(publicAPI, model, eventName) {\n  var callbacks = [];\n  var previousDelete = publicAPI.delete;\n  var curCallbackID = 1;\n\n  function off(callbackID) {\n    for (var i = 0; i < callbacks.length; ++i) {\n      var _callbacks$i = _slicedToArray(callbacks[i], 1),\n          cbID = _callbacks$i[0];\n\n      if (cbID === callbackID) {\n        callbacks.splice(i, 1);\n        return;\n      }\n    }\n  }\n\n  function on(callbackID) {\n    function unsubscribe() {\n      off(callbackID);\n    }\n\n    return Object.freeze({\n      unsubscribe: unsubscribe\n    });\n  }\n\n  function invoke() {\n    var _arguments = arguments;\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return;\n    }\n    /* eslint-disable prefer-rest-params */\n    // Go through a copy of the callbacks array in case new callbacks\n    // get prepended within previous callbacks\n\n\n    var currentCallbacks = callbacks.slice();\n\n    var _loop = function _loop(index) {\n      var _currentCallbacks$ind = _slicedToArray(currentCallbacks[index], 3),\n          cb = _currentCallbacks$ind[1],\n          priority = _currentCallbacks$ind[2];\n\n      if (!cb) {\n        return \"continue\"; // eslint-disable-line\n      }\n\n      if (priority < 0) {\n        setTimeout(function () {\n          return cb.apply(publicAPI, _arguments);\n        }, 1 - priority);\n      } else {\n        // Abort only if the callback explicitly returns false\n        var continueNext = cb.apply(publicAPI, _arguments);\n\n        if (continueNext === EVENT_ABORT) {\n          return \"break\";\n        }\n      }\n    };\n\n    for (var index = 0; index < currentCallbacks.length; ++index) {\n      var _ret = _loop(index);\n\n      if (_ret === \"continue\") continue;\n      if (_ret === \"break\") break;\n    }\n    /* eslint-enable prefer-rest-params */\n\n  }\n\n  publicAPI[\"invoke\".concat(_capitalize(eventName))] = invoke;\n\n  publicAPI[\"on\".concat(_capitalize(eventName))] = function (callback) {\n    var priority = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.0;\n\n    if (!callback.apply) {\n      console.error(\"Invalid callback for event \".concat(eventName));\n      return null;\n    }\n\n    if (model.deleted) {\n      vtkErrorMacro('instance deleted - cannot call any method');\n      return null;\n    }\n\n    var callbackID = curCallbackID++;\n    callbacks.push([callbackID, callback, priority]);\n    callbacks.sort(function (cb1, cb2) {\n      return cb2[2] - cb1[2];\n    });\n    return on(callbackID);\n  };\n\n  publicAPI.delete = function () {\n    previousDelete();\n    callbacks.forEach(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 1),\n          cbID = _ref3[0];\n\n      return off(cbID);\n    });\n  };\n} // ----------------------------------------------------------------------------\n// newInstance\n// ----------------------------------------------------------------------------\n\nfunction newInstance(extend, className) {\n  var constructor = function constructor() {\n    var initialValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var model = {};\n    var publicAPI = {};\n    extend(publicAPI, model, initialValues);\n    return Object.freeze(publicAPI);\n  }; // Register constructor to factory\n\n\n  if (className) {\n    vtk.register(className, constructor);\n  }\n\n  return constructor;\n} // ----------------------------------------------------------------------------\n// Chain function calls\n// ----------------------------------------------------------------------------\n\nfunction chain() {\n  for (var _len5 = arguments.length, fn = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n    fn[_key5] = arguments[_key5];\n  }\n\n  return function () {\n    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n      args[_key6] = arguments[_key6];\n    }\n\n    return fn.filter(function (i) {\n      return !!i;\n    }).map(function (i) {\n      return i.apply(void 0, args);\n    });\n  };\n} // ----------------------------------------------------------------------------\n// Some utility methods for vtk objects\n// ----------------------------------------------------------------------------\n\nfunction isVtkObject(instance) {\n  return instance && instance.isA && instance.isA('vtkObject');\n}\nfunction traverseInstanceTree(instance, extractFunction) {\n  var accumulator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n  var visitedInstances = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n\n  if (isVtkObject(instance)) {\n    if (visitedInstances.indexOf(instance) >= 0) {\n      // avoid cycles\n      return accumulator;\n    }\n\n    visitedInstances.push(instance);\n    var result = extractFunction(instance);\n\n    if (result !== undefined) {\n      accumulator.push(result);\n    } // Now go through this instance's model\n\n\n    var model = instance.get();\n    Object.keys(model).forEach(function (key) {\n      var modelObj = model[key];\n\n      if (Array.isArray(modelObj)) {\n        modelObj.forEach(function (subObj) {\n          traverseInstanceTree(subObj, extractFunction, accumulator, visitedInstances);\n        });\n      } else {\n        traverseInstanceTree(modelObj, extractFunction, accumulator, visitedInstances);\n      }\n    });\n  }\n\n  return accumulator;\n} // ----------------------------------------------------------------------------\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\nfunction debounce(func, wait, immediate) {\n  var _this = this;\n\n  var timeout;\n\n  var debounced = function debounced() {\n    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n      args[_key7] = arguments[_key7];\n    }\n\n    var context = _this;\n\n    var later = function later() {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n\n  debounced.cancel = function () {\n    return clearTimeout(timeout);\n  };\n\n  return debounced;\n} // ----------------------------------------------------------------------------\n// Creates a throttled function that only invokes `func` at most once per\n// every `wait` milliseconds.\n\nfunction throttle(callback, delay) {\n  var isThrottled = false;\n  var argsToUse = null;\n\n  function next() {\n    isThrottled = false;\n\n    if (argsToUse !== null) {\n      wrapper.apply(void 0, _toConsumableArray(argsToUse)); // eslint-disable-line\n\n      argsToUse = null;\n    }\n  }\n\n  function wrapper() {\n    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n      args[_key8] = arguments[_key8];\n    }\n\n    if (isThrottled) {\n      argsToUse = args;\n      return;\n    }\n\n    isThrottled = true;\n    callback.apply(void 0, args);\n    setTimeout(next, delay);\n  }\n\n  return wrapper;\n} // ----------------------------------------------------------------------------\n// keystore(publicAPI, model, initialKeystore)\n//\n//    - initialKeystore: Initial keystore. This can be either a Map or an\n//      object.\n//\n// Generated API\n//  setKey(key, value) : mixed (returns value)\n//  getKey(key) : mixed\n//  getAllKeys() : [mixed]\n//  deleteKey(key) : Boolean\n// ----------------------------------------------------------------------------\n\nfunction keystore(publicAPI, model) {\n  var initialKeystore = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  model.keystore = Object.assign(model.keystore || {}, initialKeystore);\n\n  publicAPI.setKey = function (key, value) {\n    model.keystore[key] = value;\n  };\n\n  publicAPI.getKey = function (key) {\n    return model.keystore[key];\n  };\n\n  publicAPI.getAllKeys = function () {\n    return Object.keys(model.keystore);\n  };\n\n  publicAPI.deleteKey = function (key) {\n    return delete model.keystore[key];\n  };\n\n  publicAPI.clearKeystore = function () {\n    return publicAPI.getAllKeys().forEach(function (key) {\n      return delete model.keystore[key];\n    });\n  };\n} // ----------------------------------------------------------------------------\n// proxy(publicAPI, model, sectionName, propertyUI)\n//\n//    - sectionName: Name of the section for UI\n//    - propertyUI: List of props with their UI description\n//\n// Generated API\n//  getProxyId() : String\n//  listProxyProperties() : [string]\n//  updateProxyProperty(name, prop)\n//  getProxySection() => List of properties for UI generation\n// ----------------------------------------------------------------------------\n\nvar nextProxyId = 1;\nvar ROOT_GROUP_NAME = '__root__';\nfunction proxy(publicAPI, model) {\n  // Proxies are keystores\n  keystore(publicAPI, model);\n  var parentDelete = publicAPI.delete; // getProxyId\n\n  model.proxyId = \"\".concat(nextProxyId++); // ui handling\n\n  model.ui = JSON.parse(JSON.stringify(model.ui || [])); // deep copy\n\n  get(publicAPI, model, ['proxyId', 'proxyGroup', 'proxyName']);\n  setGet(publicAPI, model, ['proxyManager']); // group properties\n\n  var propertyMap = {};\n  var groupChildrenNames = {};\n\n  function registerProperties(descriptionList, currentGroupName) {\n    if (!groupChildrenNames[currentGroupName]) {\n      groupChildrenNames[currentGroupName] = [];\n    }\n\n    var childrenNames = groupChildrenNames[currentGroupName];\n\n    for (var i = 0; i < descriptionList.length; i++) {\n      childrenNames.push(descriptionList[i].name);\n      propertyMap[descriptionList[i].name] = descriptionList[i];\n\n      if (descriptionList[i].children && descriptionList[i].children.length) {\n        registerProperties(descriptionList[i].children, descriptionList[i].name);\n      }\n    }\n  }\n\n  registerProperties(model.ui, ROOT_GROUP_NAME);\n\n  publicAPI.updateUI = function (ui) {\n    model.ui = JSON.parse(JSON.stringify(ui || [])); // deep copy\n\n    Object.keys(propertyMap).forEach(function (k) {\n      return delete propertyMap[k];\n    });\n    Object.keys(groupChildrenNames).forEach(function (k) {\n      return delete groupChildrenNames[k];\n    });\n    registerProperties(model.ui, ROOT_GROUP_NAME);\n    publicAPI.modified();\n  };\n\n  function listProxyProperties() {\n    var gName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n    return groupChildrenNames[gName];\n  }\n\n  publicAPI.updateProxyProperty = function (propertyName, propUI) {\n    var prop = propertyMap[propertyName];\n\n    if (prop) {\n      Object.assign(prop, propUI);\n    } else {\n      propertyMap[propertyName] = _objectSpread({}, propUI);\n    }\n  };\n\n  publicAPI.activate = function () {\n    if (model.proxyManager) {\n      var setActiveMethod = \"setActive\".concat(_capitalize(publicAPI.getProxyGroup().slice(0, -1)));\n\n      if (model.proxyManager[setActiveMethod]) {\n        model.proxyManager[setActiveMethod](publicAPI);\n      }\n    }\n  }; // property link\n\n\n  model.propertyLinkSubscribers = {};\n\n  publicAPI.registerPropertyLinkForGC = function (otherLink, type) {\n    if (!(type in model.propertyLinkSubscribers)) {\n      model.propertyLinkSubscribers[type] = [];\n    }\n\n    model.propertyLinkSubscribers[type].push(otherLink);\n  };\n\n  publicAPI.gcPropertyLinks = function (type) {\n    var subscribers = model.propertyLinkSubscribers[type] || [];\n\n    while (subscribers.length) {\n      subscribers.pop().unbind(publicAPI);\n    }\n  };\n\n  model.propertyLinkMap = {};\n\n  publicAPI.getPropertyLink = function (id) {\n    var persistent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n    if (model.propertyLinkMap[id]) {\n      return model.propertyLinkMap[id];\n    }\n\n    var value = null;\n    var links = [];\n    var count = 0;\n    var updateInProgress = false;\n\n    function update(source) {\n      var force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      if (updateInProgress) {\n        return null;\n      }\n\n      var needUpdate = [];\n      var sourceLink = null;\n      count = links.length;\n\n      while (count--) {\n        var link = links[count];\n\n        if (link.instance === source) {\n          sourceLink = link;\n        } else {\n          needUpdate.push(link);\n        }\n      }\n\n      if (!sourceLink) {\n        return null;\n      }\n\n      var newValue = sourceLink.instance[\"get\".concat(_capitalize(sourceLink.propertyName))]();\n\n      if (!shallowEquals(newValue, value) || force) {\n        value = newValue;\n        updateInProgress = true;\n\n        while (needUpdate.length) {\n          var linkToUpdate = needUpdate.pop();\n          linkToUpdate.instance.set(_defineProperty({}, linkToUpdate.propertyName, value));\n        }\n\n        updateInProgress = false;\n      }\n\n      if (model.propertyLinkMap[id].persistent) {\n        model.propertyLinkMap[id].value = newValue;\n      }\n\n      return newValue;\n    }\n\n    function unbind(instance, propertyName) {\n      var indexToDelete = [];\n      count = links.length;\n\n      while (count--) {\n        var link = links[count];\n\n        if (link.instance === instance && (link.propertyName === propertyName || propertyName === undefined)) {\n          link.subscription.unsubscribe();\n          indexToDelete.push(count);\n        }\n      }\n\n      while (indexToDelete.length) {\n        links.splice(indexToDelete.pop(), 1);\n      }\n    }\n\n    function bind(instance, propertyName) {\n      var updateMe = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var subscription = instance.onModified(update);\n      var other = links[0];\n      links.push({\n        instance: instance,\n        propertyName: propertyName,\n        subscription: subscription\n      });\n\n      if (updateMe) {\n        if (model.propertyLinkMap[id].persistent && model.propertyLinkMap[id].value !== undefined) {\n          instance.set(_defineProperty({}, propertyName, model.propertyLinkMap[id].value));\n        } else if (other) {\n          update(other.instance, true);\n        }\n      }\n\n      return {\n        unsubscribe: function unsubscribe() {\n          return unbind(instance, propertyName);\n        }\n      };\n    }\n\n    function unsubscribe() {\n      while (links.length) {\n        links.pop().subscription.unsubscribe();\n      }\n    }\n\n    var linkHandler = {\n      bind: bind,\n      unbind: unbind,\n      unsubscribe: unsubscribe,\n      persistent: persistent\n    };\n    model.propertyLinkMap[id] = linkHandler;\n    return linkHandler;\n  }; // extract values\n\n\n  function getProperties() {\n    var groupName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ROOT_GROUP_NAME;\n    var values = [];\n    var id = model.proxyId;\n    var propertyNames = listProxyProperties(groupName) || [];\n\n    for (var i = 0; i < propertyNames.length; i++) {\n      var name = propertyNames[i];\n      var method = publicAPI[\"get\".concat(_capitalize(name))];\n      var value = method ? method() : undefined;\n      var prop = {\n        id: id,\n        name: name,\n        value: value\n      };\n      var children = getProperties(name);\n\n      if (children.length) {\n        prop.children = children;\n      }\n\n      values.push(prop);\n    }\n\n    return values;\n  }\n\n  publicAPI.listPropertyNames = function () {\n    return getProperties().map(function (p) {\n      return p.name;\n    });\n  };\n\n  publicAPI.getPropertyByName = function (name) {\n    return getProperties().find(function (p) {\n      return p.name === name;\n    });\n  };\n\n  publicAPI.getPropertyDomainByName = function (name) {\n    return (propertyMap[name] || {}).domain;\n  }; // ui section\n\n\n  publicAPI.getProxySection = function () {\n    return {\n      id: model.proxyId,\n      name: model.proxyGroup,\n      ui: model.ui,\n      properties: getProperties()\n    };\n  }; // free resources\n\n\n  publicAPI.delete = function () {\n    var list = Object.keys(model.propertyLinkMap);\n    var count = list.length;\n\n    while (count--) {\n      model.propertyLinkMap[list[count]].unsubscribe();\n    }\n\n    Object.keys(model.propertyLinkSubscribers).forEach(publicAPI.gcPropertyLinks);\n    parentDelete();\n  }; // @todo fix infinite recursion due to active source\n\n\n  publicAPI.getState = function () {\n    return null;\n  };\n\n  function registerLinks() {\n    // Allow dynamic registration of links at the application level\n    if (model.links) {\n      for (var i = 0; i < model.links.length; i++) {\n        var _model$links$i = model.links[i],\n            link = _model$links$i.link,\n            property = _model$links$i.property,\n            persistent = _model$links$i.persistent,\n            updateOnBind = _model$links$i.updateOnBind,\n            type = _model$links$i.type;\n\n        if (type === 'application') {\n          var sLink = model.proxyManager.getPropertyLink(link, persistent);\n          publicAPI.registerPropertyLinkForGC(sLink, 'application');\n          sLink.bind(publicAPI, property, updateOnBind);\n        }\n      }\n    }\n  }\n\n  setImmediateVTK(registerLinks);\n} // ----------------------------------------------------------------------------\n// proxyPropertyMapping(publicAPI, model, map)\n//\n//   map = {\n//      opacity: { modelKey: 'property', property: 'opacity' },\n//   }\n//\n// Generated API:\n//  Elevate set/get methods from internal object stored in the model to current one\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyMapping(publicAPI, model, map) {\n  var parentDelete = publicAPI.delete;\n  var subscriptions = [];\n  var propertyNames = Object.keys(map);\n  var count = propertyNames.length;\n\n  while (count--) {\n    var propertyName = propertyNames[count];\n    var _map$propertyName = map[propertyName],\n        modelKey = _map$propertyName.modelKey,\n        property = _map$propertyName.property,\n        _map$propertyName$mod = _map$propertyName.modified,\n        modified = _map$propertyName$mod === void 0 ? true : _map$propertyName$mod;\n\n    var methodSrc = _capitalize(property);\n\n    var methodDst = _capitalize(propertyName);\n\n    publicAPI[\"get\".concat(methodDst)] = model[modelKey][\"get\".concat(methodSrc)];\n    publicAPI[\"set\".concat(methodDst)] = model[modelKey][\"set\".concat(methodSrc)];\n\n    if (modified) {\n      subscriptions.push(model[modelKey].onModified(publicAPI.modified));\n    }\n  }\n\n  publicAPI.delete = function () {\n    while (subscriptions.length) {\n      subscriptions.pop().unsubscribe();\n    }\n\n    parentDelete();\n  };\n} // ----------------------------------------------------------------------------\n// proxyPropertyState(publicAPI, model, state, defaults)\n//\n//   state = {\n//     representation: {\n//       'Surface with edges': { property: { edgeVisibility: true, representation: 2 } },\n//       Surface: { property: { edgeVisibility: false, representation: 2 } },\n//       Wireframe: { property: { edgeVisibility: false, representation: 1 } },\n//       Points: { property: { edgeVisibility: false, representation: 0 } },\n//     },\n//   }\n//\n//   defaults = {\n//      representation: 'Surface',\n//   }\n//\n// Generated API\n//   get / set Representation ( string ) => push state to various internal objects\n// ----------------------------------------------------------------------------\n\nfunction proxyPropertyState(publicAPI, model) {\n  var state = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var defaults = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  model.this = publicAPI;\n\n  function applyState(map) {\n    var modelKeys = Object.keys(map);\n    var count = modelKeys.length;\n\n    while (count--) {\n      var modelKey = modelKeys[count];\n      model[modelKey].set(map[modelKey]);\n    }\n  }\n\n  var modelKeys = Object.keys(defaults);\n  var count = modelKeys.length;\n\n  var _loop2 = function _loop2() {\n    // Add default\n    var key = modelKeys[count];\n    model[key] = defaults[key]; // Add set method\n\n    var mapping = state[key];\n\n    publicAPI[\"set\".concat(_capitalize(key))] = function (value) {\n      if (value !== model[key]) {\n        model[key] = value;\n        var propValues = mapping[value];\n        applyState(propValues);\n        publicAPI.modified();\n      }\n    };\n  };\n\n  while (count--) {\n    _loop2();\n  } // Add getter\n\n\n  if (modelKeys.length) {\n    get(publicAPI, model, modelKeys);\n  }\n} // ----------------------------------------------------------------------------\n// From : https://github.com/facebookarchive/fixed-data-table/blob/master/src/vendor_upstream/dom/normalizeWheel.js\n//\n//\n// Copyright (c) 2015, Facebook, Inc.\n// All rights reserved.\n//\n// This source code is licensed under the BSD-style license found in the\n// LICENSE file in the root directory of this source tree. An additional grant\n// of patent rights can be found in the PATENTS file in the same directory.\n//\n//\n// Mouse wheel (and 2-finger trackpad) support on the web sucks.  It is\n// complicated, thus this doc is long and (hopefully) detailed enough to answer\n// your questions.\n//\n// If you need to react to the mouse wheel in a predictable way, this code is\n// like your bestest friend.// hugs//\n//\n// As of today, there are 4 DOM event types you can listen to:\n//\n//   'wheel'                -- Chrome(31+), FF(17+), IE(9+)\n//   'mousewheel'           -- Chrome, IE(6+), Opera, Safari\n//   'MozMousePixelScroll'  -- FF(3.5 only!) (2010-2013) -- don't bother!\n//   'DOMMouseScroll'       -- FF(0.9.7+) since 2003\n//\n// So what to do?  The is the best:\n//\n//   normalizeWheel.getEventType();\n//\n// In your event callback, use this code to get sane interpretation of the\n// deltas.  This code will return an object with properties:\n//\n//   spinX   -- normalized spin speed (use for zoom) - x plane\n//   spinY   -- \" - y plane\n//   pixelX  -- normalized distance (to pixels) - x plane\n//   pixelY  -- \" - y plane\n//\n// Wheel values are provided by the browser assuming you are using the wheel to\n// scroll a web page by a number of lines or pixels (or pages).  Values can vary\n// significantly on different platforms and browsers, forgetting that you can\n// scroll at different speeds.  Some devices (like trackpads) emit more events\n// at smaller increments with fine granularity, and some emit massive jumps with\n// linear speed or acceleration.\n//\n// This code does its best to normalize the deltas for you:\n//\n//   - spin is trying to normalize how far the wheel was spun (or trackpad\n//     dragged).  This is super useful for zoom support where you want to\n//     throw away the chunky scroll steps on the PC and make those equal to\n//     the slow and smooth tiny steps on the Mac. Key data: This code tries to\n//     resolve a single slow step on a wheel to 1.\n//\n//   - pixel is normalizing the desired scroll delta in pixel units.  You'll\n//     get the crazy differences between browsers, but at least it'll be in\n//     pixels!\n//\n//   - positive value indicates scrolling DOWN/RIGHT, negative UP/LEFT.  This\n//     should translate to positive value zooming IN, negative zooming OUT.\n//     This matches the newer 'wheel' event.\n//\n// Why are there spinX, spinY (or pixels)?\n//\n//   - spinX is a 2-finger side drag on the trackpad, and a shift + wheel turn\n//     with a mouse.  It results in side-scrolling in the browser by default.\n//\n//   - spinY is what you expect -- it's the classic axis of a mouse wheel.\n//\n//   - I dropped spinZ/pixelZ.  It is supported by the DOM 3 'wheel' event and\n//     probably is by browsers in conjunction with fancy 3D controllers .. but\n//     you know.\n//\n// Implementation info:\n//\n// Examples of 'wheel' event if you scroll slowly (down) by one step with an\n// average mouse:\n//\n//   OS X + Chrome  (mouse)     -    4   pixel delta  (wheelDelta -120)\n//   OS X + Safari  (mouse)     -  N/A   pixel delta  (wheelDelta  -12)\n//   OS X + Firefox (mouse)     -    0.1 line  delta  (wheelDelta  N/A)\n//   Win8 + Chrome  (mouse)     -  100   pixel delta  (wheelDelta -120)\n//   Win8 + Firefox (mouse)     -    3   line  delta  (wheelDelta -120)\n//\n// On the trackpad:\n//\n//   OS X + Chrome  (trackpad)  -    2   pixel delta  (wheelDelta   -6)\n//   OS X + Firefox (trackpad)  -    1   pixel delta  (wheelDelta  N/A)\n//\n// On other/older browsers.. it's more complicated as there can be multiple and\n// also missing delta values.\n//\n// The 'wheel' event is more standard:\n//\n// http://www.w3.org/TR/DOM-Level-3-Events/#events-wheelevents\n//\n// The basics is that it includes a unit, deltaMode (pixels, lines, pages), and\n// deltaX, deltaY and deltaZ.  Some browsers provide other values to maintain\n// backward compatibility with older events.  Those other values help us\n// better normalize spin speed.  Example of what the browsers provide:\n//\n//                          | event.wheelDelta | event.detail\n//        ------------------+------------------+--------------\n//          Safari v5/OS X  |       -120       |       0\n//          Safari v5/Win7  |       -120       |       0\n//         Chrome v17/OS X  |       -120       |       0\n//         Chrome v17/Win7  |       -120       |       0\n//                IE9/Win7  |       -120       |   undefined\n//         Firefox v4/OS X  |     undefined    |       1\n//         Firefox v4/Win7  |     undefined    |       3\n//\n// ----------------------------------------------------------------------------\n// Reasonable defaults\n\nvar PIXEL_STEP = 10;\nvar LINE_HEIGHT = 40;\nvar PAGE_HEIGHT = 800;\nfunction normalizeWheel(wheelEvent) {\n  var sX = 0; // spinX\n\n  var sY = 0; // spinY\n\n  var pX = 0; // pixelX\n\n  var pY = 0; // pixelY\n  // Legacy\n\n  if ('detail' in wheelEvent) {\n    sY = wheelEvent.detail;\n  }\n\n  if ('wheelDelta' in wheelEvent) {\n    sY = -wheelEvent.wheelDelta / 120;\n  }\n\n  if ('wheelDeltaY' in wheelEvent) {\n    sY = -wheelEvent.wheelDeltaY / 120;\n  }\n\n  if ('wheelDeltaX' in wheelEvent) {\n    sX = -wheelEvent.wheelDeltaX / 120;\n  } // side scrolling on FF with DOMMouseScroll\n\n\n  if ('axis' in wheelEvent && wheelEvent.axis === wheelEvent.HORIZONTAL_AXIS) {\n    sX = sY;\n    sY = 0;\n  }\n\n  pX = sX * PIXEL_STEP;\n  pY = sY * PIXEL_STEP;\n\n  if ('deltaY' in wheelEvent) {\n    pY = wheelEvent.deltaY;\n  }\n\n  if ('deltaX' in wheelEvent) {\n    pX = wheelEvent.deltaX;\n  }\n\n  if ((pX || pY) && wheelEvent.deltaMode) {\n    if (wheelEvent.deltaMode === 1) {\n      // delta in LINE units\n      pX *= LINE_HEIGHT;\n      pY *= LINE_HEIGHT;\n    } else {\n      // delta in PAGE units\n      pX *= PAGE_HEIGHT;\n      pY *= PAGE_HEIGHT;\n    }\n  } // Fall-back if spin cannot be determined\n\n\n  if (pX && !sX) {\n    sX = pX < 1 ? -1 : 1;\n  }\n\n  if (pY && !sY) {\n    sY = pY < 1 ? -1 : 1;\n  }\n\n  return {\n    spinX: sX,\n    spinY: sY,\n    pixelX: pX,\n    pixelY: pY\n  };\n} // ----------------------------------------------------------------------------\n// Default export\n// ----------------------------------------------------------------------------\n\nvar macro = {\n  algo: algo,\n  capitalize: capitalize,\n  chain: chain,\n  debounce: debounce,\n  enumToString: enumToString,\n  event: event,\n  EVENT_ABORT: EVENT_ABORT,\n  formatBytesToProperUnit: formatBytesToProperUnit,\n  formatNumbersWithThousandSeparator: formatNumbersWithThousandSeparator,\n  get: get,\n  getArray: getArray,\n  getCurrentGlobalMTime: getCurrentGlobalMTime,\n  getStateArrayMapFunc: getStateArrayMapFunc,\n  isVtkObject: isVtkObject,\n  keystore: keystore,\n  measurePromiseExecution: measurePromiseExecution,\n  moveToProtected: moveToProtected,\n  newInstance: newInstance,\n  newTypedArray: newTypedArray,\n  newTypedArrayFrom: newTypedArrayFrom,\n  normalizeWheel: normalizeWheel,\n  obj: obj,\n  proxy: proxy,\n  proxyPropertyMapping: proxyPropertyMapping,\n  proxyPropertyState: proxyPropertyState,\n  safeArrays: safeArrays,\n  set: set,\n  setArray: setArray,\n  setGet: setGet,\n  setGetArray: setGetArray,\n  setImmediate: setImmediateVTK,\n  setLoggerFunction: setLoggerFunction,\n  throttle: throttle,\n  traverseInstanceTree: traverseInstanceTree,\n  TYPED_ARRAYS: TYPED_ARRAYS,\n  // deprecated todo remove on breaking API revision\n  uncapitalize: uncapitalize,\n  VOID: VOID,\n  vtkDebugMacro: vtkDebugMacro,\n  vtkErrorMacro: vtkErrorMacro,\n  vtkInfoMacro: vtkInfoMacro,\n  vtkLogMacro: vtkLogMacro,\n  vtkOnceErrorMacro: vtkOnceErrorMacro,\n  vtkWarningMacro: vtkWarningMacro\n};\n\nexport { EVENT_ABORT, TYPED_ARRAYS, VOID, _capitalize, algo, capitalize, chain, debounce, macro as default, event, formatBytesToProperUnit, formatNumbersWithThousandSeparator, get, getArray, isVtkObject, keystore, measurePromiseExecution, moveToProtected, newInstance, newTypedArray, newTypedArrayFrom, normalizeWheel, obj, proxy, proxyPropertyMapping, proxyPropertyState, set, setArray, setGet, setGetArray, setImmediateVTK, setLoggerFunction, throttle, traverseInstanceTree, uncapitalize, vtkDebugMacro, vtkErrorMacro, vtkInfoMacro, vtkLogMacro, vtkOnceErrorMacro, vtkWarningMacro };\n"],"mappings":"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S,CAACrY,MAAM;EAE5B,IAAIsY,MAAM,GAAG,SAASA,MAAMA,CAAA,EAAG;IAC7B;IACA,IAAInY,GAAG,GAAGkY,SAAS,CAACrQ,KAAK,CAAC;IAC1BzC,KAAK,CAACpF,GAAG,CAAC,GAAG+X,QAAQ,CAAC/X,GAAG,CAAC,CAAC,CAAC;;IAE5B,IAAIoY,OAAO,GAAGN,KAAK,CAAC9X,GAAG,CAAC;IAExB2G,SAAS,CAAC,KAAK,CAAClC,MAAM,CAACb,WAAW,CAAC5D,GAAG,CAAC,CAAC,CAAC,GAAG,UAAUqE,KAAK,EAAE;MAC3D,IAAIA,KAAK,KAAKe,KAAK,CAACpF,GAAG,CAAC,EAAE;QACxBoF,KAAK,CAACpF,GAAG,CAAC,GAAGqE,KAAK;QAClB,IAAIgU,UAAU,GAAGD,OAAO,CAAC/T,KAAK,CAAC;QAC/B4T,UAAU,CAACI,UAAU,CAAC;QACtB1R,SAAS,CAACa,QAAQ,CAAC,CAAC;MACtB;IACF,CAAC;EACH,CAAC;EAED,OAAOK,KAAK,EAAE,EAAE;IACdsQ,MAAM,CAAC,CAAC;EACV,CAAC,CAAC;;EAGF,IAAID,SAAS,CAACrY,MAAM,EAAE;IACpByI,GAAG,CAAC3B,SAAS,EAAEvB,KAAK,EAAE8S,SAAS,CAAC;EAClC;AACF,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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"},"metadata":{},"sourceType":"module","externalDependencies":[]}