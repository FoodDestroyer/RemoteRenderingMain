{"ast":null,"code":"import macro from '../../macros.js';\nimport createMethods from './ImageStream/DefaultProtocol.js';\nimport ViewStream from './ImageStream/ViewStream.js';\nfunction vtkImageStream(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkImageStream'); // --------------------------------------------------------------------------\n  // Internal private method\n  // --------------------------------------------------------------------------\n\n  function onImage(data) {\n    var message = data[0];\n    if (!message || !message.image) {\n      return;\n    }\n    for (var i = 0; i < model.viewStreams.length; i++) {\n      model.viewStreams[i].processMessage(message);\n    }\n  } // --------------------------------------------------------------------------\n  // PublicAPI\n  // --------------------------------------------------------------------------\n\n  publicAPI.setServerAnimationFPS = function () {\n    var maxFPS = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 30;\n    var changeDetected = false;\n    if (model.serverAnimationFPS !== maxFPS) {\n      model.serverAnimationFPS = maxFPS;\n      changeDetected = true;\n    }\n    if (!model.protocol) {\n      return Promise.resolve(true);\n    }\n    if (changeDetected) {\n      publicAPI.modified();\n    }\n    return model.protocol.setServerAnimationFPS(maxFPS);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.connect = function (session) {\n    var protocol = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createMethods;\n    if (model.connected || !session || !protocol) {\n      return;\n    }\n    model.protocol = protocol(session);\n    model.protocol.subscribeToImageStream(onImage).promise // new API in wslink 1.0.5+\n    .then(function (subscription) {\n      model.renderTopicSubscription = subscription;\n      model.connected = true;\n    }).catch(function (e) {\n      model.connected = false;\n      console.error(e);\n    });\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.disconnect = function () {\n    if (model.protocol && model.connected && model.renderTopicSubscription) {\n      model.protocol.unsubscribeToImageStream(model.renderTopicSubscription);\n      model.renderTopicSubscription = null;\n    }\n    model.connected = false;\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.registerViewStream = function (view) {\n    model.viewStreams.push(view);\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.unregisterViewStream = function (view) {\n    model.viewStreams = model.viewStreams.filter(function (v) {\n      return v !== view;\n    });\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.createViewStream = function () {\n    var viewId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '-1';\n    var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [400, 400];\n    var setServerAnimationFPS = publicAPI.setServerAnimationFPS,\n      getServerAnimationFPS = publicAPI.getServerAnimationFPS,\n      unregisterViewStream = publicAPI.unregisterViewStream;\n    var viewStream = ViewStream.newInstance({\n      protocol: model.protocol,\n      unregisterViewStream: unregisterViewStream,\n      sharedAPI: {\n        setServerAnimationFPS: setServerAnimationFPS,\n        getServerAnimationFPS: getServerAnimationFPS\n      }\n    });\n    viewStream.setViewId(viewId);\n    viewStream.setSize(size[0], size[1]);\n    publicAPI.registerViewStream(viewStream);\n    return viewStream;\n  }; // --------------------------------------------------------------------------\n\n  publicAPI.delete = macro.chain(function () {\n    while (model.viewStreams.length) {\n      model.viewStreams.pop().delete();\n    }\n    publicAPI.disconnect();\n  }, publicAPI.delete);\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\nvar DEFAULT_VALUES = {\n  // protocol: null,\n  viewStreams: [],\n  serverAnimationFPS: -1\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Object methods\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['serverAnimationFPS', 'protocol']); // Object specific methods\n\n  vtkImageStream(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkImageStream'); // ----------------------------------------------------------------------------\n\nvar vtkImageStream$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\nexport { vtkImageStream$1 as default, extend, newInstance };","map":{"version":3,"names":["macro","createMethods","ViewStream","vtkImageStream","publicAPI","model","classHierarchy","push","onImage","data","message","image","i","viewStreams","length","processMessage","setServerAnimationFPS","maxFPS","arguments","undefined","changeDetected","serverAnimationFPS","protocol","Promise","resolve","modified","connect","session","connected","subscribeToImageStream","promise","then","subscription","renderTopicSubscription","catch","e","console","error","disconnect","unsubscribeToImageStream","registerViewStream","view","unregisterViewStream","filter","v","createViewStream","viewId","size","getServerAnimationFPS","viewStream","newInstance","sharedAPI","setViewId","setSize","delete","chain","pop","DEFAULT_VALUES","extend","initialValues","Object","assign","obj","get","vtkImageStream$1","default"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@kitware/vtk.js/IO/Core/ImageStream.js"],"sourcesContent":["import macro from '../../macros.js';\nimport createMethods from './ImageStream/DefaultProtocol.js';\nimport ViewStream from './ImageStream/ViewStream.js';\n\nfunction vtkImageStream(publicAPI, model) {\n  // Set our className\n  model.classHierarchy.push('vtkImageStream'); // --------------------------------------------------------------------------\n  // Internal private method\n  // --------------------------------------------------------------------------\n\n  function onImage(data) {\n    var message = data[0];\n\n    if (!message || !message.image) {\n      return;\n    }\n\n    for (var i = 0; i < model.viewStreams.length; i++) {\n      model.viewStreams[i].processMessage(message);\n    }\n  } // --------------------------------------------------------------------------\n  // PublicAPI\n  // --------------------------------------------------------------------------\n\n\n  publicAPI.setServerAnimationFPS = function () {\n    var maxFPS = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 30;\n    var changeDetected = false;\n\n    if (model.serverAnimationFPS !== maxFPS) {\n      model.serverAnimationFPS = maxFPS;\n      changeDetected = true;\n    }\n\n    if (!model.protocol) {\n      return Promise.resolve(true);\n    }\n\n    if (changeDetected) {\n      publicAPI.modified();\n    }\n\n    return model.protocol.setServerAnimationFPS(maxFPS);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.connect = function (session) {\n    var protocol = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : createMethods;\n\n    if (model.connected || !session || !protocol) {\n      return;\n    }\n\n    model.protocol = protocol(session);\n    model.protocol.subscribeToImageStream(onImage).promise // new API in wslink 1.0.5+\n    .then(function (subscription) {\n      model.renderTopicSubscription = subscription;\n      model.connected = true;\n    }).catch(function (e) {\n      model.connected = false;\n      console.error(e);\n    });\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.disconnect = function () {\n    if (model.protocol && model.connected && model.renderTopicSubscription) {\n      model.protocol.unsubscribeToImageStream(model.renderTopicSubscription);\n      model.renderTopicSubscription = null;\n    }\n\n    model.connected = false;\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.registerViewStream = function (view) {\n    model.viewStreams.push(view);\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.unregisterViewStream = function (view) {\n    model.viewStreams = model.viewStreams.filter(function (v) {\n      return v !== view;\n    });\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.createViewStream = function () {\n    var viewId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '-1';\n    var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [400, 400];\n    var setServerAnimationFPS = publicAPI.setServerAnimationFPS,\n        getServerAnimationFPS = publicAPI.getServerAnimationFPS,\n        unregisterViewStream = publicAPI.unregisterViewStream;\n    var viewStream = ViewStream.newInstance({\n      protocol: model.protocol,\n      unregisterViewStream: unregisterViewStream,\n      sharedAPI: {\n        setServerAnimationFPS: setServerAnimationFPS,\n        getServerAnimationFPS: getServerAnimationFPS\n      }\n    });\n    viewStream.setViewId(viewId);\n    viewStream.setSize(size[0], size[1]);\n    publicAPI.registerViewStream(viewStream);\n    return viewStream;\n  }; // --------------------------------------------------------------------------\n\n\n  publicAPI.delete = macro.chain(function () {\n    while (model.viewStreams.length) {\n      model.viewStreams.pop().delete();\n    }\n\n    publicAPI.disconnect();\n  }, publicAPI.delete);\n} // ----------------------------------------------------------------------------\n// Object factory\n// ----------------------------------------------------------------------------\n\n\nvar DEFAULT_VALUES = {\n  // protocol: null,\n  viewStreams: [],\n  serverAnimationFPS: -1\n}; // ----------------------------------------------------------------------------\n\nfunction extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues); // Object methods\n\n  macro.obj(publicAPI, model);\n  macro.get(publicAPI, model, ['serverAnimationFPS', 'protocol']); // Object specific methods\n\n  vtkImageStream(publicAPI, model);\n} // ----------------------------------------------------------------------------\n\nvar newInstance = macro.newInstance(extend, 'vtkImageStream'); // ----------------------------------------------------------------------------\n\nvar vtkImageStream$1 = {\n  newInstance: newInstance,\n  extend: extend\n};\n\nexport { vtkImageStream$1 as default, extend, newInstance };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,iBAAiB;AACnC,OAAOC,aAAa,MAAM,kCAAkC;AAC5D,OAAOC,UAAU,MAAM,6BAA6B;AAEpD,SAASC,cAAcA,CAACC,SAAS,EAAEC,KAAK,EAAE;EACxC;EACAA,KAAK,CAACC,cAAc,CAACC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;EAC7C;EACA;;EAEA,SAASC,OAAOA,CAACC,IAAI,EAAE;IACrB,IAAIC,OAAO,GAAGD,IAAI,CAAC,CAAC,CAAC;IAErB,IAAI,CAACC,OAAO,IAAI,CAACA,OAAO,CAACC,KAAK,EAAE;MAC9B;IACF;IAEA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,KAAK,CAACQ,WAAW,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;MACjDP,KAAK,CAACQ,WAAW,CAACD,CAAC,CAAC,CAACG,cAAc,CAACL,OAAO,CAAC;IAC9C;EACF,CAAC,CAAC;EACF;EACA;;EAGAN,SAAS,CAACY,qBAAqB,GAAG,YAAY;IAC5C,IAAIC,MAAM,GAAGC,SAAS,CAACJ,MAAM,GAAG,CAAC,IAAII,SAAS,CAAC,CAAC,CAAC,KAAKC,SAAS,GAAGD,SAAS,CAAC,CAAC,CAAC,GAAG,EAAE;IACnF,IAAIE,cAAc,GAAG,KAAK;IAE1B,IAAIf,KAAK,CAACgB,kBAAkB,KAAKJ,MAAM,EAAE;MACvCZ,KAAK,CAACgB,kBAAkB,GAAGJ,MAAM;MACjCG,cAAc,GAAG,IAAI;IACvB;IAEA,IAAI,CAACf,KAAK,CAACiB,QAAQ,EAAE;MACnB,OAAOC,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;IAC9B;IAEA,IAAIJ,cAAc,EAAE;MAClBhB,SAAS,CAACqB,QAAQ,CAAC,CAAC;IACtB;IAEA,OAAOpB,KAAK,CAACiB,QAAQ,CAACN,qBAAqB,CAACC,MAAM,CAAC;EACrD,CAAC,CAAC,CAAC;;EAGHb,SAAS,CAACsB,OAAO,GAAG,UAAUC,OAAO,EAAE;IACrC,IAAIL,QAAQ,GAAGJ,SAAS,CAACJ,MAAM,GAAG,CAAC,IAAII,SAAS,CAAC,CAAC,CAAC,KAAKC,SAAS,GAAGD,SAAS,CAAC,CAAC,CAAC,GAAGjB,aAAa;IAEhG,IAAII,KAAK,CAACuB,SAAS,IAAI,CAACD,OAAO,IAAI,CAACL,QAAQ,EAAE;MAC5C;IACF;IAEAjB,KAAK,CAACiB,QAAQ,GAAGA,QAAQ,CAACK,OAAO,CAAC;IAClCtB,KAAK,CAACiB,QAAQ,CAACO,sBAAsB,CAACrB,OAAO,CAAC,CAACsB,OAAO,CAAC;IAAA,CACtDC,IAAI,CAAC,UAAUC,YAAY,EAAE;MAC5B3B,KAAK,CAAC4B,uBAAuB,GAAGD,YAAY;MAC5C3B,KAAK,CAACuB,SAAS,GAAG,IAAI;IACxB,CAAC,CAAC,CAACM,KAAK,CAAC,UAAUC,CAAC,EAAE;MACpB9B,KAAK,CAACuB,SAAS,GAAG,KAAK;MACvBQ,OAAO,CAACC,KAAK,CAACF,CAAC,CAAC;IAClB,CAAC,CAAC;EACJ,CAAC,CAAC,CAAC;;EAGH/B,SAAS,CAACkC,UAAU,GAAG,YAAY;IACjC,IAAIjC,KAAK,CAACiB,QAAQ,IAAIjB,KAAK,CAACuB,SAAS,IAAIvB,KAAK,CAAC4B,uBAAuB,EAAE;MACtE5B,KAAK,CAACiB,QAAQ,CAACiB,wBAAwB,CAAClC,KAAK,CAAC4B,uBAAuB,CAAC;MACtE5B,KAAK,CAAC4B,uBAAuB,GAAG,IAAI;IACtC;IAEA5B,KAAK,CAACuB,SAAS,GAAG,KAAK;EACzB,CAAC,CAAC,CAAC;;EAGHxB,SAAS,CAACoC,kBAAkB,GAAG,UAAUC,IAAI,EAAE;IAC7CpC,KAAK,CAACQ,WAAW,CAACN,IAAI,CAACkC,IAAI,CAAC;EAC9B,CAAC,CAAC,CAAC;;EAGHrC,SAAS,CAACsC,oBAAoB,GAAG,UAAUD,IAAI,EAAE;IAC/CpC,KAAK,CAACQ,WAAW,GAAGR,KAAK,CAACQ,WAAW,CAAC8B,MAAM,CAAC,UAAUC,CAAC,EAAE;MACxD,OAAOA,CAAC,KAAKH,IAAI;IACnB,CAAC,CAAC;EACJ,CAAC,CAAC,CAAC;;EAGHrC,SAAS,CAACyC,gBAAgB,GAAG,YAAY;IACvC,IAAIC,MAAM,GAAG5B,SAAS,CAACJ,MAAM,GAAG,CAAC,IAAII,SAAS,CAAC,CAAC,CAAC,KAAKC,SAAS,GAAGD,SAAS,CAAC,CAAC,CAAC,GAAG,IAAI;IACrF,IAAI6B,IAAI,GAAG7B,SAAS,CAACJ,MAAM,GAAG,CAAC,IAAII,SAAS,CAAC,CAAC,CAAC,KAAKC,SAAS,GAAGD,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC;IACzF,IAAIF,qBAAqB,GAAGZ,SAAS,CAACY,qBAAqB;MACvDgC,qBAAqB,GAAG5C,SAAS,CAAC4C,qBAAqB;MACvDN,oBAAoB,GAAGtC,SAAS,CAACsC,oBAAoB;IACzD,IAAIO,UAAU,GAAG/C,UAAU,CAACgD,WAAW,CAAC;MACtC5B,QAAQ,EAAEjB,KAAK,CAACiB,QAAQ;MACxBoB,oBAAoB,EAAEA,oBAAoB;MAC1CS,SAAS,EAAE;QACTnC,qBAAqB,EAAEA,qBAAqB;QAC5CgC,qBAAqB,EAAEA;MACzB;IACF,CAAC,CAAC;IACFC,UAAU,CAACG,SAAS,CAACN,MAAM,CAAC;IAC5BG,UAAU,CAACI,OAAO,CAACN,IAAI,CAAC,CAAC,CAAC,EAAEA,IAAI,CAAC,CAAC,CAAC,CAAC;IACpC3C,SAAS,CAACoC,kBAAkB,CAACS,UAAU,CAAC;IACxC,OAAOA,UAAU;EACnB,CAAC,CAAC,CAAC;;EAGH7C,SAAS,CAACkD,MAAM,GAAGtD,KAAK,CAACuD,KAAK,CAAC,YAAY;IACzC,OAAOlD,KAAK,CAACQ,WAAW,CAACC,MAAM,EAAE;MAC/BT,KAAK,CAACQ,WAAW,CAAC2C,GAAG,CAAC,CAAC,CAACF,MAAM,CAAC,CAAC;IAClC;IAEAlD,SAAS,CAACkC,UAAU,CAAC,CAAC;EACxB,CAAC,EAAElC,SAAS,CAACkD,MAAM,CAAC;AACtB,CAAC,CAAC;AACF;AACA;;AAGA,IAAIG,cAAc,GAAG;EACnB;EACA5C,WAAW,EAAE,EAAE;EACfQ,kBAAkB,EAAE,CAAC;AACvB,CAAC,CAAC,CAAC;;AAEH,SAASqC,MAAMA,CAACtD,SAAS,EAAEC,KAAK,EAAE;EAChC,IAAIsD,aAAa,GAAGzC,SAAS,CAACJ,MAAM,GAAG,CAAC,IAAII,SAAS,CAAC,CAAC,CAAC,KAAKC,SAAS,GAAGD,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;EAC1F0C,MAAM,CAACC,MAAM,CAACxD,KAAK,EAAEoD,cAAc,EAAEE,aAAa,CAAC,CAAC,CAAC;;EAErD3D,KAAK,CAAC8D,GAAG,CAAC1D,SAAS,EAAEC,KAAK,CAAC;EAC3BL,KAAK,CAAC+D,GAAG,CAAC3D,SAAS,EAAEC,KAAK,EAAE,CAAC,oBAAoB,EAAE,UAAU,CAAC,CAAC,CAAC,CAAC;;EAEjEF,cAAc,CAACC,SAAS,EAAEC,KAAK,CAAC;AAClC,CAAC,CAAC;;AAEF,IAAI6C,WAAW,GAAGlD,KAAK,CAACkD,WAAW,CAACQ,MAAM,EAAE,gBAAgB,CAAC,CAAC,CAAC;;AAE/D,IAAIM,gBAAgB,GAAG;EACrBd,WAAW,EAAEA,WAAW;EACxBQ,MAAM,EAAEA;AACV,CAAC;AAED,SAASM,gBAAgB,IAAIC,OAAO,EAAEP,MAAM,EAAER,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}