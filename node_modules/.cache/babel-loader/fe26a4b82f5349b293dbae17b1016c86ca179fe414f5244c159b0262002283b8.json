{"ast":null,"code":"import _slicedToArray from \"/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n/* global XMLHttpRequest */\nimport CompositeClosureHelper from '../CompositeClosureHelper';\nvar connections = [];\nfunction ProcessLauncher(publicAPI, model) {\n  var _this = this;\n  publicAPI.start = function (config) {\n    var xhr = new XMLHttpRequest(),\n      url = model.endPoint;\n    xhr.open('POST', url, true);\n    if (config.headers) {\n      Object.entries(config.headers).forEach(function (_ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n          key = _ref2[0],\n          value = _ref2[1];\n        return xhr.setRequestHeader(key, value);\n      });\n      delete config.headers;\n    }\n    xhr.responseType = 'json';\n    var supportsJson = 'response' in xhr && xhr.responseType === 'json';\n    xhr.onload = function (e) {\n      var response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n      if (xhr.status === 200 && response && !response.error) {\n        // Add connection to our global list\n        connections.push(response);\n        publicAPI.fireProcessReady(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = function (e) {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send(JSON.stringify(config));\n  };\n  publicAPI.fetchConnection = function (sessionId) {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, sessionId].join('/');\n    xhr.open('GET', url, true);\n    xhr.responseType = 'json';\n    var supportsJson = 'response' in xhr && xhr.responseType === 'json';\n    xhr.onload = function (e) {\n      if (_this.status === 200) {\n        publicAPI.fireFetch(supportsJson ? xhr.response : JSON.parse(xhr.response));\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = function (e) {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send();\n  };\n  publicAPI.stop = function (connection) {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, connection.id].join('/');\n    xhr.open('DELETE', url, true);\n    xhr.responseType = 'json';\n    var supportsJson = 'response' in xhr && xhr.responseType === 'json';\n    xhr.onload = function (e) {\n      if (_this.status === 200) {\n        var response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n        // Remove connection from the list\n        // FIXME / TODO\n        publicAPI.fireProcessStopped(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = function (e) {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send();\n  };\n  publicAPI.listConnections = function () {\n    return connections;\n  };\n}\nvar DEFAULT_VALUES = {\n  endPoint: null\n};\nexport function extend(publicAPI, model) {\n  var initialValues = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n  CompositeClosureHelper.destroy(publicAPI, model);\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessReady');\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessStopped');\n  CompositeClosureHelper.event(publicAPI, model, 'Fetch');\n  CompositeClosureHelper.event(publicAPI, model, 'Error');\n  CompositeClosureHelper.isA(publicAPI, model, 'ProcessLauncher');\n  ProcessLauncher(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nexport var newInstance = CompositeClosureHelper.newInstance(extend);\nexport default {\n  newInstance: newInstance,\n  extend: extend\n};","map":{"version":3,"names":["CompositeClosureHelper","connections","ProcessLauncher","publicAPI","model","_this","start","config","xhr","XMLHttpRequest","url","endPoint","open","headers","Object","entries","forEach","_ref","_ref2","_slicedToArray","key","value","setRequestHeader","responseType","supportsJson","onload","e","response","JSON","parse","status","error","push","fireProcessReady","fireError","onerror","send","stringify","fetchConnection","sessionId","join","fireFetch","stop","connection","id","fireProcessStopped","listConnections","DEFAULT_VALUES","extend","initialValues","arguments","length","undefined","assign","destroy","event","isA","newInstance"],"sources":["/home/rakshith/Documents/RemoteRendering/vtk-js-react-app/node_modules/wslink/src/ProcessLauncher/index.js"],"sourcesContent":["/* global XMLHttpRequest */\nimport CompositeClosureHelper from '../CompositeClosureHelper';\n\nconst connections = [];\n\nfunction ProcessLauncher(publicAPI, model) {\n  publicAPI.start = (config) => {\n    var xhr = new XMLHttpRequest(),\n      url = model.endPoint;\n\n    xhr.open('POST', url, true);\n\n    if (config.headers) {\n      Object.entries(config.headers).forEach(([key, value]) =>\n        xhr.setRequestHeader(key, value)\n      );\n      delete config.headers;\n    }\n\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n\n    xhr.onload = (e) => {\n      const response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n      if (xhr.status === 200 && response && !response.error) {\n        // Add connection to our global list\n        connections.push(response);\n        publicAPI.fireProcessReady(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.onerror = (e) => {\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.send(JSON.stringify(config));\n  };\n\n  publicAPI.fetchConnection = (sessionId) => {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, sessionId].join('/');\n\n    xhr.open('GET', url, true);\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n\n    xhr.onload = (e) => {\n      if (this.status === 200) {\n        publicAPI.fireFetch(\n          supportsJson ? xhr.response : JSON.parse(xhr.response)\n        );\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.onerror = (e) => {\n      publicAPI.fireError(xhr);\n    };\n\n    xhr.send();\n  };\n\n  publicAPI.stop = (connection) => {\n    var xhr = new XMLHttpRequest(),\n      url = [model.endPoint, connection.id].join('/');\n\n    xhr.open('DELETE', url, true);\n    xhr.responseType = 'json';\n    const supportsJson = 'response' in xhr && xhr.responseType === 'json';\n\n    xhr.onload = (e) => {\n      if (this.status === 200) {\n        const response = supportsJson ? xhr.response : JSON.parse(xhr.response);\n        // Remove connection from the list\n        // FIXME / TODO\n        publicAPI.fireProcessStopped(response);\n        return;\n      }\n      publicAPI.fireError(xhr);\n    };\n    xhr.onerror = (e) => {\n      publicAPI.fireError(xhr);\n    };\n    xhr.send();\n  };\n\n  publicAPI.listConnections = () => {\n    return connections;\n  };\n}\n\nconst DEFAULT_VALUES = {\n  endPoint: null,\n};\n\nexport function extend(publicAPI, model, initialValues = {}) {\n  Object.assign(model, DEFAULT_VALUES, initialValues);\n\n  CompositeClosureHelper.destroy(publicAPI, model);\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessReady');\n  CompositeClosureHelper.event(publicAPI, model, 'ProcessStopped');\n  CompositeClosureHelper.event(publicAPI, model, 'Fetch');\n  CompositeClosureHelper.event(publicAPI, model, 'Error');\n  CompositeClosureHelper.isA(publicAPI, model, 'ProcessLauncher');\n\n  ProcessLauncher(publicAPI, model);\n}\n\n// ----------------------------------------------------------------------------\nexport const newInstance = CompositeClosureHelper.newInstance(extend);\n\nexport default { newInstance, extend };\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}